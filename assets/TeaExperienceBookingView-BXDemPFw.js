import{d as E,u as $,a as A,b as f,c as k,o as O,e as j,f as m,g as u,h as i,i as e,A as M,x as _,s as n,S as l,l as y,F as S,k as w,t as r,m as g,v as h,K as U,L as I,p as F,_ as J}from"./index-DFO3eZqt.js";import{_ as L}from"./tea_bg-C2eaDTgn.js";const Q={class:"page-container fade-in"},K={class:"main-content"},R={class:"page-header"},G={class:"container"},H={class:"header-content"},W={class:"breadcrumb"},X={class:"page-title"},Y={class:"booking-section"},Z={class:"container"},ee={class:"booking-content"},se={class:"section-card"},te={class:"section-header"},ae={class:"experience-grid"},oe=["onClick"],ie={class:"experience-image"},ne=["src","alt"],le={class:"experience-badge"},re={class:"experience-overlay"},de={class:"experience-info"},ue={class:"experience-features"},ce={class:"feature-item"},me={class:"feature-item"},pe={class:"experience-price"},ve={class:"price"},_e={key:0,id:"booking-form-section",class:"section-card booking-form-card"},fe={class:"section-header"},ge={class:"selected-experience-info"},be={class:"selected-badge"},ke={class:"selected-details"},ye={class:"selected-name"},he={class:"selected-price"},xe={class:"selected-duration"},qe={class:"booking-form"},ze={class:"form-grid"},Se={class:"form-group"},we=["min"],Ie={class:"form-group"},Ve=["value"],Ce={class:"form-group"},Pe={class:"quantity-selector"},Te=["disabled"],De={class:"quantity"},Be=["disabled"],Ne={class:"form-group"},Ee={class:"form-group full-width"},$e={key:1,class:"section-card price-summary-card"},Ae={class:"section-header"},Oe={class:"price-summary"},je={class:"summary-item"},Me={class:"item-info"},Ue={class:"item-name"},Fe={class:"item-details"},Je={class:"item-price"},Le={class:"summary-total"},Qe={class:"total-price"},Ke={key:2,class:"submit-section"},Re=["disabled"],Ge={class:"footer"},He={class:"footer-content"},We={class:"footer-section"},Xe=E({__name:"TeaExperienceBookingView",setup(Ye){const x=$(),p=A(),o=f(null),v=f(!1),t=f({date:"",time:"",quantity:1,phone:"",remarks:""}),V=f([{id:1,name:"普洱茶品鉴体验",description:"专业茶艺师指导，品味不同年份普洱茶的独特韵味，了解普洱茶的分类和品鉴技巧",price:168,duration:"2小时",image:"/src/assets/images/实地调研/茶叶产品调研/茶叶产品调研10.jpg",maxParticipants:8},{id:2,name:"茶艺表演与学习",description:"学习传统茶艺手法，体验茶道文化的精髓，掌握正宗的普洱茶冲泡技巧",price:128,duration:"1.5小时",image:"/src/assets/images/实地调研/茶叶产品调研/茶叶产品调研15.jpg",maxParticipants:6},{id:3,name:"茶园采摘体验",description:"亲手采摘茶叶，了解茶叶从采摘到制作的全过程，体验茶农的辛勤劳作",price:98,duration:"3小时",image:"/src/assets/images/实地调研/茶叶产品调研/茶叶产品调研8.jpg",maxParticipants:12},{id:4,name:"茶文化深度游",description:"参观茶厂，了解普洱茶制作工艺，品尝地道茶点，深度了解茶文化历史",price:288,duration:"半天",image:"/src/assets/images/实地调研/茶叶产品调研/茶叶产品调研1.jpg",maxParticipants:10}]),C=["09:00-11:00","10:00-12:00","14:00-16:00","15:00-17:00","16:00-18:00"],P=k(()=>{const d=new Date;return d.setDate(d.getDate()+1),d.toISOString().split("T")[0]}),b=k(()=>o.value?o.value.price*t.value.quantity:0),q=k(()=>o.value&&t.value.date&&t.value.time&&t.value.phone&&t.value.quantity>0),T=d=>{o.value=d,t.value.quantity=1,setTimeout(()=>{const s=document.getElementById("booking-form-section");s&&s.scrollIntoView({behavior:"smooth",block:"start"})},100)},D=()=>{o.value&&t.value.quantity<o.value.maxParticipants&&t.value.quantity++},B=()=>{t.value.quantity>1&&t.value.quantity--},N=async()=>{if(!p.isAuthenticated){alert("请先登录后再预约"),x.push("/login");return}if(!q.value){alert("请填写完整的预约信息");return}v.value=!0;try{const d={type:"tea_experience",experienceId:o.value.id,experienceName:o.value.name,date:t.value.date,time:t.value.time,quantity:t.value.quantity,unitPrice:o.value.price,totalAmount:b.value,phone:t.value.phone,remarks:t.value.remarks,status:"pending",createTime:new Date().toISOString()},s=JSON.parse(localStorage.getItem("tea_experience_orders")||"[]"),c="TEA_"+Date.now()+"_"+Math.random().toString(36).substring(2,11),a={id:c,userId:p.user?.id||p.user?.username,...d};s.unshift(a),localStorage.setItem("tea_experience_orders",JSON.stringify(s)),await new Promise(z=>setTimeout(z,1e3)),alert(`预约成功！
订单号：${c}
体验项目：${o.value.name}
体验时间：${t.value.date} ${t.value.time}
参与人数：${t.value.quantity}人
总金额：¥${b.value}`),x.push("/orders")}catch(d){console.error("预约失败:",d),alert("预约失败，请稍后重试")}finally{v.value=!1}};return O(()=>{p.user?.phone&&(t.value.phone=p.user.phone)}),(d,s)=>{const c=j("router-link");return u(),m("div",Q,[i(M),e("main",K,[e("section",R,[s[11]||(s[11]=e("div",{class:"header-background"},[e("img",{src:L,alt:"茶文化背景"}),e("div",{class:"header-overlay"})],-1)),e("div",G,[e("div",H,[e("div",W,[i(c,{to:"/",class:"breadcrumb-link"},{default:_(()=>s[4]||(s[4]=[n("首页")])),_:1,__:[4]}),s[6]||(s[6]=e("span",{class:"breadcrumb-separator"},">",-1)),i(c,{to:"/tea-culture",class:"breadcrumb-link"},{default:_(()=>s[5]||(s[5]=[n("茶文化")])),_:1,__:[5]}),s[7]||(s[7]=e("span",{class:"breadcrumb-separator"},">",-1)),s[8]||(s[8]=e("span",{class:"breadcrumb-current"},"预约体验",-1))]),e("h1",X,[i(l,{name:"leaf",size:"32",color:"#d4af37"}),s[9]||(s[9]=n(" 茶文化体验预约 "))]),s[10]||(s[10]=e("p",{class:"page-subtitle"}," 体验正宗普洱茶文化，感受千年传承的茶道精神 ",-1))])])]),e("section",Y,[e("div",Z,[e("div",ee,[e("div",se,[e("div",te,[e("h2",null,[i(l,{name:"spa",size:"24",color:"#d4af37"}),s[12]||(s[12]=n(" 选择体验项目 "))]),s[13]||(s[13]=e("p",null,"精心设计的茶文化体验项目，让您深度感受普洱茶的魅力",-1))]),e("div",ae,[(u(!0),m(S,null,w(V.value,a=>(u(),m("div",{key:a.id,class:F(["experience-card",{active:o.value?.id===a.id}]),onClick:z=>T(a)},[e("div",ie,[e("img",{src:a.image,alt:a.name},null,8,ne),e("div",le,r(a.duration),1),e("div",re,[i(l,{name:"check-circle",size:"32",color:"white"})])]),e("div",de,[e("h3",null,r(a.name),1),e("p",null,r(a.description),1),e("div",ue,[e("span",ce,[i(l,{name:"users",size:"16"}),n(" 最多"+r(a.maxParticipants)+"人 ",1)]),e("span",me,[i(l,{name:"clock",size:"16"}),n(" "+r(a.duration),1)])]),e("div",pe,[e("span",ve,"¥"+r(a.price),1),s[14]||(s[14]=e("span",{class:"unit"},"/人",-1))])])],10,oe))),128))])]),o.value?(u(),m("div",_e,[e("div",fe,[e("h2",null,[i(l,{name:"calendar-alt",size:"24",color:"#d4af37"}),s[15]||(s[15]=n(" 预约信息 "))]),s[17]||(s[17]=e("p",null,"请填写您的预约信息，我们将为您安排最佳的体验时间",-1)),e("div",ge,[e("div",be,[i(l,{name:"check-circle",size:"16",color:"#d4af37"}),s[16]||(s[16]=n(" 已选择体验项目 "))]),e("div",ke,[e("span",ye,r(o.value.name),1),e("span",he,"¥"+r(o.value.price)+"/人",1),e("span",xe,r(o.value.duration),1)])])]),e("div",qe,[e("div",ze,[e("div",Se,[e("label",null,[i(l,{name:"calendar",size:"16"}),s[18]||(s[18]=n(" 体验日期 "))]),g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.date=a),type:"date",min:P.value,class:"form-input",placeholder:"请选择体验日期"},null,8,we),[[h,t.value.date]])]),e("div",Ie,[e("label",null,[i(l,{name:"clock",size:"16"}),s[19]||(s[19]=n(" 体验时间 "))]),g(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.time=a),class:"form-select"},[s[20]||(s[20]=e("option",{value:""},"请选择时间段",-1)),(u(),m(S,null,w(C,a=>e("option",{key:a,value:a},r(a),9,Ve)),64))],512),[[U,t.value.time]])]),e("div",Ce,[e("label",null,[i(l,{name:"users",size:"16"}),s[21]||(s[21]=n(" 参与人数 "))]),e("div",Pe,[e("button",{onClick:B,class:"qty-btn",disabled:t.value.quantity<=1},[i(l,{name:"minus",size:"16"})],8,Te),e("span",De,r(t.value.quantity),1),e("button",{onClick:D,class:"qty-btn",disabled:t.value.quantity>=o.value.maxParticipants},[i(l,{name:"plus",size:"16"})],8,Be)])]),e("div",Ne,[e("label",null,[i(l,{name:"phone",size:"16"}),s[22]||(s[22]=n(" 联系电话 "))]),g(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.value.phone=a),type:"tel",placeholder:"请输入您的联系电话",class:"form-input"},null,512),[[h,t.value.phone]])])]),e("div",Ee,[e("label",null,[i(l,{name:"edit",size:"16"}),s[23]||(s[23]=n(" 特殊需求 "))]),g(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=a=>t.value.remarks=a),placeholder:"请输入特殊需求或备注信息（可选）",class:"form-textarea",rows:"4"},null,512),[[h,t.value.remarks]])])])])):y("",!0),o.value?(u(),m("div",$e,[e("div",Ae,[e("h2",null,[i(l,{name:"calculator",size:"24",color:"#d4af37"}),s[24]||(s[24]=n(" 价格汇总 "))])]),e("div",Oe,[e("div",je,[e("div",Me,[e("span",Ue,r(o.value.name),1),e("span",Fe,r(t.value.quantity)+"人 × ¥"+r(o.value.price)+"/人",1)]),e("span",Je,"¥"+r(o.value.price*t.value.quantity),1)]),e("div",Le,[s[25]||(s[25]=e("span",{class:"total-label"},"总计金额",-1)),e("span",Qe,"¥"+r(b.value),1)])])])):y("",!0),o.value?(u(),m("div",Ke,[e("button",{onClick:N,disabled:!q.value||v.value,class:"submit-btn"},[v.value?(u(),I(l,{key:0,name:"spinner",spin:"",size:"20"})):(u(),I(l,{key:1,name:"check",size:"20"})),n(" "+r(v.value?"提交中...":"确认预约"),1)],8,Re),s[26]||(s[26]=e("p",{class:"submit-note"},[n(" 点击确认预约即表示您同意我们的 "),e("a",{href:"#",class:"link"},"服务条款"),n(" 和 "),e("a",{href:"#",class:"link"},"隐私政策")],-1))])):y("",!0)])])])]),e("footer",Ge,[e("div",He,[s[31]||(s[31]=e("div",{class:"footer-section"},[e("h3",null,"普洱蘑菇庄园"),e("p",null,"隐于森林深处，与自然共生的生态民宿体验")],-1)),s[32]||(s[32]=e("div",{class:"footer-section"},[e("h4",null,"联系我们"),e("p",null,"地址：云南省普洱市思茅区"),e("p",null,"电话：400-123-4567"),e("p",null,"邮箱：info@mushroomfarm.com")],-1)),e("div",We,[s[30]||(s[30]=e("h4",null,"快速链接",-1)),i(c,{to:"/",class:"footer-link"},{default:_(()=>s[27]||(s[27]=[n("首页")])),_:1,__:[27]}),i(c,{to:"/tea-culture",class:"footer-link"},{default:_(()=>s[28]||(s[28]=[n("茶文化")])),_:1,__:[28]}),i(c,{to:"/products",class:"footer-link"},{default:_(()=>s[29]||(s[29]=[n("民宿产品")])),_:1,__:[29]})])]),s[33]||(s[33]=e("div",{class:"footer-bottom"},[e("p",null,"© 2024 普洱蘑菇庄园民宿. 保留所有权利.")],-1))])])}}}),ss=J(Xe,[["__scopeId","data-v-11633313"]]);export{ss as default};
