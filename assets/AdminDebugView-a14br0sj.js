import{d as O,b as c,r as S,f as i,g as u,i as s,l as p,t as d,m as y,v as b,s as g,O as $,_ as h}from"./index-PKPpSeMn.js";import{r as v}from"./request-DzKJqaQU.js";const J={class:"admin-debug"},C={class:"debug-container"},V={class:"debug-section"},x={key:0,class:"result"},A={class:"debug-section"},D={key:0,class:"result"},R={class:"debug-section"},B={class:"login-form"},I={key:0,class:"result"},T={class:"debug-section"},U={key:0,class:"result"},q={class:"debug-section"},E={class:"info"},F=O({__name:"AdminDebugView",setup(L){const f=window.location,o=c(""),l=c(""),a=c(""),r=c(""),t=S({username:"root",password:"root123"}),w=async()=>{try{o.value="检查中...";const e=await v.get("/admin/init/check-admin");o.value=JSON.stringify(e,null,2)}catch(e){o.value=`错误: ${e.message}
详情: ${JSON.stringify(e.response?.data||e,null,2)}`}},_=async()=>{try{l.value="创建中...";const e=await v.post("/admin/init/create-admin");l.value=JSON.stringify(e,null,2)}catch(e){l.value=`错误: ${e.message}
详情: ${JSON.stringify(e.response?.data||e,null,2)}`}},k=async()=>{try{a.value="登录中...",console.log("发送登录请求:",{username:t.username,password:t.password});const e=await v.post("/sys/user/login",{username:t.username,password:t.password});console.log("登录响应:",e),a.value=JSON.stringify(e,null,2)}catch(e){console.error("登录错误:",e),a.value=`错误: ${e.message}
详情: ${JSON.stringify(e.response?.data||e,null,2)}`}},N=async()=>{try{r.value="测试中...";const e=await v.get("/admin/init/list-admins");r.value=`连接成功!
管理员列表: ${JSON.stringify(e,null,2)}`}catch(e){r.value=`连接失败: ${e.message}
详情: ${JSON.stringify(e.response?.data||e,null,2)}`}};return(e,n)=>(u(),i("div",J,[s("div",C,[n[11]||(n[11]=s("h1",null,"管理员登录调试页面",-1)),s("div",V,[n[2]||(n[2]=s("h2",null,"1. 检查管理员账号是否存在",-1)),s("button",{onClick:w,class:"debug-btn"},"检查管理员账号"),o.value?(u(),i("div",x,[s("pre",null,d(o.value),1)])):p("",!0)]),s("div",A,[n[3]||(n[3]=s("h2",null,"2. 创建管理员账号",-1)),s("button",{onClick:_,class:"debug-btn"},"创建管理员账号"),l.value?(u(),i("div",D,[s("pre",null,d(l.value),1)])):p("",!0)]),s("div",R,[n[4]||(n[4]=s("h2",null,"3. 测试管理员登录",-1)),s("div",B,[y(s("input",{"onUpdate:modelValue":n[0]||(n[0]=m=>t.username=m),placeholder:"用户名"},null,512),[[b,t.username]]),y(s("input",{"onUpdate:modelValue":n[1]||(n[1]=m=>t.password=m),type:"password",placeholder:"密码"},null,512),[[b,t.password]]),s("button",{onClick:k,class:"debug-btn"},"测试登录")]),a.value?(u(),i("div",I,[s("pre",null,d(a.value),1)])):p("",!0)]),s("div",T,[n[5]||(n[5]=s("h2",null,"4. API连接测试",-1)),s("button",{onClick:N,class:"debug-btn"},"测试后端连接"),r.value?(u(),i("div",U,[s("pre",null,d(r.value),1)])):p("",!0)]),s("div",q,[n[10]||(n[10]=s("h2",null,"5. 系统信息",-1)),s("div",E,[s("p",null,[n[6]||(n[6]=s("strong",null,"前端地址:",-1)),g(" "+d($(f).origin),1)]),n[7]||(n[7]=s("p",null,[s("strong",null,"后端地址:"),g(" http://localhost:8091")],-1)),n[8]||(n[8]=s("p",null,[s("strong",null,"登录接口:"),g(" /sys/user/login")],-1)),n[9]||(n[9]=s("p",null,[s("strong",null,"默认账号:"),g(" root / root123")],-1))])])])]))}}),j=h(F,[["__scopeId","data-v-5c0f2ab9"]]);export{j as default};
