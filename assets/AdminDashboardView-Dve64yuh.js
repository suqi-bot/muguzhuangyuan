import{d as Q,P as ns,b as g,r as L,o as ts,f,g as p,i as s,l as C,s as b,m as M,K as ss,v as A,G as as,t as d,F as G,k as J,w as H,j as es,p as U,_ as X,u as ls,a as os,N as is,h as Z}from"./index-PjnBo1wj.js";import{r as D}from"./request-DzKJqaQU.js";const ds={class:"room-management fade-in"},rs={class:"toolbar"},cs={class:"toolbar-left"},us={class:"toolbar-right"},vs={class:"search-box"},fs={class:"stats-cards"},ps={class:"stat-card slide-in-left",style:{"animation-delay":"0.1s"}},ms={class:"stat-content"},bs=["data-target"],gs={class:"stat-card slide-in-left",style:{"animation-delay":"0.2s"}},$s={class:"stat-content"},ys=["data-target"],hs={class:"stat-card slide-in-left",style:{"animation-delay":"0.3s"}},ks={class:"stat-content"},_s=["data-target"],ws={class:"stat-card slide-in-left",style:{"animation-delay":"0.4s"}},Cs={class:"stat-content"},xs=["data-target"],Ss={class:"room-list"},Ds={class:"list-header"},Ts={class:"list-controls"},Us={class:"total-count"},Vs={key:0,class:"loading"},Ms={key:1,class:"room-table"},Rs={class:"room-info"},Ns={class:"room-basic"},As={class:"room-code"},Is={class:"room-address"},Os={class:"category-tag"},Ps={class:"price"},zs={class:"price-amount"},Es={class:"actions"},Ls={class:"action-buttons"},qs=["onClick"],Ks=["onClick"],Fs=["onClick","title","data-tooltip"],js={class:"btn-text"},Bs=["onClick"],Ws={key:0,class:"empty-state"},Hs={key:2,class:"pagination"},Gs=["disabled"],Js={class:"page-info"},Qs=["disabled"],Xs={class:"modal-header"},Ys={class:"modal-body"},Zs={class:"form-row"},st={class:"form-group"},tt={class:"form-group"},at={class:"form-row"},et={class:"form-group"},nt={class:"form-group"},lt={class:"form-row"},ot={class:"form-group"},it={class:"form-group"},dt={class:"form-group"},rt={class:"form-group"},ct={class:"form-group"},ut={class:"form-group"},vt={class:"form-group"},ft={class:"form-actions"},pt=["disabled"],mt={key:0,class:"fas fa-spinner fa-spin"},bt=Q({__name:"RoomManagementView",setup(Y){const u=ns(),w=g(!1),m=g([]),$=g(""),h=g(""),x=g(!1),T=g(!1),V=g(!1),R=g(null),y=g(!1),r=L({id:null,name:"",code:"",category:"",price:"",city:"",seat:"",address:"",device:"",banner:"",describe:"",remark:"",status:0,state:"空闲",weight:0}),n=L({current:1,size:10,total:0,pages:0}),k=L({total:0,available:0,occupied:0,reserved:0}),_=L({total:0,available:0,occupied:0,reserved:0}),N=async()=>{w.value=!0;try{const o=await D.get("/h/room",{params:{pageNum:n.current,pageSize:n.size,search:$.value,searchType:h.value}});o.code===200||o.code==="200"?(m.value=o.data?.records||[],n.total=o.data?.total||0,n.pages=o.data?.pages||0,P(),u.success("房间数据加载成功","数据加载")):u.error(o.message||o.msg||"获取房间列表失败","加载失败")}catch(o){console.error("获取房间列表失败:",o),u.error("网络错误，请稍后重试","加载失败")}finally{w.value=!1}},O=(o,e,l)=>{const i=Math.ceil((o-e)/20);e<o?(_[l]=e+i,setTimeout(()=>O(o,e+i,l),50)):_[l]=o},P=()=>{const o={total:m.value.length,available:m.value.filter(e=>e.state==="空闲").length,occupied:m.value.filter(e=>e.state==="入住").length,reserved:m.value.filter(e=>e.state==="预订").length};Object.assign(k,o),Object.keys(o).forEach(e=>{const l=e;O(o[l],_[l],l)})},z=()=>{n.current=1,N()},F=()=>{N()},q=o=>{n.current=o,N()},j=o=>{R.value=o,V.value=!0},B=o=>{R.value=o,Object.assign(r,{id:o.id,name:o.name||"",code:o.code||"",category:o.category||"",price:o.price||"",city:o.city||"",seat:o.seat||"",address:o.address||"",device:o.device||"",banner:o.banner||"",describe:o.describe||"",remark:o.remark||"",status:o.status||0,state:o.state||"空闲",weight:o.weight||0}),T.value=!0},I=async o=>{const e=o.status===0?"启用":"禁用",l=`确定要${e}房间"${o.name}"吗？

${e==="禁用"?"⚠️ 禁用后该房间将无法被预订":"✅ 启用后该房间可正常预订"}`;if(await u.confirm({title:`确认${e}房间`,message:l,confirmText:`确认${e}`,cancelText:"取消"}))try{u.info(`正在${e}房间...`,"处理中");const S=await D.put("/h/room/status",o);S.code===200||S.code==="200"?(o.status=o.status===0?1:0,u.success(`房间"${o.name}"已${e}`,`${e}成功`),P()):u.error(S.message||S.msg||`${e}失败，请稍后重试`,"操作失败")}catch(S){console.error("切换房间状态失败:",S),u.error("网络连接异常，请检查网络后重试","操作失败")}},W=async o=>{const e=`房间信息：
• 房间名称：${o.name}
• 房间编号：${o.roomNumber||"未设置"}
• 房间类型：${o.category||"未设置"}

此操作不可恢复，确定要删除吗？`;if(await u.confirm({title:"⚠️ 确认删除操作",message:e,icon:"fas fa-exclamation-triangle",confirmText:"确认删除",cancelText:"取消"})){const i=event?.target;i&&(i.innerHTML='<i class="fas fa-spinner fa-spin"></i> 删除中...',i.style.pointerEvents="none");try{const S=await D.delete(`/h/room/${o.id}`);S.code===200||S.code==="200"?(u.success(`房间"${o.name}"已成功删除`,"删除成功"),await N()):u.error(S.message||S.msg||"删除失败，请稍后重试","操作失败")}catch(S){console.error("删除房间失败:",S),u.error("网络连接异常，请检查网络后重试","删除失败")}finally{i&&(i.innerHTML='<i class="fas fa-trash"></i> <span class="btn-text">删除</span>',i.style.pointerEvents="auto")}}},E=()=>{Object.assign(r,{id:null,name:"",code:"",category:"",price:"",city:"",seat:"",address:"",device:"",banner:"",describe:"",remark:"",status:0,state:"空闲",weight:0})},c=()=>{x.value=!1,T.value=!1,V.value=!1,R.value=null,E()},t=async()=>{y.value=!0;try{let o;x.value?o=await D.post("/h/room",r):o=await D.put("/h/room",r),o.code===200||o.code==="200"?(u.success(x.value?"房间添加成功":"房间更新成功","操作成功"),c(),await N()):u.error(o.message||o.msg||"操作失败","提交失败")}catch(o){console.error("提交表单失败:",o),u.error("网络错误，请稍后重试","提交失败")}finally{y.value=!1}},a=o=>{switch(o){case"空闲":return"available";case"入住":return"occupied";case"预订":return"reserved";default:return"unknown"}},v=o=>o||"未知",K=o=>o?new Date(o).toLocaleDateString("zh-CN"):"-";return ts(()=>{N()}),(o,e)=>(p(),f("div",ds,[e[56]||(e[56]=s("div",{class:"page-header"},[s("h1",{class:"page-title"},[s("i",{class:"fas fa-bed"}),b(" 房间管理 ")]),s("p",{class:"page-description"},"管理普洱蘑菇庄园民宿的所有房间信息")],-1)),s("div",rs,[s("div",cs,[s("button",{onClick:e[0]||(e[0]=l=>x.value=!0),class:"btn btn-primary"},e[18]||(e[18]=[s("i",{class:"fas fa-plus"},null,-1),b(" 添加房间 ")])),s("button",{onClick:F,class:"btn btn-secondary"},e[19]||(e[19]=[s("i",{class:"fas fa-sync-alt"},null,-1),b(" 刷新 ")]))]),s("div",us,[s("div",vs,[M(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>h.value=l),class:"search-type"},e[20]||(e[20]=[s("option",{value:""},"全部",-1),s("option",{value:"name"},"房间名称",-1),s("option",{value:"category"},"房间类型",-1),s("option",{value:"city"},"城市",-1)]),512),[[ss,h.value]]),M(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>$.value=l),onKeyup:as(z,["enter"]),type:"text",placeholder:"搜索房间...",class:"search-input"},null,544),[[A,$.value]]),s("button",{onClick:z,class:"btn btn-search"},e[21]||(e[21]=[s("i",{class:"fas fa-search"},null,-1)]))])])]),s("div",fs,[s("div",ps,[e[23]||(e[23]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-bed"})],-1)),s("div",ms,[s("h3",{class:"stat-number","data-target":k.total},d(_.total),9,bs),e[22]||(e[22]=s("p",null,"总房间数",-1))])]),s("div",gs,[e[25]||(e[25]=s("div",{class:"stat-icon available"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",$s,[s("h3",{class:"stat-number","data-target":k.available},d(_.available),9,ys),e[24]||(e[24]=s("p",null,"空闲房间",-1))])]),s("div",hs,[e[27]||(e[27]=s("div",{class:"stat-icon occupied"},[s("i",{class:"fas fa-user"})],-1)),s("div",ks,[s("h3",{class:"stat-number","data-target":k.occupied},d(_.occupied),9,_s),e[26]||(e[26]=s("p",null,"已入住",-1))])]),s("div",ws,[e[29]||(e[29]=s("div",{class:"stat-icon reserved"},[s("i",{class:"fas fa-calendar-check"})],-1)),s("div",Cs,[s("h3",{class:"stat-number","data-target":k.reserved},d(_.reserved),9,xs),e[28]||(e[28]=s("p",null,"已预订",-1))])])]),s("div",Ss,[s("div",Ds,[e[30]||(e[30]=s("h2",null,"房间列表",-1)),s("div",Ts,[s("span",Us,"共 "+d(n.total)+" 间房间",1)])]),w.value?(p(),f("div",Vs,e[31]||(e[31]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1),b(" 加载中... ")]))):(p(),f("div",Ms,[s("table",null,[e[36]||(e[36]=s("thead",null,[s("tr",null,[s("th",null,"房间信息"),s("th",null,"类型"),s("th",null,"价格"),s("th",null,"状态"),s("th",null,"城市"),s("th",null,"创建时间"),s("th",null,"操作")])],-1)),s("tbody",null,[(p(!0),f(G,null,J(m.value,l=>(p(),f("tr",{key:l.id,class:"room-row"},[s("td",Rs,[s("div",Ns,[s("h4",null,d(l.name),1),s("p",As,"房间号: "+d(l.code),1),s("p",Is,d(l.address),1)])]),s("td",null,[s("span",Os,d(l.category),1)]),s("td",Ps,[s("span",zs,"¥"+d(l.price),1),e[32]||(e[32]=s("span",{class:"price-unit"},"/晚",-1))]),s("td",null,[s("span",{class:U(["status-badge",a(l.state)])},d(v(l.state)),3)]),s("td",null,d(l.city),1),s("td",null,d(K(l.createTime)),1),s("td",Es,[s("div",Ls,[s("button",{onClick:i=>j(l),class:"btn btn-sm btn-info action-btn",title:"查看房间详情","data-tooltip":"查看详情"},e[33]||(e[33]=[s("i",{class:"fas fa-eye"},null,-1),s("span",{class:"btn-text"},"查看",-1)]),8,qs),s("button",{onClick:i=>B(l),class:"btn btn-sm btn-warning action-btn",title:"编辑房间信息","data-tooltip":"编辑房间"},e[34]||(e[34]=[s("i",{class:"fas fa-edit"},null,-1),s("span",{class:"btn-text"},"编辑",-1)]),8,Ks),s("button",{onClick:i=>I(l),class:U(["btn btn-sm action-btn",l.status===0?"btn-danger":"btn-success"]),title:l.status===0?"启用房间":"禁用房间","data-tooltip":l.status===0?"启用":"禁用"},[s("i",{class:U(l.status===0?"fas fa-ban":"fas fa-check")},null,2),s("span",js,d(l.status===0?"启用":"禁用"),1)],10,Fs),s("button",{onClick:i=>W(l),class:"btn btn-sm btn-danger action-btn",title:"删除房间（不可恢复）","data-tooltip":"删除房间"},e[35]||(e[35]=[s("i",{class:"fas fa-trash"},null,-1),s("span",{class:"btn-text"},"删除",-1)]),8,Bs)])])]))),128))])]),m.value.length===0?(p(),f("div",Ws,e[37]||(e[37]=[s("i",{class:"fas fa-bed"},null,-1),s("h3",null,"暂无房间数据",-1),s("p",null,'点击"添加房间"按钮创建第一个房间',-1)]))):C("",!0)])),m.value.length>0?(p(),f("div",Hs,[s("button",{onClick:e[3]||(e[3]=l=>q(n.current-1)),disabled:n.current<=1,class:"btn btn-secondary"},e[38]||(e[38]=[s("i",{class:"fas fa-chevron-left"},null,-1),b(" 上一页 ")]),8,Gs),s("span",Js," 第 "+d(n.current)+" 页，共 "+d(n.pages)+" 页 ",1),s("button",{onClick:e[4]||(e[4]=l=>q(n.current+1)),disabled:n.current>=n.pages,class:"btn btn-secondary"},e[39]||(e[39]=[b(" 下一页 "),s("i",{class:"fas fa-chevron-right"},null,-1)]),8,Qs)])):C("",!0)]),x.value||T.value?(p(),f("div",{key:0,class:"modal-overlay",onClick:c},[s("div",{class:"modal",onClick:e[16]||(e[16]=H(()=>{},["stop"]))},[s("div",Xs,[s("h3",null,d(x.value?"添加房间":"编辑房间"),1),s("button",{onClick:c,class:"close-btn"},e[40]||(e[40]=[s("i",{class:"fas fa-times"},null,-1)]))]),s("div",Ys,[s("form",{onSubmit:H(t,["prevent"]),class:"room-form"},[s("div",Zs,[s("div",st,[e[41]||(e[41]=s("label",{for:"name"},"房间名称 *",-1)),M(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>r.name=l),type:"text",id:"name",required:"",placeholder:"请输入房间名称",class:"form-input"},null,512),[[A,r.name]])]),s("div",tt,[e[42]||(e[42]=s("label",{for:"code"},"房间号 *",-1)),M(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>r.code=l),type:"text",id:"code",required:"",placeholder:"请输入房间号",class:"form-input"},null,512),[[A,r.code]])])]),s("div",at,[s("div",et,[e[44]||(e[44]=s("label",{for:"category"},"房间类型 *",-1)),M(s("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>r.category=l),id:"category",required:"",class:"form-input"},e[43]||(e[43]=[es('<option value="" data-v-6256a212>请选择房间类型</option><option value="豪华海景房" data-v-6256a212>豪华海景房</option><option value="普洱茶香木屋" data-v-6256a212>普洱茶香木屋</option><option value="庄园豪华套房" data-v-6256a212>庄园豪华套房</option><option value="竹林雅居" data-v-6256a212>竹林雅居</option><option value="山景别墅" data-v-6256a212>山景别墅</option>',6)]),512),[[ss,r.category]])]),s("div",nt,[e[45]||(e[45]=s("label",{for:"price"},"价格 *",-1)),M(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>r.price=l),type:"number",id:"price",required:"",min:"0",step:"0.01",placeholder:"请输入价格",class:"form-input"},null,512),[[A,r.price]])])]),s("div",lt,[s("div",ot,[e[46]||(e[46]=s("label",{for:"city"},"所在城市 *",-1)),M(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>r.city=l),type:"text",id:"city",required:"",placeholder:"请输入城市",class:"form-input"},null,512),[[A,r.city]])]),s("div",it,[e[47]||(e[47]=s("label",{for:"seat"},"床位数 *",-1)),M(s("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>r.seat=l),type:"number",id:"seat",required:"",min:"1",placeholder:"请输入床位数",class:"form-input"},null,512),[[A,r.seat]])])]),s("div",dt,[e[48]||(e[48]=s("label",{for:"address"},"详细地址 *",-1)),M(s("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>r.address=l),type:"text",id:"address",required:"",placeholder:"请输入详细地址",class:"form-input"},null,512),[[A,r.address]])]),s("div",rt,[e[49]||(e[49]=s("label",{for:"device"},"配套设施",-1)),M(s("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>r.device=l),type:"text",id:"device",placeholder:"请输入配套设施，用逗号分隔",class:"form-input"},null,512),[[A,r.device]])]),s("div",ct,[e[50]||(e[50]=s("label",{for:"banner"},"封面图片URL",-1)),M(s("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>r.banner=l),type:"url",id:"banner",placeholder:"请输入图片URL",class:"form-input"},null,512),[[A,r.banner]])]),s("div",ut,[e[51]||(e[51]=s("label",{for:"describe"},"房间描述",-1)),M(s("textarea",{"onUpdate:modelValue":e[14]||(e[14]=l=>r.describe=l),id:"describe",rows:"4",placeholder:"请输入房间描述",class:"form-input"},null,512),[[A,r.describe]])]),s("div",vt,[e[52]||(e[52]=s("label",{for:"remark"},"备注",-1)),M(s("textarea",{"onUpdate:modelValue":e[15]||(e[15]=l=>r.remark=l),id:"remark",rows:"3",placeholder:"请输入备注信息",class:"form-input"},null,512),[[A,r.remark]])]),s("div",ft,[s("button",{type:"button",onClick:c,class:"btn btn-secondary"}," 取消 "),s("button",{type:"submit",class:"btn btn-primary",disabled:y.value},[y.value?(p(),f("i",mt)):C("",!0),b(" "+d(y.value?"提交中...":x.value?"添加房间":"更新房间"),1)],8,pt)])],32)])])])):C("",!0),V.value?(p(),f("div",{key:1,class:"modal-overlay",onClick:c},[s("div",{class:"modal modal-large",onClick:e[17]||(e[17]=H(()=>{},["stop"]))},[s("div",{class:"modal-header"},[e[54]||(e[54]=s("h3",null,"房间详情",-1)),s("button",{onClick:c,class:"close-btn"},e[53]||(e[53]=[s("i",{class:"fas fa-times"},null,-1)]))]),e[55]||(e[55]=s("div",{class:"modal-body"},[s("p",null,"房间详情功能开发中...")],-1))])])):C("",!0)]))}}),gt=X(bt,[["__scopeId","data-v-6256a212"]]),$t={class:"order-management fade-in"},yt={class:"toolbar"},ht={class:"toolbar-left"},kt={class:"filter-tabs"},_t=["onClick"],wt={class:"toolbar-right"},Ct={class:"search-box"},xt={class:"stats-cards"},St={class:"stat-card"},Dt={class:"stat-content"},Tt={class:"stat-card"},Ut={class:"stat-content"},Vt={class:"stat-card"},Mt={class:"stat-content"},Rt={class:"stat-card"},Nt={class:"stat-content"},At={class:"order-list"},It={class:"list-header"},Ot={class:"list-controls"},Pt={class:"total-count"},zt={key:0,class:"loading"},Et={key:1,class:"order-table"},Lt={class:"order-info"},qt={class:"order-basic"},Kt={class:"order-date"},Ft={class:"order-days"},jt={class:"customer-info"},Bt={class:"customer-basic"},Wt={class:"customer-phone"},Ht={class:"customer-id"},Gt={class:"room-info"},Jt={class:"room-basic"},Qt={class:"room-id"},Xt={class:"date-info"},Yt={class:"date-range"},Zt={class:"check-in"},sa={class:"check-out"},ta={class:"amount-info"},aa={class:"amount-details"},ea={class:"total-amount"},na={class:"actions"},la={class:"action-buttons"},oa=["onClick"],ia=["onClick"],da=["onClick"],ra=["onClick"],ca=["onClick"],ua={key:0,class:"empty-state"},va={key:2,class:"pagination"},fa=["disabled"],pa={class:"page-info"},ma=["disabled"],ba=Q({__name:"OrderManagementView",setup(Y){const u={success:(c,t)=>{console.log(`✅ ${t||"成功"}: ${c}`),alert(`✅ ${c}`)},error:(c,t)=>{console.error(`❌ ${t||"错误"}: ${c}`),alert(`❌ ${c}`)},warning:(c,t)=>{console.warn(`⚠️ ${t||"警告"}: ${c}`),alert(`⚠️ ${c}`)},info:(c,t)=>{console.info(`ℹ️ ${t||"信息"}: ${c}`),alert(`ℹ️ ${c}`)}},w=g(!1),m=g([]),$=g(""),h=g(""),x=g(""),T=g(!1),V=g(null),R=[{label:"全部",value:""},{label:"预订",value:"预订"},{label:"入住",value:"入住"},{label:"完成",value:"完成"},{label:"取消",value:"取消"}],y=L({current:1,size:10,total:0,pages:0}),r=L({total:0,pending:0,confirmed:0,completed:0}),n=async()=>{w.value=!0;try{const c=await D.get("/h/order",{params:{pageNum:y.current,pageSize:y.size,search:$.value,searchType:h.value}});c.code===200||c.code==="200"?(m.value=c.data?.records||[],y.total=c.data?.total||0,y.pages=c.data?.pages||0,k(),u.success("订单数据加载成功","数据加载")):u.error(c.message||c.msg||"获取订单列表失败","加载失败")}catch(c){console.error("获取订单列表失败:",c),u.error("网络错误，请稍后重试","加载失败")}finally{w.value=!1}},k=()=>{r.total=m.value.length,r.pending=m.value.filter(c=>c.state==="预订").length,r.confirmed=m.value.filter(c=>c.state==="入住").length,r.completed=m.value.filter(c=>c.state==="完成").length},_=c=>{x.value=c,$.value=c,h.value="state",y.current=1,n()},N=()=>{y.current=1,n()},O=()=>{n()},P=c=>{y.current=c,n()},z=c=>{V.value=c,T.value=!0},F=async c=>{try{const t={...c,state:"入住"},a=await D.put("/h/order",t);a.code===200||a.code==="200"?(u.success("订单确认成功","操作成功"),await n()):u.error(a.message||a.msg||"确认订单失败","操作失败")}catch(t){console.error("确认订单失败:",t),u.error("网络错误，请稍后重试","操作失败")}},q=async c=>{try{const t=await D.post("/h/order/pay",c.id);t.code===200||t.code==="200"?(u.success("订单支付成功","操作成功"),await n()):u.error(t.message||t.msg||"支付失败","操作失败")}catch(t){console.error("标记支付失败:",t),u.error("网络错误，请稍后重试","操作失败")}},j=async c=>{try{const t=await D.post("/h/order/checkout",c);t.code===200||t.code==="200"?(u.success("退房成功","操作成功"),await n()):u.error(t.message||t.msg||"退房失败","操作失败")}catch(t){console.error("退房失败:",t),u.error("网络错误，请稍后重试","操作失败")}},B=async c=>{if(confirm(`确定要删除订单 #${c.id} 吗？`))try{const t=await D.delete(`/h/order/del/${c.id}`);t.code===200||t.code==="200"?(u.success("订单删除成功","删除成功"),await n()):u.error(t.message||t.msg||"删除失败","操作失败")}catch(t){console.error("删除订单失败:",t),u.error("网络错误，请稍后重试","删除失败")}},I=()=>{T.value=!1,V.value=null},W=c=>{switch(c){case"预订":return"pending";case"入住":return"confirmed";case"完成":return"completed";case"取消":return"cancelled";default:return"unknown"}},E=c=>c?new Date(c).toLocaleDateString("zh-CN"):"-";return ts(()=>{n()}),(c,t)=>(p(),f("div",$t,[t[30]||(t[30]=s("div",{class:"page-header"},[s("h1",{class:"page-title"},[s("i",{class:"fas fa-clipboard-list"}),b(" 订单管理 ")]),s("p",{class:"page-description"},"管理普洱蘑菇庄园民宿的所有订单信息")],-1)),s("div",yt,[s("div",ht,[s("button",{onClick:O,class:"btn btn-secondary"},t[5]||(t[5]=[s("i",{class:"fas fa-sync-alt"},null,-1),b(" 刷新 ")])),s("div",kt,[(p(),f(G,null,J(R,a=>s("button",{key:a.value,onClick:v=>_(a.value),class:U(["tab-btn",{active:x.value===a.value}])},d(a.label),11,_t)),64))])]),s("div",wt,[s("div",Ct,[M(s("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),class:"search-type"},t[6]||(t[6]=[s("option",{value:""},"全部",-1),s("option",{value:"username"},"用户名",-1),s("option",{value:"phone"},"手机号",-1),s("option",{value:"roomCode"},"房间号",-1)]),512),[[ss,h.value]]),M(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>$.value=a),onKeyup:as(N,["enter"]),type:"text",placeholder:"搜索订单...",class:"search-input"},null,544),[[A,$.value]]),s("button",{onClick:N,class:"btn btn-search"},t[7]||(t[7]=[s("i",{class:"fas fa-search"},null,-1)]))])])]),s("div",xt,[s("div",St,[t[9]||(t[9]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-clipboard-list"})],-1)),s("div",Dt,[s("h3",null,d(r.total),1),t[8]||(t[8]=s("p",null,"总订单数",-1))])]),s("div",Tt,[t[11]||(t[11]=s("div",{class:"stat-icon pending"},[s("i",{class:"fas fa-clock"})],-1)),s("div",Ut,[s("h3",null,d(r.pending),1),t[10]||(t[10]=s("p",null,"待处理",-1))])]),s("div",Vt,[t[13]||(t[13]=s("div",{class:"stat-icon confirmed"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",Mt,[s("h3",null,d(r.confirmed),1),t[12]||(t[12]=s("p",null,"已确认",-1))])]),s("div",Rt,[t[15]||(t[15]=s("div",{class:"stat-icon completed"},[s("i",{class:"fas fa-star"})],-1)),s("div",Nt,[s("h3",null,d(r.completed),1),t[14]||(t[14]=s("p",null,"已完成",-1))])])]),s("div",At,[s("div",It,[t[16]||(t[16]=s("h2",null,"订单列表",-1)),s("div",Ot,[s("span",Pt,"共 "+d(y.total)+" 个订单",1)])]),w.value?(p(),f("div",zt,t[17]||(t[17]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1),b(" 加载中... ")]))):(p(),f("div",Et,[s("table",null,[t[23]||(t[23]=s("thead",null,[s("tr",null,[s("th",null,"订单信息"),s("th",null,"客户信息"),s("th",null,"房间信息"),s("th",null,"入住时间"),s("th",null,"订单金额"),s("th",null,"状态"),s("th",null,"操作")])],-1)),s("tbody",null,[(p(!0),f(G,null,J(m.value,a=>(p(),f("tr",{key:a.id,class:"order-row"},[s("td",Lt,[s("div",qt,[s("h4",null,"订单 #"+d(a.id),1),s("p",Kt,d(E(a.createTime)),1),s("p",Ft,d(a.days)+" 晚",1)])]),s("td",jt,[s("div",Bt,[s("h4",null,d(a.username),1),s("p",Wt,d(a.phone),1),s("p",Ht,d(a.idCard),1)])]),s("td",Gt,[s("div",Jt,[s("h4",null,"房间 "+d(a.roomCode),1),s("p",Qt,"ID: "+d(a.roomId),1)])]),s("td",Xt,[s("div",Yt,[s("p",Zt,"入住: "+d(a.startDate?E(a.startDate):"未设置"),1),s("p",sa,"离店: "+d(a.endDate?E(a.endDate):"未设置"),1)])]),s("td",ta,[s("div",aa,[s("h4",ea,"¥"+d(a.total),1),s("p",{class:U(["pay-status",a.payState===1?"paid":"unpaid"])},d(a.payState===1?"已支付":"未支付"),3)])]),s("td",null,[s("span",{class:U(["status-badge",W(a.state||"")])},d(a.state),3)]),s("td",na,[s("div",la,[s("button",{onClick:v=>z(a),class:"btn btn-sm btn-info action-btn",title:"查看订单详情","data-tooltip":"查看详情"},t[18]||(t[18]=[s("i",{class:"fas fa-eye"},null,-1),s("span",{class:"btn-text"},"查看",-1)]),8,oa),a.state==="预订"?(p(),f("button",{key:0,onClick:v=>F(a),class:"btn btn-sm btn-success action-btn",title:"确认订单，客户可入住","data-tooltip":"确认入住"},t[19]||(t[19]=[s("i",{class:"fas fa-check"},null,-1),s("span",{class:"btn-text"},"确认",-1)]),8,ia)):C("",!0),a.payState===0?(p(),f("button",{key:1,onClick:v=>q(a),class:"btn btn-sm btn-warning action-btn",title:"标记为已支付","data-tooltip":"标记支付"},t[20]||(t[20]=[s("i",{class:"fas fa-credit-card"},null,-1),s("span",{class:"btn-text"},"支付",-1)]),8,da)):C("",!0),a.state==="入住"?(p(),f("button",{key:2,onClick:v=>j(a),class:"btn btn-sm btn-primary action-btn",title:"办理退房手续","data-tooltip":"办理退房"},t[21]||(t[21]=[s("i",{class:"fas fa-sign-out-alt"},null,-1),s("span",{class:"btn-text"},"退房",-1)]),8,ra)):C("",!0),s("button",{onClick:v=>B(a),class:"btn btn-sm btn-danger action-btn",title:"删除订单（不可恢复）","data-tooltip":"删除订单"},t[22]||(t[22]=[s("i",{class:"fas fa-trash"},null,-1),s("span",{class:"btn-text"},"删除",-1)]),8,ca)])])]))),128))])]),m.value.length===0?(p(),f("div",ua,t[24]||(t[24]=[s("i",{class:"fas fa-clipboard-list"},null,-1),s("h3",null,"暂无订单数据",-1),s("p",null,"当前筛选条件下没有找到订单",-1)]))):C("",!0)])),m.value.length>0?(p(),f("div",va,[s("button",{onClick:t[2]||(t[2]=a=>P(y.current-1)),disabled:y.current<=1,class:"btn btn-secondary"},t[25]||(t[25]=[s("i",{class:"fas fa-chevron-left"},null,-1),b(" 上一页 ")]),8,fa),s("span",pa," 第 "+d(y.current)+" 页，共 "+d(y.pages)+" 页 ",1),s("button",{onClick:t[3]||(t[3]=a=>P(y.current+1)),disabled:y.current>=y.pages,class:"btn btn-secondary"},t[26]||(t[26]=[b(" 下一页 "),s("i",{class:"fas fa-chevron-right"},null,-1)]),8,ma)])):C("",!0)]),T.value?(p(),f("div",{key:0,class:"modal-overlay",onClick:I},[s("div",{class:"modal modal-large",onClick:t[4]||(t[4]=H(()=>{},["stop"]))},[s("div",{class:"modal-header"},[t[28]||(t[28]=s("h3",null,"订单详情",-1)),s("button",{onClick:I,class:"close-btn"},t[27]||(t[27]=[s("i",{class:"fas fa-times"},null,-1)]))]),t[29]||(t[29]=s("div",{class:"modal-body"},[s("p",null,"订单详情功能开发中...")],-1))])])):C("",!0)]))}}),ga=X(ba,[["__scopeId","data-v-e49a997d"]]),$a={class:"user-management"},ya={class:"toolbar"},ha={class:"toolbar-left"},ka={class:"filter-tabs"},_a=["onClick"],wa={class:"toolbar-right"},Ca={class:"search-box"},xa={class:"stats-cards"},Sa={class:"stat-card"},Da={class:"stat-content"},Ta={class:"stat-card"},Ua={class:"stat-content"},Va={class:"stat-card"},Ma={class:"stat-content"},Ra={class:"stat-card"},Na={class:"stat-content"},Aa={class:"user-list"},Ia={class:"list-header"},Oa={class:"list-controls"},Pa={class:"total-count"},za={key:0,class:"loading"},Ea={key:1,class:"user-table"},La={class:"user-info"},qa={class:"user-basic"},Ka={class:"avatar"},Fa=["src","alt"],ja={key:1,class:"fas fa-user"},Ba={class:"user-details"},Wa={class:"username"},Ha={class:"user-id"},Ga={class:"contact-info"},Ja={class:"contact-details"},Qa={class:"phone"},Xa={class:"email"},Ya={class:"identity-info"},Za={class:"identity-details"},se={class:"gender"},te={class:"id-card"},ae={class:"address"},ee={class:"date-info"},ne={class:"date-info"},le={class:"actions"},oe=["onClick"],ie=["onClick"],de=["onClick"],re=["onClick"],ce={key:0,class:"empty-state"},ue={key:2,class:"pagination"},ve=["disabled"],fe={class:"page-info"},pe=["disabled"],me=Q({__name:"UserManagementView",setup(Y){const u={success:(t,a)=>{console.log(`✅ ${a||"成功"}: ${t}`),alert(`✅ ${t}`)},error:(t,a)=>{console.error(`❌ ${a||"错误"}: ${t}`),alert(`❌ ${t}`)},warning:(t,a)=>{console.warn(`⚠️ ${a||"警告"}: ${t}`),alert(`⚠️ ${t}`)},info:(t,a)=>{console.info(`ℹ️ ${a||"信息"}: ${t}`),alert(`ℹ️ ${t}`)}},w=g(!1),m=g([]),$=g(""),h=g(""),x=g(""),T=g(!1),V=g(!1),R=g(null),y=[{label:"全部",value:""},{label:"正常",value:"0"},{label:"禁用",value:"1"}],r=L({current:1,size:10,total:0,pages:0}),n=L({total:0,active:0,inactive:0,newToday:0}),k=async()=>{w.value=!0;try{const t=await D.get("/sys/user",{params:{pageNum:r.current,pageSize:r.size,search:$.value,searchType:h.value}});t.code===200||t.code==="200"?(m.value=t.data?.records||[],r.total=t.data?.total||0,r.pages=t.data?.pages||0,_(),u.success("用户数据加载成功","数据加载")):u.error(t.message||t.msg||"获取用户列表失败","加载失败")}catch(t){console.error("获取用户列表失败:",t),u.error("网络错误，请稍后重试","加载失败")}finally{w.value=!1}},_=()=>{n.total=m.value.length,n.active=m.value.filter(a=>a.status===0).length,n.inactive=m.value.filter(a=>a.status===1).length;const t=new Date().toDateString();n.newToday=m.value.filter(a=>a.createTime?new Date(a.createTime).toDateString()===t:!1).length},N=t=>{x.value=t,$.value=t,h.value="status",r.current=1,k()},O=()=>{r.current=1,k()},P=()=>{k()},z=t=>{r.current=t,k()},F=t=>{R.value=t,T.value=!0},q=t=>{R.value=t,V.value=!0},j=async t=>{try{const a=t.status===0?1:0,v=await D.put("/sys/user/status",{id:t.id,status:a});v.code===200||v.code==="200"?(t.status=a,_(),u.success(a===0?"用户已启用":"用户已禁用","状态更新")):u.error(v.message||v.msg||"状态更新失败","操作失败")}catch(a){console.error("切换用户状态失败:",a),u.error("网络错误，请稍后重试","操作失败")}},B=async t=>{if(confirm(`确定要重置用户"${t.username}"的密码吗？`))try{const a=await D.post("/h/user/resetPassword",{phone:t.phone,username:t.username});a.code===200||a.code==="200"?u.success(`密码重置成功，新密码为：${a.data}`,"重置成功"):u.error(a.message||a.msg||"重置密码失败","操作失败")}catch(a){console.error("重置密码失败:",a),u.error("网络错误，请稍后重试","重置失败")}},I=()=>{T.value=!1,V.value=!1,R.value=null},W=t=>{switch(t){case 0:return"active";case 1:return"inactive";default:return"unknown"}},E=t=>{switch(t){case 0:return"正常";case 1:return"禁用";default:return"未知"}},c=t=>t?new Date(t).toLocaleDateString("zh-CN"):"-";return ts(()=>{k()}),(t,a)=>(p(),f("div",$a,[a[34]||(a[34]=s("div",{class:"page-header"},[s("h1",{class:"page-title"},[s("i",{class:"fas fa-users"}),b(" 用户管理 ")]),s("p",{class:"page-description"},"管理普洱蘑菇庄园民宿的所有用户信息")],-1)),s("div",ya,[s("div",ha,[s("button",{onClick:P,class:"btn btn-secondary"},a[6]||(a[6]=[s("i",{class:"fas fa-sync-alt"},null,-1),b(" 刷新 ")])),s("div",ka,[(p(),f(G,null,J(y,v=>s("button",{key:v.value,onClick:K=>N(v.value),class:U(["tab-btn",{active:x.value===v.value}])},d(v.label),11,_a)),64))])]),s("div",wa,[s("div",Ca,[M(s("select",{"onUpdate:modelValue":a[0]||(a[0]=v=>h.value=v),class:"search-type"},a[7]||(a[7]=[es('<option value="" data-v-93065f77>全部</option><option value="username" data-v-93065f77>用户名</option><option value="realName" data-v-93065f77>真实姓名</option><option value="phonenumber" data-v-93065f77>手机号</option><option value="email" data-v-93065f77>邮箱</option>',5)]),512),[[ss,h.value]]),M(s("input",{"onUpdate:modelValue":a[1]||(a[1]=v=>$.value=v),onKeyup:as(O,["enter"]),type:"text",placeholder:"搜索用户...",class:"search-input"},null,544),[[A,$.value]]),s("button",{onClick:O,class:"btn btn-search"},a[8]||(a[8]=[s("i",{class:"fas fa-search"},null,-1)]))])])]),s("div",xa,[s("div",Sa,[a[10]||(a[10]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-users"})],-1)),s("div",Da,[s("h3",null,d(n.total),1),a[9]||(a[9]=s("p",null,"总用户数",-1))])]),s("div",Ta,[a[12]||(a[12]=s("div",{class:"stat-icon active"},[s("i",{class:"fas fa-user-check"})],-1)),s("div",Ua,[s("h3",null,d(n.active),1),a[11]||(a[11]=s("p",null,"活跃用户",-1))])]),s("div",Va,[a[14]||(a[14]=s("div",{class:"stat-icon inactive"},[s("i",{class:"fas fa-user-times"})],-1)),s("div",Ma,[s("h3",null,d(n.inactive),1),a[13]||(a[13]=s("p",null,"禁用用户",-1))])]),s("div",Ra,[a[16]||(a[16]=s("div",{class:"stat-icon new"},[s("i",{class:"fas fa-user-plus"})],-1)),s("div",Na,[s("h3",null,d(n.newToday),1),a[15]||(a[15]=s("p",null,"今日新增",-1))])])]),s("div",Aa,[s("div",Ia,[a[17]||(a[17]=s("h2",null,"用户列表",-1)),s("div",Oa,[s("span",Pa,"共 "+d(r.total)+" 个用户",1)])]),w.value?(p(),f("div",za,a[18]||(a[18]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1),b(" 加载中... ")]))):(p(),f("div",Ea,[s("table",null,[a[24]||(a[24]=s("thead",null,[s("tr",null,[s("th",null,"用户信息"),s("th",null,"联系方式"),s("th",null,"身份信息"),s("th",null,"注册时间"),s("th",null,"最后登录"),s("th",null,"状态"),s("th",null,"操作")])],-1)),s("tbody",null,[(p(!0),f(G,null,J(m.value,v=>(p(),f("tr",{key:v.id,class:"user-row"},[s("td",La,[s("div",qa,[s("div",Ka,[v.avatar?(p(),f("img",{key:0,src:v.avatar,alt:v.realName},null,8,Fa)):(p(),f("i",ja))]),s("div",Ba,[s("h4",null,d(v.realName||v.username),1),s("p",Wa,"@"+d(v.username),1),s("p",Ha,"ID: "+d(v.id),1)])])]),s("td",Ga,[s("div",Ja,[s("p",Qa,[a[19]||(a[19]=s("i",{class:"fas fa-phone"},null,-1)),b(" "+d(v.phonenumber||"-"),1)]),s("p",Xa,[a[20]||(a[20]=s("i",{class:"fas fa-envelope"},null,-1)),b(" "+d(v.email||"-"),1)])])]),s("td",Ya,[s("div",Za,[s("p",se,[s("i",{class:U(v.gender==="男"?"fas fa-mars":"fas fa-venus")},null,2),b(" "+d(v.gender||"-"),1)]),s("p",te,d(v.idCard||"-"),1),s("p",ae,d(v.address||"-"),1)])]),s("td",ee,d(c(v.createTime)),1),s("td",ne,d(c(v.loginDate)),1),s("td",null,[s("span",{class:U(["status-badge",W(v.status)])},d(E(v.status)),3)]),s("td",le,[s("button",{onClick:K=>F(v),class:"btn btn-sm btn-info"},a[21]||(a[21]=[s("i",{class:"fas fa-eye"},null,-1)]),8,oe),s("button",{onClick:K=>q(v),class:"btn btn-sm btn-warning"},a[22]||(a[22]=[s("i",{class:"fas fa-edit"},null,-1)]),8,ie),s("button",{onClick:K=>j(v),class:U(["btn btn-sm",v.status===0?"btn-danger":"btn-success"])},[s("i",{class:U(v.status===0?"fas fa-ban":"fas fa-check")},null,2)],10,de),s("button",{onClick:K=>B(v),class:"btn btn-sm btn-secondary"},a[23]||(a[23]=[s("i",{class:"fas fa-key"},null,-1)]),8,re)])]))),128))])]),m.value.length===0?(p(),f("div",ce,a[25]||(a[25]=[s("i",{class:"fas fa-users"},null,-1),s("h3",null,"暂无用户数据",-1),s("p",null,"当前筛选条件下没有找到用户",-1)]))):C("",!0)])),m.value.length>0?(p(),f("div",ue,[s("button",{onClick:a[2]||(a[2]=v=>z(r.current-1)),disabled:r.current<=1,class:"btn btn-secondary"},a[26]||(a[26]=[s("i",{class:"fas fa-chevron-left"},null,-1),b(" 上一页 ")]),8,ve),s("span",fe," 第 "+d(r.current)+" 页，共 "+d(r.pages)+" 页 ",1),s("button",{onClick:a[3]||(a[3]=v=>z(r.current+1)),disabled:r.current>=r.pages,class:"btn btn-secondary"},a[27]||(a[27]=[b(" 下一页 "),s("i",{class:"fas fa-chevron-right"},null,-1)]),8,pe)])):C("",!0)]),T.value?(p(),f("div",{key:0,class:"modal-overlay",onClick:I},[s("div",{class:"modal modal-large",onClick:a[4]||(a[4]=H(()=>{},["stop"]))},[s("div",{class:"modal-header"},[a[29]||(a[29]=s("h3",null,"用户详情",-1)),s("button",{onClick:I,class:"close-btn"},a[28]||(a[28]=[s("i",{class:"fas fa-times"},null,-1)]))]),a[30]||(a[30]=s("div",{class:"modal-body"},[s("p",null,"用户详情功能开发中...")],-1))])])):C("",!0),V.value?(p(),f("div",{key:1,class:"modal-overlay",onClick:I},[s("div",{class:"modal",onClick:a[5]||(a[5]=H(()=>{},["stop"]))},[s("div",{class:"modal-header"},[a[32]||(a[32]=s("h3",null,"编辑用户",-1)),s("button",{onClick:I,class:"close-btn"},a[31]||(a[31]=[s("i",{class:"fas fa-times"},null,-1)]))]),a[33]||(a[33]=s("div",{class:"modal-body"},[s("p",null,"用户编辑功能开发中...")],-1))])])):C("",!0)]))}}),be=X(me,[["__scopeId","data-v-93065f77"]]),ge={class:"admin-test admin-gradient-bg"},$e={class:"test-section admin-card"},ye={class:"admin-card-body"},he={key:0,class:"loading-placeholder"},ke={class:"test-section admin-card"},_e={class:"admin-card-body"},we={key:0,class:"confirm-placeholder"},Ce=["disabled"],xe={class:"test-section admin-card"},Se={class:"admin-card-body"},De={key:0,class:"empty-placeholder"},Te={class:"test-section admin-card"},Ue={class:"admin-card-body"},Ve={key:0,class:"api-results"},Me={class:"api-name"},Re={class:"api-message"},Ne=Q({__name:"AdminTestView",setup(Y){const u={success:(l,i)=>{console.log(`✅ ${i||"成功"}: ${l}`),alert(`✅ ${l}`)},error:(l,i)=>{console.error(`❌ ${i||"错误"}: ${l}`),alert(`❌ ${l}`)},warning:(l,i)=>{console.warn(`⚠️ ${i||"警告"}: ${l}`),alert(`⚠️ ${l}`)},info:(l,i)=>{console.info(`ℹ️ ${i||"信息"}: ${l}`),alert(`ℹ️ ${l}`)}},w=g(!1),m=g("加载中"),$=g("请稍候..."),h=g(!1),x=g("info"),T=g(""),V=g(""),R=g(!1),y=g(!1),r=g("default"),n=g(""),k=g(""),_=g([]),N=()=>{u.success("这是一个成功通知","操作成功")},O=()=>{u.error("这是一个错误通知","操作失败")},P=()=>{u.warning("这是一个警告通知","注意事项")},z=()=>{u.info("这是一个信息通知","系统提示")},F=()=>{w.value=!0,m.value="加载中",$.value="正在处理您的请求...",setTimeout(()=>{w.value=!1,u.success("加载完成","测试成功")},3e3)},q=()=>{w.value=!0,m.value="获取数据",$.value="正在从服务器获取最新数据...",setTimeout(()=>{w.value=!1,u.success("数据获取成功","测试完成")},2e3)},j=()=>{h.value=!0,x.value="info",T.value="信息确认",V.value="您确定要执行此操作吗？"},B=()=>{h.value=!0,x.value="warning",T.value="警告确认",V.value="此操作可能会影响系统性能，确定继续吗？"},I=()=>{h.value=!0,x.value="danger",T.value="危险操作",V.value="此操作不可撤销，确定要删除所有数据吗？"},W=()=>{R.value=!0,setTimeout(()=>{R.value=!1,h.value=!1,u.success("操作确认成功","测试完成")},1500)},E=()=>{h.value=!1,R.value=!1,u.info("操作已取消","测试取消")},c=()=>{y.value=!0,r.value="default",n.value="暂无数据",k.value="当前没有可显示的内容，请稍后再试"},t=()=>{y.value=!0,r.value="search",n.value="未找到结果",k.value="没有找到符合条件的数据，请尝试其他搜索条件"},a=()=>{y.value=!0,r.value="error",n.value="加载失败",k.value="数据加载时发生错误，请检查网络连接"},v=()=>{y.value=!1,u.success("重新加载成功","测试完成")},K=async()=>{try{const l=await D.get("/h/room",{params:{pageNum:1,pageSize:1}});_.value.unshift({id:Date.now(),name:"房间API",success:l.code===200,message:l.code===200?"连接成功":`错误: ${l.message||l.msg||"未知错误"}`})}catch(l){_.value.unshift({id:Date.now(),name:"房间API",success:!1,message:`连接失败: ${l}`})}},o=async()=>{try{const l=await D.get("/h/order",{params:{pageNum:1,pageSize:1}});_.value.unshift({id:Date.now(),name:"订单API",success:l.code===200,message:l.code===200?"连接成功":`错误: ${l.message||l.msg||"未知错误"}`})}catch(l){_.value.unshift({id:Date.now(),name:"订单API",success:!1,message:`连接失败: ${l}`})}},e=async()=>{try{const l=await D.get("/h/user",{params:{pageNum:1,pageSize:1}});_.value.unshift({id:Date.now(),name:"用户API",success:l.code===200,message:l.code===200?"连接成功":`错误: ${l.message||l.msg||"未知错误"}`})}catch(l){_.value.unshift({id:Date.now(),name:"用户API",success:!1,message:`连接失败: ${l}`})}};return(l,i)=>(p(),f("div",ge,[i[22]||(i[22]=s("div",{class:"page-header"},[s("h1",{class:"page-title"},[s("i",{class:"fas fa-flask"}),b(" 功能测试 ")]),s("p",{class:"page-description"},"测试普洱蘑菇庄园管理后台的各项功能")],-1)),s("div",{class:"test-section admin-card"},[i[4]||(i[4]=s("div",{class:"admin-card-header"},[s("h3",null,"通知系统测试")],-1)),s("div",{class:"admin-card-body"},[s("div",{class:"button-grid"},[s("button",{onClick:N,class:"admin-btn admin-btn-success"},i[0]||(i[0]=[s("i",{class:"fas fa-check"},null,-1),b(" 成功通知 ")])),s("button",{onClick:O,class:"admin-btn admin-btn-danger"},i[1]||(i[1]=[s("i",{class:"fas fa-times"},null,-1),b(" 错误通知 ")])),s("button",{onClick:P,class:"admin-btn admin-btn-warning"},i[2]||(i[2]=[s("i",{class:"fas fa-exclamation-triangle"},null,-1),b(" 警告通知 ")])),s("button",{onClick:z,class:"admin-btn admin-btn-primary"},i[3]||(i[3]=[s("i",{class:"fas fa-info-circle"},null,-1),b(" 信息通知 ")]))])])]),s("div",$e,[i[7]||(i[7]=s("div",{class:"admin-card-header"},[s("h3",null,"加载状态测试")],-1)),s("div",ye,[s("div",{class:"button-grid"},[s("button",{onClick:F,class:"admin-btn admin-btn-secondary"},i[5]||(i[5]=[s("i",{class:"fas fa-spinner"},null,-1),b(" 显示加载 ")])),s("button",{onClick:q,class:"admin-btn admin-btn-secondary"},i[6]||(i[6]=[s("i",{class:"fas fa-database"},null,-1),b(" 模拟数据加载 ")]))]),w.value?(p(),f("div",he,[s("h3",null,d(m.value),1),s("p",null,d($.value),1)])):C("",!0)])]),s("div",ke,[i[11]||(i[11]=s("div",{class:"admin-card-header"},[s("h3",null,"确认对话框测试")],-1)),s("div",_e,[s("div",{class:"button-grid"},[s("button",{onClick:j,class:"admin-btn admin-btn-primary"},i[8]||(i[8]=[s("i",{class:"fas fa-question-circle"},null,-1),b(" 信息确认 ")])),s("button",{onClick:B,class:"admin-btn admin-btn-warning"},i[9]||(i[9]=[s("i",{class:"fas fa-exclamation-triangle"},null,-1),b(" 警告确认 ")])),s("button",{onClick:I,class:"admin-btn admin-btn-danger"},i[10]||(i[10]=[s("i",{class:"fas fa-trash"},null,-1),b(" 危险确认 ")]))]),h.value?(p(),f("div",we,[s("h3",null,d(T.value),1),s("p",null,d(V.value),1),s("button",{onClick:W,disabled:R.value},"确认",8,Ce),s("button",{onClick:E},"取消")])):C("",!0)])]),s("div",xe,[i[16]||(i[16]=s("div",{class:"admin-card-header"},[s("h3",null,"空状态组件测试")],-1)),s("div",Se,[s("div",{class:"button-grid"},[s("button",{onClick:c,class:"admin-btn admin-btn-secondary"},i[12]||(i[12]=[s("i",{class:"fas fa-inbox"},null,-1),b(" 默认空状态 ")])),s("button",{onClick:t,class:"admin-btn admin-btn-secondary"},i[13]||(i[13]=[s("i",{class:"fas fa-search"},null,-1),b(" 搜索空状态 ")])),s("button",{onClick:a,class:"admin-btn admin-btn-secondary"},i[14]||(i[14]=[s("i",{class:"fas fa-exclamation-triangle"},null,-1),b(" 错误空状态 ")]))]),y.value?(p(),f("div",De,[s("h3",null,d(n.value),1),s("p",null,d(k.value),1),s("button",{onClick:v,class:"admin-btn admin-btn-primary"},i[15]||(i[15]=[s("i",{class:"fas fa-redo"},null,-1),b(" 重新加载 ")]))])):C("",!0)])]),s("div",Te,[i[21]||(i[21]=s("div",{class:"admin-card-header"},[s("h3",null,"API连接测试")],-1)),s("div",Ue,[s("div",{class:"button-grid"},[s("button",{onClick:K,class:"admin-btn admin-btn-primary"},i[17]||(i[17]=[s("i",{class:"fas fa-bed"},null,-1),b(" 测试房间API ")])),s("button",{onClick:o,class:"admin-btn admin-btn-primary"},i[18]||(i[18]=[s("i",{class:"fas fa-clipboard-list"},null,-1),b(" 测试订单API ")])),s("button",{onClick:e,class:"admin-btn admin-btn-primary"},i[19]||(i[19]=[s("i",{class:"fas fa-users"},null,-1),b(" 测试用户API ")]))]),_.value.length>0?(p(),f("div",Ve,[i[20]||(i[20]=s("h4",null,"测试结果：",-1)),(p(!0),f(G,null,J(_.value,S=>(p(),f("div",{key:S.id,class:"api-result"},[s("span",{class:U(["status",S.success?"success":"error"])},[s("i",{class:U(S.success?"fas fa-check":"fas fa-times")},null,2)],2),s("span",Me,d(S.name),1),s("span",Re,d(S.message),1)]))),128))])):C("",!0)])]),i[23]||(i[23]=es('<div class="test-section admin-card" data-v-f2360d90><div class="admin-card-header" data-v-f2360d90><h3 data-v-f2360d90>主题样式展示</h3></div><div class="admin-card-body" data-v-f2360d90><div class="theme-showcase" data-v-f2360d90><div class="color-palette" data-v-f2360d90><div class="color-item" data-v-f2360d90><div class="color-box primary" data-v-f2360d90></div><span data-v-f2360d90>主色调</span></div><div class="color-item" data-v-f2360d90><div class="color-box secondary" data-v-f2360d90></div><span data-v-f2360d90>辅助色</span></div><div class="color-item" data-v-f2360d90><div class="color-box success" data-v-f2360d90></div><span data-v-f2360d90>成功色</span></div><div class="color-item" data-v-f2360d90><div class="color-box warning" data-v-f2360d90></div><span data-v-f2360d90>警告色</span></div><div class="color-item" data-v-f2360d90><div class="color-box danger" data-v-f2360d90></div><span data-v-f2360d90>危险色</span></div></div><div class="badge-showcase" data-v-f2360d90><span class="admin-badge admin-badge-primary" data-v-f2360d90>主要</span><span class="admin-badge admin-badge-success" data-v-f2360d90>成功</span><span class="admin-badge admin-badge-warning" data-v-f2360d90>警告</span><span class="admin-badge admin-badge-danger" data-v-f2360d90>危险</span></div></div></div></div>',1))]))}}),Ae=X(Ne,[["__scopeId","data-v-f2360d90"]]),Ie={class:"admin-dashboard"},Oe={class:"admin-navbar"},Pe={class:"navbar-content"},ze={class:"navbar-right"},Ee={class:"admin-info"},Le={class:"admin-content"},qe={class:"admin-sidebar"},Ke={class:"sidebar-menu"},Fe={class:"admin-main"},je={key:0,class:"dashboard-content"},Be={class:"stats-grid"},We={class:"stat-card"},He={class:"stat-info"},Ge={class:"stat-number"},Je={class:"stat-card"},Qe={class:"stat-info"},Xe={class:"stat-number"},Ye={class:"stat-card"},Ze={class:"stat-info"},sn={class:"stat-number"},tn={class:"stat-card"},an={class:"stat-info"},en={class:"stat-number"},nn={key:1,class:"rooms-content"},ln={key:2,class:"orders-content"},on={key:3,class:"users-content"},dn={key:4,class:"test-content"},rn=Q({__name:"AdminDashboardView",setup(Y){const u=ls(),w=os(),m=g("dashboard"),$=L({totalRooms:0,totalOrders:0,totalUsers:0,monthlyRevenue:0}),h=r=>{m.value=r},x=async()=>{try{const r=await D.get("/h/room",{params:{pageNum:1,pageSize:1}});r.code===200&&($.totalRooms=r.data?.total||0);const n=await D.get("/h/order",{params:{pageNum:1,pageSize:1}});n.code===200&&($.totalOrders=n.data?.total||0);const k=await D.get("/h/user",{params:{pageNum:1,pageSize:1}});k.code===200&&($.totalUsers=k.data?.total||0),$.monthlyRevenue=$.totalOrders*450}catch(r){console.error("获取统计数据失败:",r),$.totalRooms=12,$.totalOrders=156,$.totalUsers=89,$.monthlyRevenue=45680}},T=()=>{confirm("确定要退出管理后台吗？")&&(w.logout(),u.push("/admin/login"))},V=()=>{h("rooms")},R=()=>{h("orders")},y=()=>{h("users")};return ts(()=>{x()}),(r,n)=>(p(),f("div",Ie,[s("nav",Oe,[s("div",Pe,[n[7]||(n[7]=s("div",{class:"navbar-left"},[s("div",{class:"logo"},[s("i",{class:"fas fa-seedling"}),b(" 普洱蘑菇庄园民宿 - 管理后台 ")])],-1)),s("div",ze,[s("div",Ee,[n[5]||(n[5]=s("i",{class:"fas fa-user-shield"},null,-1)),s("span",null,d(is(w).user?.realName||"管理员"),1)]),s("button",{onClick:T,class:"logout-btn"},n[6]||(n[6]=[s("i",{class:"fas fa-right-from-bracket"},null,-1),b(" 退出登录 ")]))])])]),s("div",Le,[s("aside",qe,[s("div",Ke,[s("div",{class:U(["menu-item",{active:m.value==="dashboard"}]),onClick:n[0]||(n[0]=k=>h("dashboard"))},n[8]||(n[8]=[s("i",{class:"fas fa-tachometer-alt"},null,-1),s("span",null,"仪表板",-1)]),2),s("div",{class:U(["menu-item",{active:m.value==="rooms"}]),onClick:n[1]||(n[1]=k=>h("rooms"))},n[9]||(n[9]=[s("i",{class:"fas fa-bed"},null,-1),s("span",null,"房间管理",-1)]),2),s("div",{class:U(["menu-item",{active:m.value==="orders"}]),onClick:n[2]||(n[2]=k=>h("orders"))},n[10]||(n[10]=[s("i",{class:"fas fa-clipboard-list"},null,-1),s("span",null,"订单管理",-1)]),2),s("div",{class:U(["menu-item",{active:m.value==="users"}]),onClick:n[3]||(n[3]=k=>h("users"))},n[11]||(n[11]=[s("i",{class:"fas fa-users"},null,-1),s("span",null,"用户管理",-1)]),2),s("div",{class:U(["menu-item",{active:m.value==="test"}]),onClick:n[4]||(n[4]=k=>h("test"))},n[12]||(n[12]=[s("i",{class:"fas fa-flask"},null,-1),s("span",null,"功能测试",-1)]),2)])]),s("main",Fe,[m.value==="dashboard"?(p(),f("div",je,[n[25]||(n[25]=s("h1",{class:"page-title"},"管理仪表板",-1)),s("div",Be,[s("div",We,[n[14]||(n[14]=s("div",{class:"stat-icon rooms"},[s("i",{class:"fas fa-bed"})],-1)),s("div",He,[n[13]||(n[13]=s("h3",null,"总房间数",-1)),s("p",Ge,d($.totalRooms),1)])]),s("div",Je,[n[16]||(n[16]=s("div",{class:"stat-icon orders"},[s("i",{class:"fas fa-clipboard-list"})],-1)),s("div",Qe,[n[15]||(n[15]=s("h3",null,"总订单数",-1)),s("p",Xe,d($.totalOrders),1)])]),s("div",Ye,[n[18]||(n[18]=s("div",{class:"stat-icon users"},[s("i",{class:"fas fa-users"})],-1)),s("div",Ze,[n[17]||(n[17]=s("h3",null,"注册用户",-1)),s("p",sn,d($.totalUsers),1)])]),s("div",tn,[n[20]||(n[20]=s("div",{class:"stat-icon revenue"},[s("i",{class:"fas fa-dollar-sign"})],-1)),s("div",an,[n[19]||(n[19]=s("h3",null,"本月收入",-1)),s("p",en,"¥"+d($.monthlyRevenue),1)])])]),s("div",{class:"quick-actions"},[n[24]||(n[24]=s("h2",null,"快速操作",-1)),s("div",{class:"action-grid"},[s("button",{class:"action-btn",onClick:V},n[21]||(n[21]=[s("i",{class:"fas fa-plus"},null,-1),s("span",null,"添加房间",-1)])),s("button",{class:"action-btn",onClick:R},n[22]||(n[22]=[s("i",{class:"fas fa-eye"},null,-1),s("span",null,"查看订单",-1)])),s("button",{class:"action-btn",onClick:y},n[23]||(n[23]=[s("i",{class:"fas fa-user-plus"},null,-1),s("span",null,"管理用户",-1)]))])])])):m.value==="rooms"?(p(),f("div",nn,[Z(gt)])):m.value==="orders"?(p(),f("div",ln,[Z(ga)])):m.value==="users"?(p(),f("div",on,[Z(be)])):m.value==="test"?(p(),f("div",dn,[Z(Ae)])):C("",!0)])])]))}}),vn=X(rn,[["__scopeId","data-v-b02f4c93"]]);export{vn as default};
