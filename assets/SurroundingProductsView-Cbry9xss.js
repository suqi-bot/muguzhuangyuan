import{d as Y,a as J,u as K,b,o as R,_ as W,f as l,g as r,i as s,l as u,t as c,p as y,F as m,k as h,w as k,m as j,v as T,s as q,c as V,I as gs,h as p,A as ps,j as N,K as vs,M as v,J as ms}from"./index-DFO3eZqt.js";import{useCartStore as G}from"./cart-DfVsmXqk.js";const hs=Y({name:"ShoppingCart",setup(){const o=G(),t=J(),w=K(),C=b(!1),f=b(!1),P=b(!1),a=b({shippingAddress:"",contactPhone:"",remarks:""}),_=()=>{if(!t.isAuthenticated){w.push("/login");return}C.value=!C.value},$=(g,D)=>{o.updateQuantity(g,D)},I=g=>{o.removeFromCart(g)},A=()=>{confirm("确定要清空购物车吗？")&&o.clearCart()},S=async()=>{if(!a.value.shippingAddress.trim()){alert("请填写收货地址");return}if(!a.value.contactPhone.trim()){alert("请填写联系电话");return}P.value=!0;try{const g=await o.createOrder({shippingAddress:a.value.shippingAddress,contactPhone:a.value.contactPhone,remarks:a.value.remarks});alert(`订单提交成功！
订单号：${g.id}`),a.value={shippingAddress:"",contactPhone:"",remarks:""},f.value=!1,C.value=!1,w.push("/orders")}catch(g){alert("订单提交失败："+g.message)}finally{P.value=!1}};return R(()=>{t.isAuthenticated&&o.initializeUserData()}),{cartStore:o,authStore:t,showCart:C,showCheckout:f,isSubmitting:P,orderForm:a,toggleCart:_,updateQuantity:$,removeItem:I,clearCart:A,submitOrder:S}}}),bs={class:"shopping-cart"},fs={key:0,class:"cart-badge"},_s={class:"cart-header"},ys={class:"cart-content"},ks={key:0,class:"empty-cart"},Cs={key:1,class:"cart-items"},Ps={class:"item-image"},ws=["src","alt"],$s={class:"item-info"},Is={class:"item-desc"},Ss={class:"item-price"},js={class:"current-price"},As={key:0,class:"original-price"},qs={class:"quantity-controls"},Ds=["onClick"],Ls={class:"quantity"},Fs=["onClick"],zs={class:"item-actions"},Es=["onClick"],Ms={key:0,class:"cart-footer"},Ts={class:"cart-summary"},Vs={class:"summary-row"},Ns={key:0,class:"summary-row discount"},Us={class:"summary-row total"},Bs={class:"cart-actions"},Os={class:"checkout-header"},Qs={class:"checkout-body"},Xs={class:"order-items"},Hs=["src","alt"],Ys={class:"item-details"},Js={class:"item-details-row"},Ks={class:"item-name"},Rs={class:"item-price"},Ws={class:"item-details-row"},Gs={class:"item-quantity"},Zs={class:"item-unit-price"},xs={class:"shipping-info"},se={class:"form-group"},ee={class:"form-group"},te={class:"form-group"},ae={class:"order-summary"},ie={class:"summary-row"},oe={key:0,class:"summary-row discount"},ne={class:"summary-row total"},le={class:"checkout-footer"},re=["disabled"],ce={key:0,class:"fas fa-spinner fa-spin"};function de(o,t,w,C,f,P){return r(),l("div",bs,[s("button",{onClick:t[0]||(t[0]=(...a)=>o.toggleCart&&o.toggleCart(...a)),class:y(["cart-button",{active:o.showCart}])},[t[15]||(t[15]=s("i",{class:"fas fa-shopping-cart"},null,-1)),o.cartStore.totalItems>0?(r(),l("span",fs,c(o.cartStore.totalItems),1)):u("",!0)],2),o.showCart?(r(),l("div",{key:0,class:"cart-overlay",onClick:t[6]||(t[6]=(...a)=>o.toggleCart&&o.toggleCart(...a))},[s("div",{class:"cart-sidebar",onClick:t[5]||(t[5]=k(()=>{},["stop"]))},[s("div",_s,[t[17]||(t[17]=s("h3",null,"购物车",-1)),s("button",{onClick:t[1]||(t[1]=(...a)=>o.toggleCart&&o.toggleCart(...a)),class:"close-btn"},t[16]||(t[16]=[s("i",{class:"fas fa-times"},null,-1)]))]),s("div",ys,[o.cartStore.items.length===0?(r(),l("div",ks,[t[18]||(t[18]=s("i",{class:"fas fa-shopping-cart"},null,-1)),t[19]||(t[19]=s("p",null,"购物车是空的",-1)),s("button",{onClick:t[2]||(t[2]=(...a)=>o.toggleCart&&o.toggleCart(...a)),class:"btn-primary"},"继续购物")])):(r(),l("div",Cs,[(r(!0),l(m,null,h(o.cartStore.items,a=>(r(),l("div",{key:a.id,class:"cart-item"},[s("div",Ps,[s("img",{src:a.image,alt:a.name},null,8,ws)]),s("div",$s,[s("h4",null,c(a.name),1),s("p",Is,c(a.description),1),s("div",Ss,[s("span",js,"¥"+c(a.price),1),a.originalPrice?(r(),l("span",As,"¥"+c(a.originalPrice),1)):u("",!0)]),s("div",qs,[s("button",{onClick:_=>o.updateQuantity(a.id,a.quantity-1),class:"qty-btn"},t[20]||(t[20]=[s("i",{class:"fas fa-minus"},null,-1)]),8,Ds),s("span",Ls,c(a.quantity),1),s("button",{onClick:_=>o.updateQuantity(a.id,a.quantity+1),class:"qty-btn"},t[21]||(t[21]=[s("i",{class:"fas fa-plus"},null,-1)]),8,Fs)])]),s("div",zs,[s("button",{onClick:_=>o.removeItem(a.id),class:"remove-btn"},t[22]||(t[22]=[s("i",{class:"fas fa-trash"},null,-1)]),8,Es)])]))),128))]))]),o.cartStore.items.length>0?(r(),l("div",Ms,[s("div",Ts,[s("div",Vs,[t[23]||(t[23]=s("span",null,"商品总数：",-1)),s("span",null,c(o.cartStore.totalItems)+"件",1)]),o.cartStore.savedAmount>0?(r(),l("div",Ns,[t[24]||(t[24]=s("span",null,"优惠金额：",-1)),s("span",null,"-¥"+c(o.cartStore.savedAmount.toFixed(2)),1)])):u("",!0),s("div",Us,[t[25]||(t[25]=s("span",null,"总计：",-1)),s("span",null,"¥"+c(o.cartStore.totalAmount.toFixed(2)),1)])]),s("div",Bs,[s("button",{onClick:t[3]||(t[3]=(...a)=>o.clearCart&&o.clearCart(...a)),class:"btn-secondary"},"清空购物车"),s("button",{onClick:t[4]||(t[4]=a=>o.showCheckout=!0),class:"btn-primary"},"去结算")])])):u("",!0)])])):u("",!0),o.showCheckout?(r(),l("div",{key:1,class:"checkout-modal",onClick:t[14]||(t[14]=a=>o.showCheckout=!1)},[s("div",{class:"checkout-content",onClick:t[13]||(t[13]=k(()=>{},["stop"]))},[s("div",Os,[t[27]||(t[27]=s("h3",null,"确认订单",-1)),s("button",{onClick:t[7]||(t[7]=a=>o.showCheckout=!1),class:"close-btn"},t[26]||(t[26]=[s("i",{class:"fas fa-times"},null,-1)]))]),s("div",Qs,[s("div",Xs,[t[28]||(t[28]=s("h4",null,"商品清单",-1)),(r(!0),l(m,null,h(o.cartStore.items,a=>(r(),l("div",{key:a.id,class:"order-item"},[s("img",{src:a.image,alt:a.name},null,8,Hs),s("div",Ys,[s("div",Js,[s("span",Ks,c(a.name),1),s("span",Rs,"¥"+c((a.price*a.quantity).toFixed(2)),1)]),s("div",Ws,[s("span",Gs,"数量: "+c(a.quantity),1),s("span",Zs,"单价: ¥"+c(a.price),1)])])]))),128))]),s("div",xs,[t[32]||(t[32]=s("h4",null,"配送信息",-1)),s("div",se,[t[29]||(t[29]=s("label",null,"收货地址：",-1)),j(s("textarea",{"onUpdate:modelValue":t[8]||(t[8]=a=>o.orderForm.shippingAddress=a),placeholder:"请输入详细的收货地址",required:""},null,512),[[T,o.orderForm.shippingAddress]])]),s("div",ee,[t[30]||(t[30]=s("label",null,"联系电话：",-1)),j(s("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>o.orderForm.contactPhone=a),type:"tel",placeholder:"请输入联系电话",required:""},null,512),[[T,o.orderForm.contactPhone]])]),s("div",te,[t[31]||(t[31]=s("label",null,"备注信息：",-1)),j(s("textarea",{"onUpdate:modelValue":t[10]||(t[10]=a=>o.orderForm.remarks=a),placeholder:"如有特殊要求请在此说明（选填）"},null,512),[[T,o.orderForm.remarks]])])]),s("div",ae,[s("div",ie,[t[33]||(t[33]=s("span",null,"商品总数：",-1)),s("span",null,c(o.cartStore.totalItems)+"件",1)]),o.cartStore.savedAmount>0?(r(),l("div",oe,[t[34]||(t[34]=s("span",null,"优惠金额：",-1)),s("span",null,"-¥"+c(o.cartStore.savedAmount.toFixed(2)),1)])):u("",!0),t[36]||(t[36]=s("div",{class:"summary-row"},[s("span",null,"配送费："),s("span",null,"免费")],-1)),s("div",ne,[t[35]||(t[35]=s("span",null,"应付总额：",-1)),s("span",null,"¥"+c(o.cartStore.totalAmount.toFixed(2)),1)])])]),s("div",le,[s("button",{onClick:t[11]||(t[11]=a=>o.showCheckout=!1),class:"btn-secondary"},"返回购物车"),s("button",{onClick:t[12]||(t[12]=(...a)=>o.submitOrder&&o.submitOrder(...a)),class:"btn-primary",disabled:o.isSubmitting},[o.isSubmitting?(r(),l("i",ce)):u("",!0),q(" "+c(o.isSubmitting?"提交中...":"确认下单"),1)],8,re)])])])):u("",!0)])}const ue=W(hs,[["render",de],["__scopeId","data-v-d72ba0b4"]]),ge={class:"page-container fade-in"},pe={class:"main-content"},ve={class:"category-section"},me={class:"container"},he={class:"category-grid"},be=["onClick"],fe={class:"category-icon"},_e={class:"category-content"},ye={class:"category-name"},ke={class:"category-desc"},Ce={class:"category-count"},Pe={class:"featured-section"},we={class:"container"},$e={class:"featured-showcase"},Ie=["onClick"],Se={class:"product-image-container"},je={class:"product-image"},Ae=["src","alt"],qe={class:"image-overlay"},De={class:"overlay-content"},Le={class:"quick-view-btn"},Fe={class:"product-rating"},ze={class:"stars"},Ee={class:"rating-text"},Me={class:"product-content"},Te={class:"product-category"},Ve={class:"product-title"},Ne={class:"product-desc"},Ue={key:0,class:"product-specs"},Be={class:"product-footer"},Oe={class:"product-price"},Qe={class:"current-price"},Xe={key:0,class:"original-price"},He={key:1,class:"discount"},Ye={class:"product-actions"},Je=["onClick"],Ke=["onClick"],Re={class:"products-section"},We={class:"container"},Ge={class:"section-header"},Ze={class:"products-filter"},xe={class:"filter-tabs"},st=["onClick"],et={class:"count"},tt={class:"filter-sort"},at={class:"products-grid"},it=["onClick"],ot={class:"product-image-wrapper"},nt={class:"product-image"},lt=["src","alt"],rt={class:"image-overlay"},ct={class:"overlay-actions"},dt=["onClick"],ut=["onClick"],gt=["onClick"],pt={key:0,class:"product-badges"},vt={key:0,class:"badge badge-new"},mt={key:1,class:"badge badge-hot"},ht={class:"product-rating-overlay"},bt={class:"stars"},ft={class:"rating-score"},_t={class:"product-content"},yt={class:"product-category"},kt={class:"product-name"},Ct={class:"product-description"},Pt={key:0,class:"product-tags"},wt={class:"product-footer"},$t={class:"price-section"},It={class:"price-main"},St={class:"current-price"},jt={key:0,class:"original-price"},At={key:0,class:"discount-info"},qt={class:"discount-percent"},Dt={class:"product-actions"},Lt=["onClick"],Ft={key:0,class:"load-more-section"},zt=["disabled"],Et={key:0},Mt={key:1,class:"loading-content"},Tt={class:"modal-header"},Vt={class:"modal-body"},Nt={class:"detail-image"},Ut={key:0,class:"image-gallery"},Bt=["src","alt"],Ot=["src","alt"],Qt={class:"detail-info"},Xt={class:"detail-desc"},Ht={key:0,class:"detail-specs"},Yt={class:"detail-rating"},Jt={class:"stars"},Kt={class:"rating-text"},Rt={class:"detail-price"},Wt={class:"current-price"},Gt={key:0,class:"original-price"},Zt={class:"detail-actions"},H=12,xt=Y({__name:"SurroundingProductsView",setup(o){const t=K(),w=J(),C=G(),f=b("all"),P=b(!1),a=b(null),_=b("default"),$=b(!1),I=b(1),A=b(!1),S=b([{id:"all",name:"全部产品",icon:"fas fa-th-large",description:"浏览所有庄园产品",count:15},{id:"tea",name:"茶叶产品",icon:"fas fa-leaf",description:"精选普洱茶系列",count:4},{id:"ip",name:"IP衍生品",icon:"fas fa-star",description:"普普主题周边",count:6},{id:"souvenir",name:"纪念品",icon:"fas fa-gift",description:"庄园专属纪念",count:3},{id:"craft",name:"手工艺品",icon:"fas fa-palette",description:"传统手工制作",count:2}]),g=b([{id:1,name:"精品普洱茶饼",description:"选用优质大叶种茶叶，传统工艺制作",fullDescription:"这款精品普洱茶饼选用云南大叶种茶叶，经过传统工艺精心制作。茶汤红浓明亮，滋味醇厚回甘，具有独特的陈香。适合收藏和日常品饮。",image:"/src/assets/images/products/tea-cakes/tea-cake-package.jpg",gallery:["/src/assets/images/products/tea-cakes/tea-cake-package.jpg","/src/assets/images/products/tea-cakes/tea-cake-material-1.jpg","/src/assets/images/products/tea-cakes/tea-cake-material-2.jpg","/src/assets/images/products/tea-cakes/tea-cake-material-3.jpg"],price:168,originalPrice:198,badge:"热销",categoryId:"tea",rating:5,reviews:234,specs:["重量：357g","年份：2023年","产地：云南普洱","包装：棉纸包装"],tags:["有机","传统工艺","收藏级"]},{id:2,name:"散装普洱茶（一级）",description:"新鲜采摘，自然晒干，原汁原味",fullDescription:"采用当季新鲜茶叶，经过自然晒干工艺，保持茶叶的原始香味。茶汤清澈，口感清香甘甜，是日常品茶的绝佳选择。",image:"/src/assets/images/产品/普洱茶/普洱茶1.jpg",gallery:["/src/assets/images/产品/普洱茶/普洱茶1.jpg","/src/assets/images/产品/普洱茶/普洱茶2.jpg","/src/assets/images/产品/普洱茶/普洱茶3.jpg"],price:88,originalPrice:108,badge:"新品",categoryId:"tea",rating:4,reviews:156,specs:["重量：250g","等级：一级","产地：云南普洱","包装：密封袋装"],tags:["新鲜","自然","日常品饮"]},{id:3,name:"普洱茶精装礼盒",description:"精美包装，送礼佳品",fullDescription:"精选多款优质普洱茶，配以精美礼盒包装。包含生茶、熟茶各一饼，适合商务送礼或节日馈赠。",image:"/src/assets/images/产品/普洱茶/普洱茶包装刀版图.jpg",gallery:["/src/assets/images/产品/普洱茶/普洱茶包装刀版图.jpg","/src/assets/images/产品/普洱茶/普洱茶摆放环境展示.jpg"],price:298,originalPrice:358,badge:"礼品",categoryId:"tea",rating:5,reviews:67,specs:["内含：生茶357g + 熟茶357g","包装：高档礼盒","产地：云南普洱","适合：送礼收藏"],tags:["礼盒装","送礼","高档"]},{id:4,name:"陈年普洱茶饼（5年陈）",description:"5年自然陈化，口感醇厚",fullDescription:"经过5年自然陈化的普洱茶饼，茶性温和，口感醇厚甘甜。陈香浓郁，汤色红亮，是普洱茶爱好者的珍藏佳品。",image:"/src/assets/images/产品/茶饼/茶饼原料4.jpg",gallery:["/src/assets/images/产品/茶饼/茶饼原料4.jpg","/src/assets/images/产品/茶饼/茶饼原料1.jpg"],price:388,originalPrice:458,badge:"珍藏",categoryId:"tea",rating:5,reviews:234,specs:["重量：357g","年份：2019年","陈化：5年","产地：云南普洱"],tags:["陈年","珍藏","限量"]},{id:11,name:"茶茶主题帆布包",description:"可爱IP形象，实用环保",fullDescription:"以茶茶为主题设计的帆布包，采用优质帆布材料，结实耐用。包包印有可爱的茶茶形象，既实用又具有纪念意义。",image:"/src/assets/images/IP形象衍生产品/帆布包/帆布包1.jpg",gallery:["/src/assets/images/IP形象衍生产品/帆布包/帆布包1.jpg","/src/assets/images/IP形象衍生产品/帆布包/帆布包2.png","/src/assets/images/IP形象衍生产品/帆布包/帆布包3.jpg"],price:58,badge:"新品",categoryId:"ip",rating:5,reviews:45,specs:["材质：优质帆布","尺寸：35×40×12cm","设计：茶茶主题","容量：15L"],tags:["环保","实用","IP周边"],isNew:!0},{id:12,name:"茶茶纪念挂坠",description:"精美挂坠，随身携带",fullDescription:"精致的茶茶主题挂坠，采用优质材料制作。可作为钥匙扣、包包挂饰使用，让茶茶时刻陪伴在您身边。",image:"/src/assets/images/IP形象衍生产品/挂坠/挂坠1.jpg",gallery:["/src/assets/images/IP形象衍生产品/挂坠/挂坠1.jpg","/src/assets/images/IP形象衍生产品/挂坠/挂坠2.jpg","/src/assets/images/IP形象衍生产品/挂坠/挂坠展示.jpg"],price:28,badge:"新品",categoryId:"ip",rating:4,reviews:89,specs:["材质：合金+亚克力","尺寸：5×3×0.5cm","设计：茶茶形象","用途：装饰挂件"],tags:["挂饰","可爱","IP周边"]},{id:13,name:"普普主题水杯",description:"精美陶瓷杯，品茶首选",fullDescription:"以普普为主题设计的陶瓷水杯，采用优质陶瓷材料，杯身印有精美的普普图案。容量适中，是品茶和日常使用的理想选择。",image:"/src/assets/images/IP形象衍生产品/水杯/水杯1.jpg",price:38,badge:"实用",categoryId:"ip",rating:4,reviews:156,specs:["材质：优质陶瓷","容量：350ml","设计：普普主题","工艺：高温烧制"],tags:["陶瓷","实用","IP周边"]},{id:14,name:"茶茶主题服装（女款）",description:"舒适面料，时尚设计",fullDescription:"以茶茶为主题设计的休闲服装，采用舒适透气的面料。印有可爱的茶茶图案，适合日常穿着和旅游纪念。",image:"/src/assets/images/IP形象衍生产品/衣服/衣服1（女）.jpg",gallery:["/src/assets/images/IP形象衍生产品/衣服/衣服1（女）.jpg","/src/assets/images/IP形象衍生产品/衣服/衣服3.png"],price:128,originalPrice:158,badge:"限量",categoryId:"ip",rating:5,reviews:67,specs:["材质：纯棉","尺寸：S/M/L/XL","设计：茶茶主题","颜色：白色/粉色"],tags:["服装","舒适","IP周边"]},{id:15,name:"茶茶主题服装（男款）",description:"简约设计，舒适穿着",fullDescription:"茶茶主题男款休闲服装，简约而不失个性的设计。采用优质面料，穿着舒适，是茶茶粉丝的必备单品。",image:"/src/assets/images/IP形象衍生产品/衣服/衣服2（男）.jpg",price:118,originalPrice:148,badge:"热销",categoryId:"ip",rating:4,reviews:89,specs:["材质：纯棉","尺寸：S/M/L/XL/XXL","设计：茶茶主题","颜色：黑色/灰色"],tags:["服装","简约","IP周边"]},{id:16,name:"茶茶平板保护套",description:"茶茶图案，保护设备",fullDescription:"茶茶主题平板电脑保护套，采用优质PU皮革制作。内部有柔软绒布保护，外观印有精美的茶茶图案。",image:"/src/assets/images/IP形象衍生产品/平板/平板外壳1.png",gallery:["/src/assets/images/IP形象衍生产品/平板/平板外壳1.png","/src/assets/images/IP形象衍生产品/平板/平板外壳2.png","/src/assets/images/IP形象衍生产品/平板/平板外壳3.png"],price:68,badge:"新品",categoryId:"ip",rating:5,reviews:234,specs:["适用：9.7-10.1寸平板","材质：PU皮革+绒布","设计：茶茶主题","功能：防摔保护"],tags:["保护套","实用","IP周边"]},{id:21,name:"庄园纪念勋章（金色版）",description:"庄园专属纪念，限量发售",fullDescription:"普洱蘑菇庄园专属纪念勋章，采用精美工艺制作。金色版本限量发售，具有很高的收藏和纪念价值。",image:"/src/assets/images/IP形象衍生产品/勋章/勋章1.jpg",gallery:["/src/assets/images/IP形象衍生产品/勋章/勋章1.jpg","/src/assets/images/IP形象衍生产品/勋章/勋章2.jpg"],price:38,badge:"限量",categoryId:"souvenir",rating:5,reviews:67,specs:["材质：合金镀金","直径：4cm","设计：庄园专属","限量：1000枚"],tags:["纪念品","限量","收藏"]},{id:22,name:"庄园纪念勋章（银色版）",description:"经典设计，典雅大方",fullDescription:"普洱蘑菇庄园纪念勋章银色版，设计典雅大方。采用优质合金材料，表面镀银处理，光泽持久。",image:"/src/assets/images/IP形象衍生产品/勋章/勋章2.jpg",gallery:["/src/assets/images/IP形象衍生产品/勋章/勋章2.jpg","/src/assets/images/IP形象衍生产品/勋章/勋章3.jpg"],price:28,badge:"经典",categoryId:"souvenir",rating:4,reviews:123,specs:["材质：合金镀银","直径：4cm","设计：庄园专属","工艺：压铸成型"],tags:["纪念品","经典","收藏"]},{id:23,name:"庄园纪念勋章（铜色版）",description:"复古风格，怀旧情怀",fullDescription:"普洱蘑菇庄园纪念勋章铜色版，复古风格设计，充满怀旧情怀。表面做旧处理，展现历史沧桑感。",image:"/src/assets/images/IP形象衍生产品/勋章/勋章3.jpg",gallery:["/src/assets/images/IP形象衍生产品/勋章/勋章3.jpg","/src/assets/images/IP形象衍生产品/勋章/勋章1.jpg"],price:25,badge:"复古",categoryId:"souvenir",rating:4,reviews:67,specs:["材质：合金做旧","直径：4cm","设计：庄园专属","工艺：仿古处理"],tags:["纪念品","复古","收藏"]}]),D=V(()=>{let n=f.value==="all"?g.value:g.value.filter(e=>e.categoryId===f.value);_.value==="price-low"?n=n.sort((e,d)=>e.price-d.price):_.value==="price-high"?n=n.sort((e,d)=>d.price-e.price):_.value==="rating"&&(n=n.sort((e,d)=>(d.rating||0)-(e.rating||0)));const i=I.value*H;return n.slice(0,i)}),Z=V(()=>{const n=f.value==="all"?g.value.length:g.value.filter(i=>i.categoryId===f.value).length;return I.value*H<n}),x=()=>{$.value=!0,setTimeout(()=>{I.value++,$.value=!1},1e3)},ss=()=>{window.scrollTo({top:0,behavior:"smooth"})},U=()=>{A.value=window.scrollY>500},es=V(()=>g.value.filter(n=>["热销","新品","限量","珍藏"].includes(n.badge||"")).slice(0,3)),B=n=>{if(!n)return"其他";const i=S.value.find(e=>e.id===n);return i?i.name:"其他"},O=n=>({"fas fa-th-large":"th-large","fas fa-leaf":"leaf","fas fa-star":"star","fas fa-gift":"gift","fas fa-palette":"palette"})[n]||"th-large",ts=n=>n==="all"?g.value.length:g.value.filter(i=>i.categoryId===n).length,Q=n=>n&&{热销:"badge-hot",新品:"badge-new",限量:"badge-limited",推荐:"badge-recommend",礼品:"badge-gift",珍藏:"badge-premium",传统:"badge-traditional",手工:"badge-handmade",经典:"badge-classic",实用:"badge-practical",复古:"badge-vintage",新鲜:"badge-fresh"}[n]||"badge-default",as=()=>{const n=document.querySelector(".products-section");n&&n.scrollIntoView({behavior:"smooth"})},is=()=>{const n=document.querySelector(".category-section");n&&n.scrollIntoView({behavior:"smooth"})},L=n=>{a.value=n,P.value=!0},F=(n,i)=>{if(n.stopPropagation(),!w.isAuthenticated){t.push("/login");return}try{C.addToCart(i,1),E(`${i.name} 已添加到购物车`)}catch(e){alert(e.message)}},os=n=>{L(n)},ns=n=>{if(!w.isAuthenticated){t.push("/login");return}E(`${n.name} 已添加到收藏夹`)},z=(n,i)=>{if(n&&n.stopPropagation(),!w.isAuthenticated){t.push("/login");return}const e=i||a.value;if(!e){alert("请选择要购买的产品");return}try{C.addToCart(e,1),E(`${e.name} 已添加到购物车，准备结算`)}catch(d){alert(d.message)}},E=n=>{alert(n)},X=()=>{P.value=!1,a.value=null},ls=n=>{const i=n.target,e=i.closest(".image-gallery");e&&(e.querySelectorAll("img").forEach(M=>M.classList.remove("active")),i.classList.add("active"))},rs=()=>{const n=new IntersectionObserver(e=>{e.forEach(d=>{d.isIntersecting&&d.target.classList.add("animate-in")})},{threshold:.1});document.querySelectorAll(".category-card, .product-card, .featured-card").forEach(e=>n.observe(e))},cs=()=>{const n=document.querySelectorAll(".hero-slide");if(n.length<=1)return;let i=0;setInterval(()=>{n[i].classList.remove("active"),i=(i+1)%n.length,n[i].classList.add("active")},5e3)},ds=()=>{document.querySelectorAll(".product-card").forEach(i=>{const e=i;i.addEventListener("mouseenter",()=>{e.style.transform="translateY(-8px) scale(1.02)"}),i.addEventListener("mouseleave",()=>{e.style.transform="translateY(0) scale(1)"})})},us=()=>{document.querySelectorAll(".fade-in-up, .slide-in-left, .slide-in-right").forEach((i,e)=>{setTimeout(()=>{i.classList.add("animate-in")},e*100)})};return R(()=>{console.log("周边产品页面加载完成"),setTimeout(()=>{rs(),cs(),ds(),us()},100),window.addEventListener("scroll",U)}),gs(()=>{window.removeEventListener("scroll",U)}),(n,i)=>(r(),l("div",ge,[p(ps),s("main",pe,[s("section",{class:"products-hero"},[i[8]||(i[8]=s("div",{class:"hero-background"},[s("div",{class:"hero-carousel"},[s("div",{class:"hero-slide active",style:{"background-image":"url('/src/assets/images/产品/茶饼/茶饼包装.jpg')"}},[s("div",{class:"slide-overlay"})])])],-1)),s("div",{class:"hero-content"},[i[7]||(i[7]=N('<div class="hero-badge slide-in-left" data-v-0751b9d0><span class="badge-icon" data-v-0751b9d0>🛍️</span><span class="badge-text" data-v-0751b9d0>庄园精选</span></div><h1 class="hero-title fade-in-up" data-v-0751b9d0><span class="title-main gradient-text" data-v-0751b9d0>周边产品</span><span class="title-sub" data-v-0751b9d0>精选云南特色好物</span></h1><p class="hero-subtitle slide-in-right" data-v-0751b9d0> 带走庄园的美好回忆<br data-v-0751b9d0><span class="subtitle-highlight" data-v-0751b9d0>每一件都承载着普洱茶乡的文化底蕴</span></p>',3)),s("div",{class:"hero-buttons fade-in-up"},[s("button",{onClick:as,class:"btn btn-primary btn-large glowing"},i[5]||(i[5]=[s("span",{class:"btn-text"},"立即选购",-1)])),s("button",{onClick:is,class:"btn btn-outline-white btn-large"},i[6]||(i[6]=[s("span",{class:"btn-text"},"浏览分类",-1)]))])])]),s("section",ve,[s("div",me,[i[9]||(i[9]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"产品分类"),s("p",{class:"section-subtitle"},"精心分类，便于您的选择")],-1)),s("div",he,[(r(!0),l(m,null,h(S.value,e=>(r(),l("div",{key:e.id,onClick:d=>f.value=e.id,class:y(["category-card",{active:f.value===e.id}])},[s("div",fe,[p(v,{name:O(e.icon),size:28},null,8,["name"])]),s("div",_e,[s("h3",ye,c(e.name),1),s("p",ke,c(e.description),1),s("div",Ce,c(e.count)+"+ 产品",1)])],10,be))),128))])])]),s("section",Pe,[s("div",we,[i[11]||(i[11]=N('<div class="section-header" data-v-0751b9d0><div class="section-badge" data-v-0751b9d0><span class="badge-dot" data-v-0751b9d0></span><span data-v-0751b9d0>精选推荐</span></div><h2 class="section-title" data-v-0751b9d0><span class="title-highlight" data-v-0751b9d0>特色推荐</span><span class="title-main" data-v-0751b9d0>庄园精选，品质保证</span></h2></div>',1)),s("div",$e,[(r(!0),l(m,null,h(es.value,e=>(r(),l("div",{key:e.id,class:"featured-card",onClick:d=>L(e)},[s("div",Se,[s("div",je,[s("img",{src:e.image,alt:e.name},null,8,Ae),s("div",qe,[s("div",De,[s("button",Le,[p(v,{name:"eye",size:16}),i[10]||(i[10]=q(" 快速查看 "))])])])]),s("div",{class:y(["product-badge",Q(e.badge)])},c(e.badge),3),s("div",Fe,[s("div",ze,[(r(),l(m,null,h(5,d=>p(v,{key:d,name:"star",size:14,class:y({active:d<=(e.rating||5)})},null,8,["class"])),64))]),s("span",Ee,c(e.rating||5),1)])]),s("div",Me,[s("div",Te,c(B(e.categoryId)),1),s("h3",Ve,c(e.name),1),s("p",Ne,c(e.description),1),e.specs?(r(),l("div",Ue,[(r(!0),l(m,null,h(e.specs.slice(0,2),d=>(r(),l("span",{key:d,class:"spec-tag"},c(d),1))),128))])):u("",!0),s("div",Be,[s("div",Oe,[s("span",Qe,"¥"+c(e.price),1),e.originalPrice?(r(),l("span",Xe,"¥"+c(e.originalPrice),1)):u("",!0),e.originalPrice?(r(),l("span",He," 省¥"+c(e.originalPrice-e.price),1)):u("",!0)]),s("div",Ye,[s("button",{onClick:k(d=>F(d,e),["stop"]),class:"btn-cart"},[p(v,{name:"shopping-cart",size:16})],8,Je),s("button",{onClick:k(d=>z(d,e),["stop"]),class:"btn-buy"}," 立即购买 ",8,Ke)])])])],8,Ie))),128))])])]),s("section",Re,[i[18]||(i[18]=s("div",{class:"products-background"},[s("div",{class:"products-pattern"})],-1)),s("div",We,[s("div",Ge,[i[13]||(i[13]=s("h2",{class:"section-title"},"全部产品",-1)),s("div",Ze,[s("div",xe,[(r(!0),l(m,null,h(S.value,e=>(r(),l("button",{key:e.id,onClick:d=>f.value=e.id,class:y(["filter-tab",{active:f.value===e.id}])},[p(v,{name:O(e.icon),size:20},null,8,["name"]),q(" "+c(e.name)+" ",1),s("span",et,c(ts(e.id)),1)],10,st))),128))]),s("div",tt,[j(s("select",{"onUpdate:modelValue":i[0]||(i[0]=e=>_.value=e),class:"sort-select"},i[12]||(i[12]=[N('<option value="default" data-v-0751b9d0>默认排序</option><option value="price-low" data-v-0751b9d0>价格从低到高</option><option value="price-high" data-v-0751b9d0>价格从高到低</option><option value="rating" data-v-0751b9d0>评分最高</option><option value="newest" data-v-0751b9d0>最新上架</option>',5)]),512),[[vs,_.value]])])])]),s("div",at,[(r(!0),l(m,null,h(D.value,e=>(r(),l("div",{key:e.id,class:"product-card modern-card",onClick:d=>L(e)},[s("div",ot,[s("div",nt,[s("img",{src:e.image,alt:e.name},null,8,lt),s("div",rt,[s("div",ct,[s("button",{onClick:k(d=>os(e),["stop"]),class:"action-btn quick-view"},[p(v,{name:"eye",size:18}),i[14]||(i[14]=s("span",{class:"tooltip"},"快速查看",-1))],8,dt),s("button",{onClick:k(d=>F(d,e),["stop"]),class:"action-btn add-cart"},[p(v,{name:"shopping-cart",size:18}),i[15]||(i[15]=s("span",{class:"tooltip"},"加入购物车",-1))],8,ut),s("button",{onClick:k(d=>ns(e),["stop"]),class:"action-btn wishlist"},[p(v,{name:"heart",size:18}),i[16]||(i[16]=s("span",{class:"tooltip"},"收藏",-1))],8,gt)])])]),e.badge?(r(),l("div",pt,[s("span",{class:y(["badge",Q(e.badge)])},c(e.badge),3),e.isNew?(r(),l("span",vt,"新品")):u("",!0),e.isHot?(r(),l("span",mt,"热销")):u("",!0)])):u("",!0),s("div",ht,[s("div",bt,[(r(),l(m,null,h(5,d=>p(v,{key:d,name:"star",size:14,class:y({active:d<=(e.rating||5)})},null,8,["class"])),64))]),s("span",ft,c(e.rating||5),1)])]),s("div",_t,[s("div",yt,c(B(e.categoryId)),1),s("h4",kt,c(e.name),1),s("p",Ct,c(e.description),1),e.tags?(r(),l("div",Pt,[(r(!0),l(m,null,h(e.tags.slice(0,3),d=>(r(),l("span",{key:d,class:"tag"},c(d),1))),128))])):u("",!0),s("div",wt,[s("div",$t,[s("div",It,[s("span",St,"¥"+c(e.price),1),e.originalPrice?(r(),l("span",jt,"¥"+c(e.originalPrice),1)):u("",!0)]),e.originalPrice?(r(),l("div",At,[s("span",qt,c(Math.round((1-e.price/e.originalPrice)*100))+"% OFF ",1)])):u("",!0)]),s("div",Dt,[s("button",{onClick:k(d=>z(d,e),["stop"]),class:"btn-buy-now"}," 立即购买 ",8,Lt)])])])],8,it))),128))]),Z.value?(r(),l("div",Ft,[s("button",{onClick:x,class:"btn btn-outline btn-large load-more-btn",disabled:$.value},[$.value?(r(),l("span",Mt,[p(v,{name:"spinner",size:16,class:"loading-spinner"}),i[17]||(i[17]=q(" 加载中... "))])):(r(),l("span",Et,"加载更多产品"))],8,zt)])):u("",!0)])])]),P.value?(r(),l("div",{key:0,class:"product-detail-modal",onClick:X},[s("div",{class:"modal-content",onClick:i[4]||(i[4]=k(()=>{},["stop"]))},[s("div",Tt,[s("h3",null,c(a.value?.name),1),s("button",{onClick:X,class:"close-btn"},[p(v,{name:"times",size:20})])]),s("div",Vt,[s("div",Nt,[a.value?.gallery&&a.value.gallery.length>1?(r(),l("div",Ut,[(r(!0),l(m,null,h(a.value.gallery,(e,d)=>(r(),l("img",{key:d,src:e,alt:a.value.name,class:y({active:d===0}),onClick:i[1]||(i[1]=M=>ls(M))},null,10,Bt))),128))])):(r(),l("img",{key:1,src:a.value?.image,alt:a.value?.name},null,8,Ot))]),s("div",Qt,[s("p",Xt,c(a.value?.fullDescription||a.value?.description),1),a.value?.specs?(r(),l("div",Ht,[i[19]||(i[19]=s("h4",null,"产品规格",-1)),s("ul",null,[(r(!0),l(m,null,h(a.value.specs,e=>(r(),l("li",{key:e},c(e),1))),128))])])):u("",!0),s("div",Yt,[s("div",Jt,[(r(),l(m,null,h(5,e=>p(v,{key:e,name:"star",size:16,class:y({active:e<=(a.value?.rating||0)})},null,8,["class"])),64))]),s("span",Kt,"("+c(a.value?.reviews||0)+"条评价)",1)]),s("div",Rt,[s("span",Wt,"¥"+c(a.value?.price),1),a.value?.originalPrice?(r(),l("span",Gt,"¥"+c(a.value?.originalPrice),1)):u("",!0)]),s("div",Zt,[s("button",{onClick:i[2]||(i[2]=e=>a.value&&z(e,a.value)),class:"btn-primary btn-large"},"立即购买"),s("button",{onClick:i[3]||(i[3]=e=>a.value&&F(e,a.value)),class:"btn-secondary btn-large"},"加入购物车")])])])])])):u("",!0),j(s("button",{onClick:ss,class:"scroll-top-btn floating",title:"回到顶部"},[p(v,{name:"chevron-up",size:24})],512),[[ms,A.value]]),p(ue)]))}}),ta=W(xt,[["__scopeId","data-v-0751b9d0"]]);export{ta as default};
