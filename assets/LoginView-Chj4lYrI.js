import{d as q,u as T,a as j,r as N,b as i,c as x,o as O,e as W,f as u,g as p,h as P,i as e,A as G,j as _,F as H,k as J,l as w,w as K,m as c,v as C,n as Q,p as X,q as Y,s as V,t as k,x as Z,y as aa,z as S,B as ea,C as M,D as sa,E as oa,_ as ta}from"./index-vYzfv9NW.js";import{r as na}from"./request-DzKJqaQU.js";import{A as la}from"./aos-CzWz6qMZ.js";const ia={class:"login-page"},ra={class:"animated-background"},da={class:"floating-particles"},ua={class:"login-main"},pa={class:"login-container"},va={class:"login-card","data-aos":"fade-up","data-aos-duration":"800"},fa={class:"form-group","data-aos":"fade-right","data-aos-delay":"400"},ca={class:"input-wrapper"},ma={class:"form-group","data-aos":"fade-right","data-aos-delay":"500"},ba={class:"input-wrapper"},ga=["type"],ya={class:"form-options","data-aos":"fade-up","data-aos-delay":"600"},ha={class:"checkbox-wrapper"},wa=["disabled"],ka={key:0,class:"loading-spinner"},xa={key:0,class:"phone-form"},_a={class:"form-group"},Ca={class:"input-wrapper"},Va={key:0,class:"error-message"},Da={class:"form-group"},La={class:"input-wrapper verify-wrapper"},Na=["disabled"],Pa=["disabled"],Sa={key:0,class:"loading-spinner"},Ma={class:"register-link"},$a=q({__name:"LoginView",setup(Ua){const D=T(),m=j(),l=N({username:"",password:"",remember:!1}),t=N({phone:"",verifyCode:""}),b=i(!1),v=i(!1),g=i(!1),f=i(!1),y=i(!1),r=i(0),d=i(""),$=()=>{b.value=!b.value},U=async()=>{v.value=!0;try{const s=await na.post("/h/user/login",{username:l.username,password:l.password});if(console.log("ç™»å½•å“åº”:",s),s.code!=="200")throw new Error(s.msg||"ç™»å½•å¤±è´¥");const a=s.data||s,o=a.user||a,n=a.tokenInfo||{tokenValue:a.token};m.login(l.username,n.tokenValue||"temp-token",o.realName||o.name||o.username,o.phonenumber||o.phone,o.gender,o.idCard,o.avatar,o.total,o.username,o.realName),m.setUserRole("user"),M(o.username||"ç”¨æˆ·"),D.push("/ai-rooms")}catch(s){console.error("ç™»å½•å¤±è´¥:",s),oa("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯")}finally{v.value=!1}},h=x(()=>/^1[3-9]\d{9}$/.test(t.phone)),L=x(()=>h.value&&t.verifyCode.length===6),E=x(()=>r.value>0?`${r.value}såé‡å‘`:y.value?"å‘é€ä¸­...":"è·å–éªŒè¯ç "),I=()=>{g.value=!g.value,g.value&&(t.phone="",t.verifyCode="",d.value="")},z=()=>{d.value="",t.phone&&!h.value&&(d.value="è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·æ ¼å¼")},A=async()=>{if(!h.value){d.value="è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·";return}y.value=!0;try{console.log("å‘é€éªŒè¯ç åˆ°:",t.phone),aa("éªŒè¯ç å·²å‘é€",`éªŒè¯ç å·²å‘é€åˆ° ${t.phone}ï¼Œè¯·æ³¨æ„æŸ¥æ”¶`),r.value=60;const s=setInterval(()=>{r.value--,r.value<=0&&clearInterval(s)},1e3)}catch(s){console.error("å‘é€éªŒè¯ç å¤±è´¥:",s),S("å‘é€å¤±è´¥","å‘é€éªŒè¯ç å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{y.value=!1}},B=async()=>{if(!L.value){ea("ä¿¡æ¯ä¸å®Œæ•´","è¯·å¡«å†™å®Œæ•´çš„æ‰‹æœºå·å’ŒéªŒè¯ç ");return}f.value=!0;try{console.log("æ‰‹æœºå·éªŒè¯ç™»å½•:",t.phone,t.verifyCode);const s={username:t.phone,realName:"æ‰‹æœºç”¨æˆ·",phone:t.phone,token:"phone-login-token-"+Date.now()};m.login(s.username,s.token,s.realName,s.phone,void 0,void 0,void 0,void 0,s.username,s.realName),m.setUserRole("user"),M(s.phone||"ç”¨æˆ·"),D.push("/ai-rooms")}catch(s){console.error("æ‰‹æœºå·éªŒè¯ç™»å½•å¤±è´¥:",s),S("éªŒè¯å¤±è´¥","éªŒè¯ç é”™è¯¯æˆ–å·²è¿‡æœŸï¼Œè¯·é‡è¯•")}finally{f.value=!1}},F=s=>{const a=Math.random()*4+2,o=Math.random()*100,n=Math.random()*20,R=Math.random()*10+10;return{width:`${a}px`,height:`${a}px`,left:`${o}%`,animationDelay:`${n}s`,animationDuration:`${R}s`}};return O(()=>{la.init({duration:800,easing:"ease-out-cubic",once:!0,offset:50})}),(s,a)=>{const o=W("router-link");return p(),u("div",ia,[P(G),e("div",ra,[e("div",da,[(p(),u(H,null,J(15,n=>e("div",{class:"particle",key:n,style:sa(F())},null,4)),64))]),a[5]||(a[5]=_('<div class="gradient-orbs" data-v-ea1b047e><div class="orb orb-1" data-v-ea1b047e></div><div class="orb orb-2" data-v-ea1b047e></div><div class="orb orb-3" data-v-ea1b047e></div></div><div class="floating-elements" data-v-ea1b047e><div class="floating-element mushroom-1" data-v-ea1b047e>ğŸ„</div><div class="floating-element mushroom-2" data-v-ea1b047e>ğŸŒ¿</div><div class="floating-element mushroom-3" data-v-ea1b047e>ğŸƒ</div></div>',2))]),e("main",ua,[e("div",pa,[e("div",va,[a[20]||(a[20]=_('<div class="login-header" data-aos="fade-down" data-aos-delay="200" data-v-ea1b047e><div class="login-icon" data-v-ea1b047e><span class="mushroom-icon" data-v-ea1b047e>ğŸ„</span></div><h1 class="login-title" data-v-ea1b047e>æ™®æ´±è˜‘è‡åº„å›­æ°‘å®¿</h1><p class="login-subtitle" data-v-ea1b047e>ç™»å½•æ‚¨çš„è´¦æˆ·ï¼Œä½“éªŒè‡ªç„¶ç”Ÿæ€ä¹‹ç¾</p></div>',1)),e("form",{class:"login-form",onSubmit:K(U,["prevent"]),"data-aos":"fade-up","data-aos-delay":"300"},[e("div",fa,[a[7]||(a[7]=e("label",{for:"email",class:"form-label"},"ç”¨æˆ·å",-1)),e("div",ca,[a[6]||(a[6]=e("i",{class:"fas fa-user input-icon"},null,-1)),c(e("input",{type:"text",id:"username","onUpdate:modelValue":a[0]||(a[0]=n=>l.username=n),class:"form-input",placeholder:"è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·å",required:""},null,512),[[C,l.username]])])]),e("div",ma,[a[9]||(a[9]=e("label",{for:"password",class:"form-label"},"å¯†ç ",-1)),e("div",ba,[a[8]||(a[8]=e("i",{class:"fas fa-lock input-icon"},null,-1)),c(e("input",{type:b.value?"text":"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=n=>l.password=n),class:"form-input",placeholder:"è¯·è¾“å…¥æ‚¨çš„å¯†ç ",required:""},null,8,ga),[[Q,l.password]]),e("button",{type:"button",class:"password-toggle",onClick:$},[e("i",{class:X(b.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),e("div",ya,[e("label",ha,[c(e("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=n=>l.remember=n)},null,512),[[Y,l.remember]]),a[10]||(a[10]=e("span",{class:"checkmark"},null,-1)),a[11]||(a[11]=e("span",{class:"checkbox-text"},"è®°ä½æˆ‘",-1))]),a[12]||(a[12]=e("a",{href:"#",class:"forgot-link"},"å¿˜è®°å¯†ç ï¼Ÿ",-1))]),e("button",{type:"submit",class:"login-btn",disabled:v.value,"data-aos":"zoom-in","data-aos-delay":"700"},[v.value?(p(),u("span",ka)):w("",!0),V(" "+k(v.value?"ç™»å½•ä¸­...":"ç™»å½•"),1)],8,wa)],32),a[21]||(a[21]=e("div",{class:"divider","data-aos":"fade-up","data-aos-delay":"800"},[e("span",{class:"divider-text"},"æˆ–")],-1)),e("div",{class:"phone-login","data-aos":"fade-up","data-aos-delay":"900"},[e("button",{type:"button",class:"phone-login-btn",onClick:I},a[13]||(a[13]=[e("i",{class:"fas fa-mobile-alt"},null,-1),e("span",null,"æ‰‹æœºå·éªŒè¯ç™»å½•",-1)]))]),g.value?(p(),u("div",xa,[e("div",_a,[a[15]||(a[15]=e("label",{for:"phone",class:"form-label"},"æ‰‹æœºå·",-1)),e("div",Ca,[a[14]||(a[14]=e("i",{class:"fas fa-mobile-alt input-icon"},null,-1)),c(e("input",{type:"tel",id:"phone","onUpdate:modelValue":a[3]||(a[3]=n=>t.phone=n),class:"form-input",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·",maxlength:"11",onInput:z},null,544),[[C,t.phone]])]),d.value?(p(),u("div",Va,k(d.value),1)):w("",!0)]),e("div",Da,[a[17]||(a[17]=e("label",{for:"verifyCode",class:"form-label"},"éªŒè¯ç ",-1)),e("div",La,[a[16]||(a[16]=e("i",{class:"fas fa-shield-alt input-icon"},null,-1)),c(e("input",{type:"text",id:"verifyCode","onUpdate:modelValue":a[4]||(a[4]=n=>t.verifyCode=n),class:"form-input verify-input",placeholder:"è¯·è¾“å…¥éªŒè¯ç ",maxlength:"6"},null,512),[[C,t.verifyCode]]),e("button",{type:"button",class:"verify-btn",disabled:!h.value||y.value||r.value>0,onClick:A},k(E.value),9,Na)])]),e("button",{type:"button",class:"phone-submit-btn",disabled:!L.value||f.value,onClick:B},[f.value?(p(),u("span",Sa)):w("",!0),V(" "+k(f.value?"éªŒè¯ä¸­...":"éªŒè¯ç™»å½•"),1)],8,Pa)])):w("",!0),e("div",Ma,[a[19]||(a[19]=e("span",null,"è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ",-1)),P(o,{to:"/register",class:"register-btn"},{default:Z(()=>a[18]||(a[18]=[V("ç«‹å³æ³¨å†Œ")])),_:1,__:[18]})])]),a[22]||(a[22]=_('<div class="login-info" data-aos="fade-left" data-aos-delay="400" data-v-ea1b047e><div class="info-content" data-v-ea1b047e><h2 class="info-title" data-aos="fade-down" data-aos-delay="600" data-v-ea1b047e>å°Šäº«ä¼šå‘˜ç‰¹æƒ</h2><ul class="privilege-list" data-v-ea1b047e><li class="privilege-item" data-aos="fade-left" data-aos-delay="700" data-v-ea1b047e><i class="fas fa-crown" data-v-ea1b047e></i><span data-v-ea1b047e>ä¸“å±ä¼šå‘˜ä»·æ ¼</span></li><li class="privilege-item" data-aos="fade-left" data-aos-delay="800" data-v-ea1b047e><i class="fas fa-gift" data-v-ea1b047e></i><span data-v-ea1b047e>ç”Ÿæ—¥ä¸“å±ç¤¼é‡</span></li><li class="privilege-item" data-aos="fade-left" data-aos-delay="900" data-v-ea1b047e><i class="fas fa-concierge-bell" data-v-ea1b047e></i><span data-v-ea1b047e>ä¼˜å…ˆé¢„è®¢æœåŠ¡</span></li><li class="privilege-item" data-aos="fade-left" data-aos-delay="1000" data-v-ea1b047e><i class="fas fa-star" data-v-ea1b047e></i><span data-v-ea1b047e>ç§¯åˆ†å¥–åŠ±è®¡åˆ’</span></li></ul></div></div>',1))])])])}}}),Aa=ta($a,[["__scopeId","data-v-ea1b047e"]]);export{Aa as default};
