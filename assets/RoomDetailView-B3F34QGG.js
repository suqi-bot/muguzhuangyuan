import{d as E,u as G,N as L,a as N,b,c as S,o as T,e as q,f as i,g as o,i as a,h as c,x as v,s as d,t as l,O as z,l as j,F as k,k as h,p,_ as O}from"./index-PKPpSeMn.js";import{r as w}from"./request-DzKJqaQU.js";const U={class:"room-detail-page"},H={class:"navbar"},J={class:"nav-container"},K={class:"nav-menu"},P={class:"nav-buttons"},Q={class:"user-welcome"},X={class:"main-content"},Y={key:0,class:"loading-container"},Z={key:1,class:"room-detail-container"},ss={class:"room-gallery"},as={class:"main-image"},es=["src","alt"],ts={class:"image-nav"},ls=["disabled"],is=["disabled"],os={key:0,class:"thumbnail-list"},ns=["src","alt","onClick"],rs={class:"room-info-section"},us={class:"room-header"},ds={class:"room-title"},cs={key:0,class:"room-rating"},vs={class:"stars"},ms={class:"rating-text"},gs={class:"room-price"},ps={class:"price"},_s={class:"room-description"},fs={class:"room-amenities"},bs={class:"amenities-grid"},ks={class:"room-details"},hs={class:"details-grid"},ys={class:"detail-item"},Cs={class:"value"},xs={class:"detail-item"},Is={class:"value"},js={class:"detail-item"},ws={class:"value"},Fs={class:"detail-item"},Rs={class:"value"},Ws={class:"booking-section"},Ds=["disabled"],$s={key:2,class:"error-container"},Ms=E({__name:"RoomDetailView",setup(Vs){const _=G(),y=L(),C=N(),f=b(!0),e=b(null),n=b(0),F=S(()=>!e.value?.images||e.value.images.length===0?"/src/assets/images/card/card01.jpg":e.value.images[n.value]),R=async()=>{f.value=!0;try{const t=y.params.id;let s;try{s=await w.get(`/h/room/detail?id=${t}`)}catch{s=await w.get(`/h/room/${t}`)}if(s.code===200||s.code==="200")s.data.room?e.value={...s.data.room,status:s.data.room.status===0?"available":"booked",images:s.data.img?.map(r=>W(r.url))||m(t),amenities:s.data.room.device?.split(",")||x()}:e.value={...s.data,status:s.data.status===0?"available":"booked",images:m(t),amenities:s.data.device?.split(",")||x()};else throw new Error("获取房间详情失败")}catch(t){console.error("获取房间详情失败:",t),e.value=$(y.params.id)}finally{f.value=!1}},W=t=>t?t.startsWith("http")?t:`http://localhost:8091/files/${t}`:D(),m=t=>({1:["/src/assets/images/实地调研/房间参观/房间参观1.jpg","/src/assets/images/实地调研/室内调研/室内1.jpg"],2:["/src/assets/images/实地调研/房间参观/房间参观2.jpg","/src/assets/images/实地调研/室内调研/室内2.jpg"],3:["/src/assets/images/实地调研/室内调研/室内3.jpg","/src/assets/images/实地调研/室内调研/室内4.jpg"]})[t]||["/src/assets/images/实地调研/房间参观/房间参观1.jpg","/src/assets/images/实地调研/室内调研/室内1.jpg"],x=()=>["免费WiFi","空调","24小时热水","独立卫浴","电视","冰箱"],D=()=>"/src/assets/images/实地调研/房间参观/房间参观1.jpg",$=t=>{const s={1:{id:1,name:"蘑菇森林小屋",code:"MG-001",category:"豪华间",price:388,state:"空闲",status:"available",describe:"隐藏在蘑菇森林深处的温馨小屋，四周环绕着各种珍稀蘑菇。房间采用天然木材装修，配备现代化设施。",device:"WiFi,空调,电视,独立卫浴,迷你吧,阳台",address:"普洱蘑菇庄园森林区A栋",city:"普洱市",seat:2,images:m("1"),amenities:["WiFi","空调","电视","独立卫浴","迷你吧","阳台"]},2:{id:2,name:"普洱茶香木屋",code:"MG-002",category:"标准间",price:288,state:"空闲",status:"available",describe:"充满茶香的精致木屋，房间内陈设着各种普洱茶具和茶叶。您可以在房间内品茶赏景。",device:"WiFi,空调,电视,独立卫浴,茶具套装,观景窗",address:"普洱蘑菇庄园茶园区B栋",city:"普洱市",seat:2,images:m("2"),amenities:["WiFi","空调","电视","独立卫浴","茶具套装","观景窗"]},3:{id:3,name:"庄园豪华套房",code:"MG-003",category:"套房",price:588,state:"空闲",status:"available",describe:"庄园内最豪华的套房，拥有独立客厅、卧室和观景阳台。房间装修典雅，设施齐全。",device:"WiFi,空调,电视,独立卫浴,客厅,阳台,迷你吧,保险箱",address:"普洱蘑菇庄园主楼C栋",city:"普洱市",seat:4,images:m("3"),amenities:["WiFi","空调","电视","独立卫浴","客厅","阳台","迷你吧","保险箱"]}};return s[t]||s[1]},M=()=>{e.value?.images&&e.value.images.length>1&&(n.value=n.value===0?e.value.images.length-1:n.value-1)},V=()=>{e.value?.images&&e.value.images.length>1&&(n.value=n.value===e.value.images.length-1?0:n.value+1)},I=()=>{_.push("/ai-rooms")},B=()=>{e.value&&e.value.status==="available"&&_.push(`/book/${e.value.id}`)},A=()=>{C.logout(),_.push("/login")};return T(()=>{R()}),(t,s)=>{const r=q("router-link");return o(),i("div",U,[a("nav",H,[a("div",J,[s[6]||(s[6]=a("div",{class:"logo"},"🍄 普洱蘑菇庄园",-1)),a("div",K,[c(r,{to:"/",class:"nav-link"},{default:v(()=>s[0]||(s[0]=[d("首页")])),_:1,__:[0]}),c(r,{to:"/tea-culture",class:"nav-link"},{default:v(()=>s[1]||(s[1]=[d("茶文化")])),_:1,__:[1]}),c(r,{to:"/products",class:"nav-link"},{default:v(()=>s[2]||(s[2]=[d("民宿产品")])),_:1,__:[2]}),c(r,{to:"/ai-rooms",class:"nav-link"},{default:v(()=>s[3]||(s[3]=[d("AI选房")])),_:1,__:[3]}),c(r,{to:"/orders",class:"nav-link"},{default:v(()=>s[4]||(s[4]=[d("订单")])),_:1,__:[4]}),c(r,{to:"/profile",class:"nav-link"},{default:v(()=>s[5]||(s[5]=[d("个人信息")])),_:1,__:[5]})]),a("div",P,[a("span",Q,"欢迎，"+l(z(C).user?.username),1),a("button",{onClick:A,class:"btn btn-outline"},"退出")])])]),a("main",X,[f.value?(o(),i("div",Y,s[7]||(s[7]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1),a("span",null,"加载中...",-1)]))):e.value?(o(),i("div",Z,[a("div",{class:"back-section"},[a("button",{onClick:I,class:"back-btn"},s[8]||(s[8]=[a("i",{class:"fas fa-arrow-left"},null,-1),d(" 返回房间列表 ")]))]),a("div",ss,[a("div",as,[a("img",{src:F.value,alt:e.value.name},null,8,es),a("div",ts,[a("button",{onClick:M,class:"nav-btn prev-btn",disabled:e.value.images.length<=1},s[9]||(s[9]=[a("i",{class:"fas fa-chevron-left"},null,-1)]),8,ls),a("button",{onClick:V,class:"nav-btn next-btn",disabled:e.value.images.length<=1},s[10]||(s[10]=[a("i",{class:"fas fa-chevron-right"},null,-1)]),8,is)])]),e.value.images.length>1?(o(),i("div",os,[(o(!0),i(k,null,h(e.value.images,(u,g)=>(o(),i("img",{key:g,src:u,alt:`${e.value.name} ${g+1}`,class:p({active:n.value===g}),onClick:Bs=>n.value=g},null,10,ns))),128))])):j("",!0)]),a("div",rs,[a("div",us,[a("h1",ds,l(e.value.name),1),e.value.rating?(o(),i("div",cs,[a("div",vs,[(o(),i(k,null,h(5,u=>a("i",{key:u,class:p(u<=e.value.rating?"fas fa-star":"fa-regular fa-star")},null,2)),64))]),a("span",ms,l(e.value.rating)+" 分",1)])):j("",!0)]),a("div",gs,[a("span",ps,"¥"+l(e.value.price),1),s[11]||(s[11]=a("span",{class:"unit"},"/晚",-1))]),a("div",_s,[s[12]||(s[12]=a("h3",null,"房间介绍",-1)),a("p",null,l(e.value.description),1)]),a("div",fs,[s[14]||(s[14]=a("h3",null,"房间设施",-1)),a("div",bs,[(o(!0),i(k,null,h(e.value.amenities,u=>(o(),i("div",{key:u,class:"amenity-item"},[s[13]||(s[13]=a("i",{class:"fas fa-check"},null,-1)),a("span",null,l(u),1)]))),128))])]),a("div",ks,[s[19]||(s[19]=a("h3",null,"详细信息",-1)),a("div",hs,[a("div",ys,[s[15]||(s[15]=a("span",{class:"label"},"房间类型：",-1)),a("span",Cs,l(e.value.type),1)]),a("div",xs,[s[16]||(s[16]=a("span",{class:"label"},"房间面积：",-1)),a("span",Is,l(e.value.area||"25")+"㎡",1)]),a("div",js,[s[17]||(s[17]=a("span",{class:"label"},"最大入住：",-1)),a("span",ws,l(e.value.maxGuests||"2")+"人",1)]),a("div",Fs,[s[18]||(s[18]=a("span",{class:"label"},"床型：",-1)),a("span",Rs,l(e.value.bedType||"大床"),1)])])]),a("div",Ws,[a("div",{class:p(["availability-status",e.value.status])},[a("i",{class:p(e.value.status==="available"?"fas fa-check-circle":"fas fa-times-circle")},null,2),a("span",null,l(e.value.status==="available"?"可预订":"已被预订"),1)],2),a("button",{class:"book-btn",disabled:e.value.status!=="available",onClick:B},l(e.value.status==="available"?"立即预订":"暂不可预订"),9,Ds)])])])):(o(),i("div",$s,[s[20]||(s[20]=a("i",{class:"fas fa-exclamation-triangle"},null,-1)),s[21]||(s[21]=a("h3",null,"房间不存在",-1)),s[22]||(s[22]=a("p",null,"抱歉，您查看的房间不存在或已被删除",-1)),a("button",{onClick:I,class:"btn btn-primary"},"返回房间列表")]))])])}}}),Gs=O(Ms,[["__scopeId","data-v-6b0905f5"]]);export{Gs as default};
