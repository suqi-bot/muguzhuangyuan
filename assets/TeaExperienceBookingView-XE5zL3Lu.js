import{d as E,u as $,a as A,b as f,K as M,c as k,o as O,e as R,f as m,g as u,h as i,i as e,A as U,L as F,x as _,s as n,S as l,l as h,F as S,k as w,t as r,m as b,v as y,M as J,N as P,p as L,_ as Q}from"./index-vYzfv9NW.js";import{t as K}from"./tea_bg-a-28uJFZ.js";import{t as j,a as G}from"./tea-product-research15-CwQMI5Ig.js";import{t as H}from"./tea-product-research8-DTHka52R.js";const W={class:"page-container fade-in"},X={class:"main-content"},Y={class:"page-header"},Z={class:"header-background"},ee=["src"],se={class:"container"},te={class:"header-content"},ae={class:"breadcrumb"},oe={class:"page-title"},ie={class:"booking-section"},ne={class:"container"},le={class:"booking-content"},re={class:"section-card"},de={class:"section-header"},ue={class:"experience-grid"},ce=["onClick"],me={class:"experience-image"},pe=["src","alt"],ve={class:"experience-badge"},_e={class:"experience-overlay"},fe={class:"experience-info"},be={class:"experience-features"},ge={class:"feature-item"},ke={class:"feature-item"},he={class:"experience-price"},ye={class:"price"},xe={key:0,id:"booking-form-section",class:"section-card booking-form-card"},qe={class:"section-header"},ze={class:"selected-experience-info"},Se={class:"selected-badge"},we={class:"selected-details"},Pe={class:"selected-name"},Ie={class:"selected-price"},Ve={class:"selected-duration"},Ce={class:"booking-form"},Te={class:"form-grid"},Be={class:"form-group"},De=["min"],Ne={class:"form-group"},Ee=["value"],$e={class:"form-group"},Ae={class:"quantity-selector"},Me=["disabled"],Oe={class:"quantity"},Re=["disabled"],Ue={class:"form-group"},Fe={class:"form-group full-width"},Je={key:1,class:"section-card price-summary-card"},Le={class:"section-header"},Qe={class:"price-summary"},Ke={class:"summary-item"},je={class:"item-info"},Ge={class:"item-name"},He={class:"item-details"},We={class:"item-price"},Xe={class:"summary-total"},Ye={class:"total-price"},Ze={key:2,class:"submit-section"},es=["disabled"],ss={class:"footer"},ts={class:"footer-content"},as={class:"footer-section"},os=E({__name:"TeaExperienceBookingView",setup(is){const x=$(),p=A(),o=f(null),v=f(!1),t=f({date:"",time:"",quantity:1,phone:"",remarks:""}),I=f([{id:1,name:"普洱茶品鉴体验",description:"专业茶艺师指导，品味不同年份普洱茶的独特韵味，了解普洱茶的分类和品鉴技巧",price:168,duration:"2小时",image:j,maxParticipants:8},{id:2,name:"茶艺表演与学习",description:"学习传统茶艺手法，体验茶道文化的精髓，掌握正宗的普洱茶冲泡技巧",price:128,duration:"1.5小时",image:G,maxParticipants:6},{id:3,name:"茶园采摘体验",description:"亲手采摘茶叶，了解茶叶从采摘到制作的全过程，体验茶农的辛勤劳作",price:98,duration:"3小时",image:H,maxParticipants:12},{id:4,name:"茶文化深度游",description:"参观茶厂，了解普洱茶制作工艺，品尝地道茶点，深度了解茶文化历史",price:288,duration:"半天",image:M,maxParticipants:10}]),V=["09:00-11:00","10:00-12:00","14:00-16:00","15:00-17:00","16:00-18:00"],C=k(()=>{const d=new Date;return d.setDate(d.getDate()+1),d.toISOString().split("T")[0]}),g=k(()=>o.value?o.value.price*t.value.quantity:0),q=k(()=>o.value&&t.value.date&&t.value.time&&t.value.phone&&t.value.quantity>0),T=d=>{o.value=d,t.value.quantity=1,setTimeout(()=>{const s=document.getElementById("booking-form-section");s&&s.scrollIntoView({behavior:"smooth",block:"start"})},100)},B=()=>{o.value&&t.value.quantity<o.value.maxParticipants&&t.value.quantity++},D=()=>{t.value.quantity>1&&t.value.quantity--},N=async()=>{if(!p.isAuthenticated){alert("请先登录后再预约"),x.push("/login");return}if(!q.value){alert("请填写完整的预约信息");return}v.value=!0;try{const d={type:"tea_experience",experienceId:o.value.id,experienceName:o.value.name,date:t.value.date,time:t.value.time,quantity:t.value.quantity,unitPrice:o.value.price,totalAmount:g.value,phone:t.value.phone,remarks:t.value.remarks,status:"pending",createTime:new Date().toISOString()},s=JSON.parse(localStorage.getItem("tea_experience_orders")||"[]"),c="TEA_"+Date.now()+"_"+Math.random().toString(36).substring(2,11),a={id:c,userId:p.user?.id||p.user?.username,...d};s.unshift(a),localStorage.setItem("tea_experience_orders",JSON.stringify(s)),await new Promise(z=>setTimeout(z,1e3)),alert(`预约成功！
订单号：${c}
体验项目：${o.value.name}
体验时间：${t.value.date} ${t.value.time}
参与人数：${t.value.quantity}人
总金额：¥${g.value}`),x.push("/orders")}catch(d){console.error("预约失败:",d),alert("预约失败，请稍后重试")}finally{v.value=!1}};return O(()=>{p.user?.phone&&(t.value.phone=p.user.phone)}),(d,s)=>{const c=R("router-link");return u(),m("div",W,[i(U),e("main",X,[e("section",Y,[e("div",Z,[e("img",{src:F(K),alt:"茶文化背景"},null,8,ee),s[4]||(s[4]=e("div",{class:"header-overlay"},null,-1))]),e("div",se,[e("div",te,[e("div",ae,[i(c,{to:"/",class:"breadcrumb-link"},{default:_(()=>s[5]||(s[5]=[n("首页")])),_:1,__:[5]}),s[7]||(s[7]=e("span",{class:"breadcrumb-separator"},">",-1)),i(c,{to:"/tea-culture",class:"breadcrumb-link"},{default:_(()=>s[6]||(s[6]=[n("茶文化")])),_:1,__:[6]}),s[8]||(s[8]=e("span",{class:"breadcrumb-separator"},">",-1)),s[9]||(s[9]=e("span",{class:"breadcrumb-current"},"预约体验",-1))]),e("h1",oe,[i(l,{name:"leaf",size:"32",color:"#d4af37"}),s[10]||(s[10]=n(" 茶文化体验预约 "))]),s[11]||(s[11]=e("p",{class:"page-subtitle"}," 体验正宗普洱茶文化，感受千年传承的茶道精神 ",-1))])])]),e("section",ie,[e("div",ne,[e("div",le,[e("div",re,[e("div",de,[e("h2",null,[i(l,{name:"spa",size:"24",color:"#d4af37"}),s[12]||(s[12]=n(" 选择体验项目 "))]),s[13]||(s[13]=e("p",null,"精心设计的茶文化体验项目，让您深度感受普洱茶的魅力",-1))]),e("div",ue,[(u(!0),m(S,null,w(I.value,a=>(u(),m("div",{key:a.id,class:L(["experience-card",{active:o.value?.id===a.id}]),onClick:z=>T(a)},[e("div",me,[e("img",{src:a.image,alt:a.name},null,8,pe),e("div",ve,r(a.duration),1),e("div",_e,[i(l,{name:"check-circle",size:"32",color:"white"})])]),e("div",fe,[e("h3",null,r(a.name),1),e("p",null,r(a.description),1),e("div",be,[e("span",ge,[i(l,{name:"users",size:"16"}),n(" 最多"+r(a.maxParticipants)+"人 ",1)]),e("span",ke,[i(l,{name:"clock",size:"16"}),n(" "+r(a.duration),1)])]),e("div",he,[e("span",ye,"¥"+r(a.price),1),s[14]||(s[14]=e("span",{class:"unit"},"/人",-1))])])],10,ce))),128))])]),o.value?(u(),m("div",xe,[e("div",qe,[e("h2",null,[i(l,{name:"calendar-alt",size:"24",color:"#d4af37"}),s[15]||(s[15]=n(" 预约信息 "))]),s[17]||(s[17]=e("p",null,"请填写您的预约信息，我们将为您安排最佳的体验时间",-1)),e("div",ze,[e("div",Se,[i(l,{name:"check-circle",size:"16",color:"#d4af37"}),s[16]||(s[16]=n(" 已选择体验项目 "))]),e("div",we,[e("span",Pe,r(o.value.name),1),e("span",Ie,"¥"+r(o.value.price)+"/人",1),e("span",Ve,r(o.value.duration),1)])])]),e("div",Ce,[e("div",Te,[e("div",Be,[e("label",null,[i(l,{name:"calendar",size:"16"}),s[18]||(s[18]=n(" 体验日期 "))]),b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.date=a),type:"date",min:C.value,class:"form-input",placeholder:"请选择体验日期"},null,8,De),[[y,t.value.date]])]),e("div",Ne,[e("label",null,[i(l,{name:"clock",size:"16"}),s[19]||(s[19]=n(" 体验时间 "))]),b(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.time=a),class:"form-select"},[s[20]||(s[20]=e("option",{value:""},"请选择时间段",-1)),(u(),m(S,null,w(V,a=>e("option",{key:a,value:a},r(a),9,Ee)),64))],512),[[J,t.value.time]])]),e("div",$e,[e("label",null,[i(l,{name:"users",size:"16"}),s[21]||(s[21]=n(" 参与人数 "))]),e("div",Ae,[e("button",{onClick:D,class:"qty-btn",disabled:t.value.quantity<=1},[i(l,{name:"minus",size:"16"})],8,Me),e("span",Oe,r(t.value.quantity),1),e("button",{onClick:B,class:"qty-btn",disabled:t.value.quantity>=o.value.maxParticipants},[i(l,{name:"plus",size:"16"})],8,Re)])]),e("div",Ue,[e("label",null,[i(l,{name:"phone",size:"16"}),s[22]||(s[22]=n(" 联系电话 "))]),b(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.value.phone=a),type:"tel",placeholder:"请输入您的联系电话",class:"form-input"},null,512),[[y,t.value.phone]])])]),e("div",Fe,[e("label",null,[i(l,{name:"edit",size:"16"}),s[23]||(s[23]=n(" 特殊需求 "))]),b(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=a=>t.value.remarks=a),placeholder:"请输入特殊需求或备注信息（可选）",class:"form-textarea",rows:"4"},null,512),[[y,t.value.remarks]])])])])):h("",!0),o.value?(u(),m("div",Je,[e("div",Le,[e("h2",null,[i(l,{name:"calculator",size:"24",color:"#d4af37"}),s[24]||(s[24]=n(" 价格汇总 "))])]),e("div",Qe,[e("div",Ke,[e("div",je,[e("span",Ge,r(o.value.name),1),e("span",He,r(t.value.quantity)+"人 × ¥"+r(o.value.price)+"/人",1)]),e("span",We,"¥"+r(o.value.price*t.value.quantity),1)]),e("div",Xe,[s[25]||(s[25]=e("span",{class:"total-label"},"总计金额",-1)),e("span",Ye,"¥"+r(g.value),1)])])])):h("",!0),o.value?(u(),m("div",Ze,[e("button",{onClick:N,disabled:!q.value||v.value,class:"submit-btn"},[v.value?(u(),P(l,{key:0,name:"spinner",spin:"",size:"20"})):(u(),P(l,{key:1,name:"check",size:"20"})),n(" "+r(v.value?"提交中...":"确认预约"),1)],8,es),s[26]||(s[26]=e("p",{class:"submit-note"},[n(" 点击确认预约即表示您同意我们的 "),e("a",{href:"#",class:"link"},"服务条款"),n(" 和 "),e("a",{href:"#",class:"link"},"隐私政策")],-1))])):h("",!0)])])])]),e("footer",ss,[e("div",ts,[s[31]||(s[31]=e("div",{class:"footer-section"},[e("h3",null,"普洱蘑菇庄园"),e("p",null,"隐于森林深处，与自然共生的生态民宿体验")],-1)),s[32]||(s[32]=e("div",{class:"footer-section"},[e("h4",null,"联系我们"),e("p",null,"地址：云南省普洱市思茅区"),e("p",null,"电话：400-123-4567"),e("p",null,"邮箱：info@mushroomfarm.com")],-1)),e("div",as,[s[30]||(s[30]=e("h4",null,"快速链接",-1)),i(c,{to:"/",class:"footer-link"},{default:_(()=>s[27]||(s[27]=[n("首页")])),_:1,__:[27]}),i(c,{to:"/tea-culture",class:"footer-link"},{default:_(()=>s[28]||(s[28]=[n("茶文化")])),_:1,__:[28]}),i(c,{to:"/products",class:"footer-link"},{default:_(()=>s[29]||(s[29]=[n("民宿产品")])),_:1,__:[29]})])]),s[33]||(s[33]=e("div",{class:"footer-bottom"},[e("p",null,"© 2024 普洱蘑菇庄园民宿. 保留所有权利.")],-1))])])}}}),us=Q(os,[["__scopeId","data-v-6100ce12"]]);export{us as default};
