import{d as re,b as d,o as ce,f as n,g as l,i as e,L as Q,R as H,p as k,l as $,t as i,F as Z,k as ee,m as de,v as Ie,G as Te,H as xe,_ as ue,u as Se,a as Ce,h as le,j as X,A as Ae,s as _,M as Ue,U as j,w as We}from"./index-vYzfv9NW.js";import"./request-DzKJqaQU.js";import{r as z,i as Me,a as Ve}from"./indoor5-EE3fvsa8.js";import{useChatHistoryStore as qe}from"./chatHistory-DGVlMt2a.js";const Oe="/muguzhuangyuan/assets/indoor4-D7gg6sht.jpg",Ne={class:"dify-chat-widget"},Ee={class:"chat-container"},Le={class:"chat-header"},Pe={class:"ai-avatar-section"},ze={class:"ai-avatar-circle"},Be=["src"],Fe={class:"ai-info-section"},Ke={class:"connection-status"},je={class:"status-text"},He={key:0,class:"message-avatar"},Ye=["src"],Ge={class:"message-content"},Je=["innerHTML"],Qe={class:"message-time"},Xe={key:0,class:"message assistant typing-indicator"},Ze={class:"message-avatar"},et=["src"],tt={class:"chat-input"},st={class:"input-container"},at=["disabled"],ot=["disabled"],it=re({__name:"DifyChatWidgetNew",props:{containerId:{default:"dify-chat-container"},autoLoad:{type:Boolean,default:!0}},emits:["loaded","error","message"],setup(te,{expose:x,emit:Y}){const G=te,A=Y,f=d([]),M=d(""),b=d(!1),m=d(!1),v=d(""),p=d(null),w={apiKey:"app-iB6nMxbyCqXQPwHConOuiImb",baseUrl:"/api/dify/v1",chatUrl:"/api/dify/v1/chat-messages"},V=async()=>{try{console.log("æ­£åœ¨è¿æ¥DifyæœåŠ¡..."),console.log("ä½¿ç”¨API Key:",w.apiKey),console.log("Base URL:",w.baseUrl);const h=await fetch(`${w.baseUrl}/parameters`,{method:"GET",headers:{Authorization:`Bearer ${w.apiKey}`,"Content-Type":"application/json"}});if(console.log("åŸºç¡€è¿æ¥æµ‹è¯•çŠ¶æ€:",h.status),h.ok){const r=await fetch(w.chatUrl,{method:"POST",headers:{Authorization:`Bearer ${w.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:{},query:"hello",response_mode:"blocking",user:"test-user"})});if(r.ok)m.value=!0,U(),A("loaded");else{const g=await r.text();throw new Error(`èŠå¤©APIé”™è¯¯: ${r.status}`)}}else throw new Error(`åŸºç¡€è¿æ¥å¤±è´¥: ${h.status}`)}catch(h){m.value=!1,A("error",`æ— æ³•è¿æ¥åˆ°DifyæœåŠ¡: ${h instanceof Error?h.message:String(h)}`),U()}},U=()=>{const h={id:Date.now(),type:"assistant",content:"æ‚¨å¥½ï¼æˆ‘æ˜¯æ™®æ™®AIåŠ©æ‰‹ï¼Œæ‚¨çš„ä¸“å±é€‰æˆ¿é¡¾é—®ã€‚æˆ‘å¯ä»¥æ ¹æ®æ‚¨çš„éœ€æ±‚ä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„æˆ¿é—´ã€‚è¯·å‘Šè¯‰æˆ‘æ‚¨çš„éœ€æ±‚ï¼Œæ¯”å¦‚é¢„ç®—ã€æˆ¿å‹åå¥½ç­‰ã€‚",timestamp:new Date().toISOString()};f.value.push(h),q()},B=()=>{v.value="",f.value=[],U()},W=async()=>{if(!M.value.trim()||!m.value||b.value)return;const h=M.value.trim(),r={id:Date.now(),type:"user",content:h,timestamp:new Date().toISOString()};f.value.push(r),M.value="",q(),b.value=!0;try{if(!m.value)throw new Error("DifyæœåŠ¡æœªè¿æ¥");const g={inputs:{},query:h,response_mode:"blocking",user:"user-"+Date.now()};v.value&&v.value.trim()&&(g.conversation_id=v.value);const R=await fetch(w.chatUrl,{method:"POST",headers:{Authorization:`Bearer ${w.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(g)});if(R.ok){const S=await R.json();S.conversation_id&&(v.value=S.conversation_id);const N={id:Date.now()+1,type:"assistant",content:S.answer||"æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰ç†è§£æ‚¨çš„é—®é¢˜ï¼Œè¯·é‡æ–°æè¿°ã€‚",timestamp:new Date().toISOString()};f.value.push(N),A("message",{type:"ai",content:N.content,timestamp:N.timestamp})}else{const S=await R.text();if(R.status===404&&S.includes("Conversation Not Exists")){console.log("ä¼šè¯ä¸å­˜åœ¨ï¼Œé‡ç½®ä¼šè¯IDå¹¶é‡è¯•"),v.value="";try{const L=await fetch(w.chatUrl,{method:"POST",headers:{Authorization:`Bearer ${w.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:{},query:h,response_mode:"blocking",user:"user-"+Date.now()})});if(L.ok){const P=await L.json();console.log("é‡è¯•æˆåŠŸï¼ŒDifyå“åº”æ•°æ®:",P),P.conversation_id&&(v.value=P.conversation_id,console.log("æ–°ä¼šè¯ID:",v.value));const F={id:Date.now()+1,type:"assistant",content:P.answer||"æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰ç†è§£æ‚¨çš„é—®é¢˜ï¼Œè¯·é‡æ–°æè¿°ã€‚",timestamp:new Date().toISOString()};f.value.push(F),A("message",{type:"ai",content:F.content,timestamp:F.timestamp});return}}catch(L){console.error("é‡è¯•å¤±è´¥:",L)}}const N={id:Date.now()+1,type:"assistant",content:`æŠ±æ­‰ï¼ŒAIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼ˆé”™è¯¯ä»£ç ï¼š${R.status}ï¼‰ã€‚è¯·ç¨åå†è¯•æˆ–è”ç³»ç®¡ç†å‘˜ã€‚`,timestamp:new Date().toISOString()};f.value.push(N)}}catch(g){console.error("å‘é€æ¶ˆæ¯å¤±è´¥:",g);const R={id:Date.now()+1,type:"assistant",content:`æŠ±æ­‰ï¼Œå‘é€æ¶ˆæ¯æ—¶å‡ºç°é”™è¯¯ï¼š${g instanceof Error?g.message:String(g)}ã€‚è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åå†è¯•ã€‚`,timestamp:new Date().toISOString()};f.value.push(R)}finally{b.value=!1,q()}},q=()=>{xe(()=>{p.value&&(p.value.scrollTop=p.value.scrollHeight)})},E=h=>new Date(h).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),O=h=>{if(!h)return"";console.log("åŸå§‹æ¶ˆæ¯å†…å®¹:",h);let r=h;return r=r.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(g,R,S)=>(console.log(`Markdowné“¾æ¥è½¬æ¢: "${R}" â†’ "${S}"`),`<a href="${S}" target="_blank" rel="noopener noreferrer" class="message-link">${R}</a>`)),r=r.replace(/\n/g,"<br>"),console.log("æœ€ç»ˆæ ¼å¼åŒ–å†…å®¹:",r),r};return ce(()=>{G.autoLoad&&setTimeout(()=>{V()},1e3)}),x({initializeDify:V,isDifyConnected:()=>m.value,sendMessage:W}),(h,r)=>(l(),n("div",Ne,[e("div",Ee,[e("div",Le,[e("div",Pe,[e("div",ze,[e("video",{src:Q(H),alt:"æ™®æ™®AIåŠ©æ‰‹",class:"ai-character-video",autoplay:"",loop:"",muted:"",playsinline:""},null,8,Be),e("div",{class:k(["status-indicator",{online:m.value}])},null,2)]),e("div",Fe,[r[1]||(r[1]=e("h3",{class:"ai-name"},"æ™®æ™® AIåŠ©æ‰‹",-1)),r[2]||(r[2]=e("p",{class:"ai-title"},"ä¸“å±é€‰æˆ¿é¡¾é—®",-1)),e("div",Ke,[e("span",{class:k(["status-dot",{online:m.value}])},null,2),e("span",je,i(m.value?"åœ¨çº¿":"è¿æ¥ä¸­..."),1),m.value?$("",!0):(l(),n("button",{key:0,onClick:V,class:"reconnect-btn"}," é‡æ–°è¿æ¥ ")),m.value&&v.value?(l(),n("button",{key:1,onClick:B,class:"reset-btn"}," æ–°å¯¹è¯ ")):$("",!0)])])])]),e("div",{class:"chat-messages",ref_key:"chatMessages",ref:p},[(l(!0),n(Z,null,ee(f.value,g=>(l(),n("div",{key:g.id,class:k(["message",g.type])},[g.type==="assistant"?(l(),n("div",He,[e("video",{src:Q(H),class:"avatar-video",autoplay:"",loop:"",muted:"",playsinline:""},null,8,Ye)])):$("",!0),e("div",Ge,[e("div",{class:"message-text",innerHTML:O(g.content)},null,8,Je),e("div",Qe,i(E(g.timestamp)),1)])],2))),128)),b.value?(l(),n("div",Xe,[e("div",Ze,[e("video",{src:Q(H),class:"avatar-video",autoplay:"",loop:"",muted:"",playsinline:""},null,8,et)]),r[3]||(r[3]=e("div",{class:"message-content"},[e("div",{class:"typing-dots"},[e("span"),e("span"),e("span")])],-1))])):$("",!0)],512),e("div",tt,[e("div",st,[de(e("input",{"onUpdate:modelValue":r[0]||(r[0]=g=>M.value=g),onKeypress:Te(W,["enter"]),placeholder:"è¯·è¾“å…¥æ‚¨çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šæ¨èä¾¿å®œçš„æˆ¿é—´...",class:"message-input",disabled:!m.value||b.value},null,40,at),[[Ie,M.value]]),e("button",{onClick:W,class:"send-button",disabled:!M.value.trim()||!m.value||b.value},r[4]||(r[4]=[e("i",{class:"fas fa-paper-plane"},null,-1)]),8,ot)])])])]))}}),nt=ue(it,[["__scopeId","data-v-f7b16ef6"]]),lt={class:"ai-room-selection"},rt={class:"main-content"},ct={class:"container"},dt={class:"content-grid"},ut={class:"left-panel"},pt={class:"ai-assistant"},ht={class:"ai-header"},ft={class:"ai-avatar"},mt=["src"],vt={key:0,class:"speaking-indicator"},gt={class:"ai-info"},bt={class:"ai-status"},wt={class:"ai-controls"},yt={class:"control-buttons"},_t=["disabled"],kt={key:0,class:"fas fa-microphone"},Dt={key:1,class:"fas fa-stop"},$t=["disabled"],Rt={key:0,class:"voice-indicator"},It={key:1,class:"voice-result"},Tt={class:"voice-content"},xt={key:0,class:"count"},St={class:"rooms-list"},Ct={key:0,class:"empty-state"},At={key:1,class:"rooms-container"},Ut={class:"recommendations-header"},Wt={class:"recommendations-count"},Mt=["onClick"],Vt=["src","alt"],qt={class:"room-info"},Ot={key:0,class:"recommend-reason"},Nt={class:"room-meta"},Et={class:"price"},Lt={class:"rating"},Pt={class:"order-details"},zt={key:0,class:"order-status"},Bt={class:"order-content"},Ft={key:0,class:"order-info"},Kt={class:"order-header"},jt={class:"order-number"},Ht={class:"value"},Yt={class:"order-date"},Gt={class:"value"},Jt={class:"order-room-info"},Qt={class:"room-image-container"},Xt=["src"],Zt={class:"room-details"},es={class:"stay-dates"},ts={class:"date-item"},ss={class:"date-item"},as={class:"guest-info"},os={class:"guest-item"},is={class:"value"},ns={class:"guest-item"},ls={class:"value"},rs={class:"order-summary"},cs={class:"summary-item"},ds={class:"value"},us={class:"summary-item total"},ps={class:"value price"},hs={key:1,class:"empty-state"},fs={class:"right-panel"},ms={class:"chat-container"},vs={class:"chat-header"},gs={class:"chat-status"},bs={class:"dify-chat-wrapper"},ws={class:"all-rooms-section"},ys={class:"section-header"},_s={class:"room-filters"},ks={class:"view-toggle"},Ds={class:"rooms-content"},$s={key:0,class:"loading-state"},Rs={key:1,class:"empty-state"},Is=["onClick"],Ts={class:"room-image-container"},xs=["src","alt"],Ss={class:"room-price-badge"},Cs={class:"room-details"},As={class:"room-header"},Us={class:"room-name"},Ws={key:0,class:"room-rating"},Ms={class:"room-type"},Vs={class:"room-features"},qs={key:0,class:"feature"},Os={class:"feature"},Ns={key:1,class:"feature"},Es=["href","onClick"],Ls={class:"room-footer"},Ps={class:"room-category"},zs=["disabled","onClick"],Bs=re({__name:"AIRoomSelectionView",setup(te){Se(),Ce(),qe();const x=d(!1),Y=d(!1),G=d("idle"),A=d(H),f=d([]);d(0);const M=d(),b=d(!1),m=d(""),v=d(null),p=d(null);d([]);const w=[{id:"107",code:"107",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹ï¼ˆå•äººé—´ï¼‰",price:456,rating:4.8,status:"available",image:j,floor:"1æ¥¼",direction:"å—å‘å¸¦é˜³å°",type:"å•äººé—´",features:["å—å‘é˜³å°","èŒ¶å›­æ™¯è§‚"]},{id:"108",code:"108",name:"1æ¥¼èŒ¶å›­æˆ¿",price:156,rating:4.6,status:"available",image:j,floor:"1æ¥¼",direction:"å—å‘é˜³å…‰",type:"å•äººé—´",features:["æ€§ä»·æ¯”ä¹‹é€‰","èŒ¶å›­æ™¯è§‚"]},{id:"201",code:"201",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹ï¼ˆå•äººé—´ï¼‰",price:268,rating:4.7,status:"available",image:z,floor:"2æ¥¼",direction:"å—å‘å¸¦é˜³å°",type:"å•äººé—´",features:["å—å‘é˜³å°","é›¨æ—æ™¯è§‚"]},{id:"202",code:"202",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",price:486,rating:4.9,status:"available",image:z,floor:"2æ¥¼",direction:"å—å‘é‡‡å…‰",type:"åŒäººé—´",features:["å«åŒæ—©","èŒ¶å›­æ™¯è§‚"]},{id:"204",code:"204",name:"å±±æ™¯é˜³å°å—å‘æˆ¿",price:999,rating:4.9,status:"available",image:z,floor:"2æ¥¼",direction:"å—å‘é˜³å°",type:"åŒäººé—´",features:["å«åŒæ—©","ç‰¹è‰²å±±æ™¯é˜³å°","é›¨æ—æ™¯è§‚"]},{id:"206",code:"206",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",price:654,rating:4.8,status:"available",image:z,floor:"2æ¥¼",direction:"è¥¿å‘è§‚æ™¯",type:"åŒäººé—´",features:["å«åŒæ—©","é…èŒ¶å…·å¥—è£…"]},{id:"207",code:"207",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹ï¼ˆåŒäººé—´ï¼‰",price:186,rating:4.7,status:"available",image:z,floor:"2æ¥¼",direction:"ä¸œå‘å¸¦é˜³å°",type:"åŒäººé—´",features:["ä¸œå‘é˜³å°","é›¨æ—æ™¯è§‚"]},{id:"208",code:"208",name:"èŒ¶å›­æ™¯è§‚åŒ—å‘æˆ¿",price:198,rating:4.6,status:"available",image:z,floor:"2æ¥¼",direction:"åŒ—å‘",type:"å•äººé—´",features:["å±±æ™¯é˜³å°","æ—©é¤","èŒ¶å›­æ™¯è§‚"]},{id:"301",code:"301",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹ï¼ˆåŒäººé—´ï¼‰",price:486,rating:4.8,status:"available",image:Me,floor:"3æ¥¼",direction:"å—å‘",type:"åŒäººé—´",features:["èŒ¶å…·å¥—è£…","å«æ—©é¤","èŒ¶å›­æ™¯è§‚"]},{id:"302",code:"302",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹ï¼ˆåŒäººé—´ï¼‰",price:688,rating:4.8,status:"available",image:Oe,floor:"3æ¥¼",direction:"å—å‘",type:"åŒäººé—´",features:["èŒ¶å›­æ™¯è§‚","é›¨æ—æ™¯è§‚"]},{id:"303",code:"303",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹ï¼ˆäº²å­æˆ¿ï¼‰",price:1088,rating:4.9,status:"available",image:Ve,floor:"3æ¥¼",direction:"å—å‘",type:"äº²å­æˆ¿",features:["å±±æ™¯é˜³å°","å«æ—©é¤","é€‚åˆå®¶åº­"]}],V=d(),U=d(),B=d([]),W=d([]),q=d(!1),E=d("all"),O=d("grid"),h=()=>{console.log("AIè§†é¢‘å¼€å§‹åŠ è½½:",A.value)},r=()=>{console.log("AIè§†é¢‘åŠ è½½å®Œæˆ"),V.value&&V.value.play().catch(s=>{console.error("AIè§†é¢‘æ’­æ”¾å¤±è´¥:",s)})},g=s=>{console.error("AIè§†é¢‘åŠ è½½é”™è¯¯:",s),console.error("è§†é¢‘æº:",A.value)};ce(()=>{R(),S(),se(),console.log("å½“å‰è§†é¢‘æº:",A.value)});const R=()=>{console.log("AIåŠ©æ‰‹åˆå§‹åŒ–å®Œæˆï¼Œä½¿ç”¨Difyç»„ä»¶")},S=async()=>{await N()},N=async()=>{q.value=!0;try{const s=[{id:1,code:"å±•è§ˆå…",name:"å±•è§ˆå…",category:"å±•è§ˆå…",floor:"1æ¥¼",height:"2438",hasWindow:!1,windowDirection:"æ— ",roomType:"å±•è§ˆå…",price:0,seat:0,rating:0,status:"unavailable",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",vrUrl:"",recommendReason:"å±•è§ˆå…æš‚ä¸å¼€æ”¾é¢„è®¢"},{id:2,code:"105",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"1æ¥¼",height:"2438",hasWindow:!1,windowDirection:"æ— ",roomType:"å•äººé—´",price:256,seat:1,rating:4.5,status:"available",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"é›¨æ—æ™¯è§‚ï¼Œç¯å¢ƒä¼˜ç¾ï¼Œé€‚åˆç‹¬è‡ªæ—…è¡Œ"},{id:3,code:"104",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"1æ¥¼",height:"2438",hasWindow:!1,windowDirection:"æ— ",roomType:"å•äººé—´",price:255,seat:1,rating:4.5,status:"available",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"æ€§ä»·æ¯”é«˜ï¼Œç¯å¢ƒèˆ’é€‚"},{id:4,code:"103",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"1æ¥¼",height:"2438",hasWindow:!1,windowDirection:"æ— ",roomType:"å•äººé—´",price:333,seat:1,rating:4.6,status:"available",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"é«˜è¯„åˆ†æˆ¿é—´ï¼ŒæœåŠ¡ä¼˜è´¨"},{id:5,code:"102",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å¤§åºŠæˆ¿",floor:"1æ¥¼",height:"2438",hasWindow:!0,windowDirection:"ä¸œ",roomType:"å¤§åºŠæˆ¿",price:888,seat:2,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1566665797739-1674de7a421a?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"è±ªåå¤§åºŠæˆ¿ï¼Œå¸¦çª—æˆ·ï¼Œè§†é‡å¼€é˜”"},{id:6,code:"106",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"1æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"å•äººé—´",price:666,seat:1,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"å—å‘æˆ¿é—´ï¼Œé‡‡å…‰å……è¶³ï¼Œç¯å¢ƒä¼˜é›…"},{id:7,code:"107",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"1æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"å•äººé—´",price:456,seat:1,rating:4.6,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"ä¸­ç­‰ä»·ä½ï¼Œæ€§ä»·æ¯”ä¸é”™"},{id:8,code:"108",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"1æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"å•äººé—´",price:156,seat:1,rating:4.4,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"ç»æµå®æƒ ï¼Œé€‚åˆé¢„ç®—æœ‰é™çš„å®¢äºº"},{id:9,code:"101",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"1æ¥¼",height:"2438",hasWindow:!0,windowDirection:"ä¸œ",roomType:"å•äººé—´",price:18,seat:1,rating:4.2,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"è¶…å€¼ç‰¹ä»·æˆ¿ï¼Œæ€§ä»·æ¯”æé«˜"},{id:10,code:"211",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"äº²å­æˆ¿",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"è¥¿",roomType:"äº²å­æˆ¿",price:419,seat:3,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"äº²å­æˆ¿ï¼Œé€‚åˆå®¶åº­å‡ºè¡Œï¼Œç©ºé—´å®½æ•"},{id:11,code:"212",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"äº²å­æˆ¿",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"è¥¿",roomType:"äº²å­æˆ¿",price:418,seat:3,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:12,code:"210",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"åŒ—",roomType:"å•äººé—´",price:189,seat:1,rating:4.4,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:13,code:"209",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"åŒ—",roomType:"å•äººé—´",price:418,seat:1,rating:4.6,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:14,code:"208",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"åŒ—",roomType:"å•äººé—´",price:18,seat:1,rating:4.2,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:15,code:"207",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å¤§åºŠæˆ¿",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"ä¸œ",roomType:"å¤§åºŠæˆ¿",price:186,seat:2,rating:4.5,status:"available",image:"https://images.unsplash.com/photo-1566665797739-1674de7a421a?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:16,code:"206",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"åŒäººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"è¥¿",roomType:"åŒäººé—´",price:654,seat:2,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1618773928121-c32242e63f39?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:17,code:"205",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"åŒäººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"ä¸œ",roomType:"åŒäººé—´",price:789,seat:2,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1618773928121-c32242e63f39?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:18,code:"204",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"å•äººé—´",price:999,seat:1,rating:4.9,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:19,code:"203",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"å•äººé—´",price:889,seat:1,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:20,code:"202",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å•äººé—´",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"å•äººé—´",price:48,seat:1,rating:4.3,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:21,code:"201",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"å¤§åºŠæˆ¿",floor:"2æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"å¤§åºŠæˆ¿",price:19,seat:2,rating:4.1,status:"available",image:"https://images.unsplash.com/photo-1566665797739-1674de7a421a?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:22,code:"301",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"äº²å­æˆ¿",floor:"3æ¥¼",height:"2438",hasWindow:!1,windowDirection:"æ— ",roomType:"äº²å­æˆ¿",price:486,seat:4,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:23,code:"302",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"äº²å­æˆ¿",floor:"3æ¥¼",height:"2438",hasWindow:!1,windowDirection:"æ— ",roomType:"äº²å­æˆ¿",price:1088,seat:4,rating:4.9,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:24,code:"303",name:"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",category:"åŒäººé—´",floor:"3æ¥¼",height:"2438",hasWindow:!0,windowDirection:"å—",roomType:"åŒäººé—´",price:0,seat:2,rating:4.6,status:"unavailable",image:"https://images.unsplash.com/photo-1618773928121-c32242e63f39?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"}];B.value=s,W.value=s}catch(s){console.error("åŠ è½½æˆ¿é—´æ•°æ®å¤±è´¥:",s)}finally{q.value=!1}},L=()=>{E.value==="all"?W.value=B.value.filter(s=>s.code!=="å±•è§ˆå…"):W.value=B.value.filter(s=>{if(s.code==="å±•è§ˆå…")return!1;switch(E.value){case"single":return s.roomType==="å•äººé—´";case"double":return s.roomType==="åŒäººé—´"||s.roomType==="å¤§åºŠæˆ¿";case"family":return s.roomType==="äº²å­æˆ¿";case"suite":return s.category.includes("å¥—æˆ¿")||s.category.includes("è±ªå");default:return!0}})},P=()=>{x.value=!0},F=s=>{x.value=!1},J=s=>{if(console.log("é€‰æ‹©æˆ¿é—´:",s),s.vrUrl&&s.vrUrl.trim()!=="")console.log("è·³è½¬åˆ°VRé“¾æ¥:",s.vrUrl),window.open(s.vrUrl,"_blank");else{const t="https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00";console.log("ä½¿ç”¨é»˜è®¤VRé“¾æ¥:",t),window.open(t,"_blank")}},pe=()=>{console.log("æ¸…é™¤æ‰€æœ‰æ¨èæˆ¿é—´"),f.value=[]};d("æˆ‘ä¼šæ ¹æ®æ‚¨çš„éœ€æ±‚ä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„æˆ¿é—´");const se=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const s=window.webkitSpeechRecognition||window.SpeechRecognition;v.value=new s,v.value.continuous=!1,v.value.interimResults=!1,v.value.lang="zh-CN",v.value.onresult=t=>{const a=t.results[0][0].transcript;m.value=a,b.value=!1},v.value.onerror=t=>{console.error("è¯­éŸ³è¯†åˆ«é”™è¯¯:",t.error),b.value=!1},v.value.onend=()=>{b.value=!1}}},he=()=>{v.value||se(),b.value?(v.value.stop(),b.value=!1):(m.value="",v.value.start(),b.value=!0)},fe=()=>{m.value&&U.value&&(U.value.sendMessage(m.value),m.value="")},me=()=>{m.value=""},ve=()=>{U.value&&U.value.resetConversation(),f.value=[],p.value=null},ge=s=>{const t=[];return console.log("ğŸ” è§£ææˆ¿é—´æ¨èï¼Œæ¶ˆæ¯å†…å®¹:",s),[/(\d{3})å·?æˆ¿/g,/æˆ¿é—´å·[ï¼š:]\s*(\d{3})/g,/æˆ¿é—´\s*(\d{3})/g,/(\d{3})\s*æˆ¿é—´/g,/æ¨è.*?(\d{3})å·?æˆ¿/g,/å»ºè®®.*?(\d{3})å·?æˆ¿/g,/é€‚åˆ.*?(\d{3})å·?æˆ¿/g].forEach(I=>{const u=s.match(I);u&&u.forEach(T=>{const y=T.match(/\d{3}/)?.[0];if(y){if(t.find(c=>c.code===y))return;const D=w.find(c=>c.code===y);if(D)t.push({...D,recommendReason:oe(s,y)});else{const c=be(y,s);t.push(c)}}})}),t},be=(s,t)=>{const a=ae(t,s);return{id:`template-${s}`,code:s,name:a.name||`${s}å·æˆ¿`,price:a.price||0,rating:4.5,status:"available",image:j,floor:a.floor||"æœªçŸ¥æ¥¼å±‚",direction:a.direction||"æœå‘æœªçŸ¥",type:a.type||"æ ‡å‡†é—´",category:a.category||"æ ‡å‡†æˆ¿",features:a.features||["åŸºç¡€è®¾æ–½"],vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:oe(t,s)}},ae=(s,t)=>{const a={},I=[new RegExp(`${t}.*?(\\d+)å…ƒ`,"i"),new RegExp(`${t}.*?Â¥(\\d+)`,"i"),new RegExp("ä»·æ ¼.*?(\\d+)","i"),new RegExp("æ€»è´¹ç”¨.*?Â¥(\\d+)","i"),new RegExp("æ€»è®¡.*?(\\d+)","i"),new RegExp("Â¥(\\d+)","i"),new RegExp("(\\d+)å…ƒ","i")];for(const c of I){const o=s.match(c);if(o&&o[1]){a.price=parseInt(o[1]);break}}const u=[/å•äººé—´|åŒäººé—´|å¤§åºŠæˆ¿|æ ‡å‡†é—´|è±ªåæˆ¿|å¥—æˆ¿|äº²å­æˆ¿|æµ·æ™¯æˆ¿|å±±æ™¯æˆ¿|å•†åŠ¡æˆ¿/i,/è˜‘è‡å±‹|æ™¯è§‚æˆ¿|é˜³å°æˆ¿|èŠ±å›­æˆ¿|æ¹–æ™¯æˆ¿|æ£®æ—æˆ¿/i];for(const c of u){const o=s.match(c);if(o){a.type=o[0],s.includes(t)?a.name=`${t}å·${o[0]}`:a.name=`${t}å·æˆ¿`;break}}if(!a.type){const c=s.match(new RegExp(`${t}[^ï¼Œã€‚ï¼ï¼Ÿ]*`,"i"));c&&(a.name=c[0]||`${t}å·æˆ¿`)}const T=s.match(/(\d+)æ¥¼/i);T&&(a.floor=`${T[1]}æ¥¼`);const y=s.match(/(å—å‘|åŒ—å‘|ä¸œå‘|è¥¿å‘|æœå—|æœåŒ—|æœä¸œ|æœè¥¿)/i);y&&(a.direction=y[1]);const D=[];return s.includes("é˜³å°")&&D.push("é˜³å°"),(s.includes("æ™¯è§‚")||s.includes("æ™¯è‰²")||s.includes("æµ·æ™¯")||s.includes("å±±æ™¯"))&&D.push("æ™¯è§‚æˆ¿"),s.includes("æ—©é¤")&&D.push("å«æ—©é¤"),(s.includes("WiFi")||s.includes("wifi"))&&D.push("å…è´¹WiFi"),s.includes("ç©ºè°ƒ")&&D.push("ç©ºè°ƒ"),s.includes("ç”µè§†")&&D.push("ç”µè§†"),D.length>0&&(a.features=D),a},oe=(s,t)=>{const a=[new RegExp(`${t}.*?å› ä¸º(.{10,50})`,"i"),new RegExp(`æ¨è${t}.*?(.{10,50})`,"i"),new RegExp(`${t}.*?é€‚åˆ(.{10,50})`,"i")];for(const I of a){const u=s.match(I);if(u&&u[1])return u[1].trim()}return"æ ¹æ®æ‚¨çš„éœ€æ±‚æ¨è"},we=s=>{const t={},a=[/(\d{3})å·?æˆ¿/,/æˆ¿é—´å·[ï¼š:]\s*(\d{3})/,/æˆ¿é—´\s*(\d{3})/,/(\d{3})\s*æˆ¿é—´/,/é¢„è®¢.*?(\d{3})/,/é€‰æ‹©.*?(\d{3})/];for(const c of a){const o=s.match(c);if(o){t.roomCode=o[1];const C=w.find(K=>K.code===o[1]);if(C)t.roomName=C.name,t.price=C.price;else{const K=ae(s,o[1]);t.roomName=K.name||`${o[1]}å·æˆ¿`,t.price=K.price||0}break}}const I=[/(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥/,/(\d{4})-(\d{1,2})-(\d{1,2})/,/(\d{1,2})æœˆ(\d{1,2})æ—¥/,/å…¥ä½.*?(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥/,/å…¥ä½.*?(\d{4})-(\d{1,2})-(\d{1,2})/,/å…¥ä½æ—¶é—´.*?(\d{1,2})æœˆ(\d{1,2})æ—¥/,/(\d{1,2})\/(\d{1,2})\/(\d{4})/,/7æœˆ(\d{1,2})æ—¥/,/(\d{1,2})æœˆ(\d{1,2})å·/];for(const c of I){const o=s.match(c);if(o){if(o.length===4)t.checkInDate=`${o[1]}-${o[2].padStart(2,"0")}-${o[3].padStart(2,"0")}`;else if(o.length===3){const C=new Date().getFullYear();t.checkInDate=`${C}-${o[1].padStart(2,"0")}-${o[2].padStart(2,"0")}`}else if(c.source.includes("7æœˆ")){const C=new Date().getFullYear();t.checkInDate=`${C}-07-${o[1].padStart(2,"0")}`}break}}const u=[/é€€æˆ¿.*?(\d{1,2})æœˆ(\d{1,2})æ—¥/,/é€€æˆ¿æ—¶é—´.*?(\d{1,2})æœˆ(\d{1,2})æ—¥/,/7æœˆ(\d{1,2})æ—¥.*?é€€æˆ¿/,/é€€æˆ¿.*?7æœˆ(\d{1,2})æ—¥/];for(const c of u){const o=s.match(c);if(o){const C=new Date().getFullYear();c.source.includes("7æœˆ")?t.checkOutDate=`${C}-07-${o[1].padStart(2,"0")}`:t.checkOutDate=`${C}-${o[1].padStart(2,"0")}-${o[2].padStart(2,"0")}`;break}}const T=[/1[3-9]\d{9}/,/æ‰‹æœº[ï¼š:]\s*(1[3-9]\d{9})/,/ç”µè¯[ï¼š:]\s*(1[3-9]\d{9})/,/è”ç³»æ–¹å¼[ï¼š:]\s*(1[3-9]\d{9})/];for(const c of T){const o=s.match(c);if(o){t.phone=o[1]||o[0];break}}const y=[/(\d+)å…ƒ/,/æ€»è®¡[ï¼š:]\s*(\d+)/,/è´¹ç”¨[ï¼š:]\s*(\d+)/,/ä»·æ ¼[ï¼š:]\s*(\d+)/,/Â¥(\d+)/];for(const c of y){const o=s.match(c);if(o){t.totalAmount=parseInt(o[1]);break}}const D=[/å§“å[ï¼š:]\s*([^\s\d]{2,4})/,/å®¢äºº[ï¼š:]\s*([^\s\d]{2,4})/,/é¢„è®¢äºº[ï¼š:]\s*([^\s\d]{2,4})/];for(const c of D){const o=s.match(c);if(o){t.guestName=o[1];break}}return console.log("ğŸ“Š è§£æè®¢å•ç»“æœ:",t),t},ye=s=>{if(console.log("æ”¶åˆ°Difyæ¶ˆæ¯:",s),s.type==="ai"&&s.content){const t=ge(s.content);if(t.length>0){const u=f.value.map(y=>y.code),T=t.filter(y=>!u.includes(y.code));T.length>0?(f.value=[...f.value,...T],console.log("æ·»åŠ æ–°æ¨èæˆ¿é—´:",T),console.log("å½“å‰æ‰€æœ‰æ¨èæˆ¿é—´:",f.value)):console.log("æ²¡æœ‰æ–°çš„æ¨èæˆ¿é—´ï¼Œæ‰€æœ‰æˆ¿é—´éƒ½å·²å­˜åœ¨")}if(["é¢„è®¢æˆåŠŸ","è®¢å•è¯¦æƒ…","é¢„è®¢ç¡®è®¤","è®¢å•ç¡®è®¤","é¢„è®¢å®Œæˆ","å·²é¢„è®¢","é¢„è®¢ä¿¡æ¯","è®¢å•ç”Ÿæˆ","ç¡®è®¤é¢„è®¢","é¢„è®¢å•","è®¢å•åˆ›å»º","é¢„è®¢è®°å½•"].some(u=>s.content.includes(u))){const u=we(s.content);if(u.roomCode){const T={orderNumber:"ORD"+Date.now(),roomCode:u.roomCode,roomName:u.roomName||"é›¨æ—æ™¯è§‚è±ªåè˜‘è‡å±‹",checkInDate:u.checkInDate||ie(),checkOutDate:ke(u.checkInDate||ie()),totalAmount:u.totalAmount||u.price||48,phone:u.phone||"å¾…è¡¥å……",guestName:u.guestName||"å¾…è¡¥å……",status:"confirmed",createdAt:new Date().toISOString()};p.value=T}}}},_e=s=>{if(console.log("ç‚¹å‡»VRé“¾æ¥:",s),!s||s.trim()===""){console.error("VRé“¾æ¥ä¸ºç©º"),alert("VRé“¾æ¥æ— æ•ˆï¼Œè¯·è”ç³»å®¢æœ");return}if(!s.startsWith("http://")&&!s.startsWith("https://")){console.error("VRé“¾æ¥æ ¼å¼æ— æ•ˆ:",s),alert("VRé“¾æ¥æ ¼å¼æ— æ•ˆï¼Œè¯·è”ç³»å®¢æœ");return}console.log("æ­£åœ¨æ‰“å¼€VRé“¾æ¥:",s)},ie=()=>{const s=new Date;return s.setDate(s.getDate()+1),s.toISOString().split("T")[0]},ke=s=>{const t=new Date(s);return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]},De=s=>w.find(a=>a.code===s)?.image||j,ne=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),$e=()=>{p.value&&(p.value=null)},Re=()=>{p.value};return(s,t)=>(l(),n("div",lt,[le(Ae),t[46]||(t[46]=X('<div class="page-header" data-v-d3dd870c><div class="container" data-v-d3dd870c><h1 class="page-title" data-v-d3dd870c><span class="ai-icon" data-v-d3dd870c>ğŸŒ³</span> AIæ™ºèƒ½é€‰æˆ¿ </h1><p class="page-subtitle" data-v-d3dd870c>ä¸æ™®æ™®AIåŠ©æ‰‹å¯¹è¯ï¼Œæ‰¾åˆ°æœ€é€‚åˆæ‚¨çš„æˆ¿é—´</p></div></div>',1)),e("div",rt,[e("div",ct,[e("div",dt,[e("div",ut,[e("div",pt,[e("div",ht,[e("div",ft,[e("video",{ref_key:"aiVideo",ref:V,src:A.value,alt:"æ™®æ™®AIåŠ©æ‰‹",class:k(["ai-character",G.value]),autoplay:"",loop:"",muted:"",playsinline:"",onLoadstart:h,onLoadeddata:r,onError:g},null,42,mt),Y.value?(l(),n("div",vt,t[3]||(t[3]=[e("div",{class:"wave"},null,-1),e("div",{class:"wave"},null,-1),e("div",{class:"wave"},null,-1)]))):$("",!0)]),e("div",gt,[t[4]||(t[4]=e("h3",null,"æ™®æ™® AIåŠ©æ‰‹",-1)),t[5]||(t[5]=e("p",null,"ä¸“å±é€‰æˆ¿é¡¾é—®",-1)),e("div",bt,[e("span",{class:k(["status-dot",{online:x.value}])},null,2),e("span",null,i(x.value?"åœ¨çº¿":"ç¦»çº¿"),1)])])]),e("div",wt,[e("div",yt,[e("button",{class:k(["control-btn voice-btn",{active:b.value}]),onClick:he,disabled:!x.value},[b.value?(l(),n("i",Dt)):(l(),n("i",kt)),e("span",null,i(b.value?"åœæ­¢å½•éŸ³":"è¯­éŸ³è¾“å…¥"),1)],10,_t),e("button",{class:"control-btn reset-btn",onClick:ve,disabled:!x.value},t[6]||(t[6]=[e("i",{class:"fas fa-redo-alt"},null,-1),e("span",null,"é‡ç½®å¯¹è¯",-1)]),8,$t)]),b.value?(l(),n("div",Rt,t[7]||(t[7]=[X('<div class="voice-wave" data-v-d3dd870c><div class="wave-bar" data-v-d3dd870c></div><div class="wave-bar" data-v-d3dd870c></div><div class="wave-bar" data-v-d3dd870c></div><div class="wave-bar" data-v-d3dd870c></div><div class="wave-bar" data-v-d3dd870c></div></div><p class="voice-text" data-v-d3dd870c>æ­£åœ¨è†å¬æ‚¨çš„è¯­éŸ³...</p>',2)]))):$("",!0),m.value?(l(),n("div",It,[t[10]||(t[10]=e("p",{class:"voice-label"},"è¯†åˆ«ç»“æœï¼š",-1)),e("p",Tt,i(m.value),1),e("div",{class:"voice-actions"},[e("button",{class:"send-voice-btn",onClick:fe},t[8]||(t[8]=[e("i",{class:"fas fa-paper-plane"},null,-1),_(" å‘é€ ")])),e("button",{class:"clear-voice-btn",onClick:me},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1),_(" æ¸…é™¤ ")]))])])):$("",!0)])]),e("div",{class:k(["recommended-rooms",{"has-content":f.value.length>0}])},[e("h3",null,[t[11]||(t[11]=e("i",{class:"fas fa-star"},null,-1)),t[12]||(t[12]=_(" AIæ¨èæˆ¿é—´ ")),f.value.length>0?(l(),n("span",xt,"("+i(f.value.length)+")",1)):$("",!0)]),e("div",St,[f.value.length===0?(l(),n("div",Ct,t[13]||(t[13]=[e("i",{class:"fas fa-robot"},null,-1),e("p",null,"è¯·ä¸AIåŠ©æ‰‹å¯¹è¯ï¼Œæˆ‘ä¼šä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„æˆ¿é—´",-1),e("p",{class:"empty-hint"},"ä¾‹å¦‚ï¼šæˆ‘æƒ³è¦ä¸€ä¸ªä¾¿å®œçš„æˆ¿é—´ã€æ¨èè±ªåæˆ¿é—´ã€é€‚åˆå®¶åº­çš„æˆ¿é—´",-1)]))):(l(),n("div",At,[e("div",Ut,[e("span",Wt,i(f.value.length)+"ä¸ªæ¨èæˆ¿é—´",1),e("button",{class:"clear-recommendations",onClick:pe,title:"æ¸…é™¤æ¨è"},t[14]||(t[14]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",{class:"rooms-scroll",ref_key:"roomsScrollContainer",ref:M},[(l(!0),n(Z,null,ee(f.value,a=>(l(),n("div",{key:a.id,class:"room-card recommended",onClick:I=>J(a)},[t[16]||(t[16]=e("div",{class:"recommend-badge"},[e("i",{class:"fas fa-robot"}),_(" AIæ¨è ")],-1)),e("img",{src:a.image,alt:a.name,class:"room-image"},null,8,Vt),e("div",qt,[e("h4",null,i(a.code)+"å·æˆ¿",1),e("p",null,i(a.name),1),a.recommendReason?(l(),n("div",Ot,[t[15]||(t[15]=e("i",{class:"fas fa-lightbulb"},null,-1)),_(" "+i(a.recommendReason),1)])):$("",!0),e("div",Nt,[e("span",Et,"Â¥"+i(a.price)+"/æ™š",1),e("span",Lt,"â­"+i(a.rating),1),e("span",{class:k(["status",a.status])},i(a.status==="available"?"å¯é¢„è®¢":"å·²é¢„è®¢"),3)])])],8,Mt))),128))],512)]))])],2),e("div",Pt,[e("h3",null,[t[17]||(t[17]=e("i",{class:"fas fa-receipt"},null,-1)),t[18]||(t[18]=_(" è®¢å•è¯¦æƒ… ")),p.value?(l(),n("span",zt,"å·²ç¡®è®¤")):$("",!0)]),e("div",Bt,[p.value?(l(),n("div",Ft,[e("div",Kt,[e("div",jt,[t[19]||(t[19]=e("span",{class:"label"},"è®¢å•å·",-1)),e("span",Ht,i(p.value.orderNumber),1)]),e("div",Yt,[t[20]||(t[20]=e("span",{class:"label"},"åˆ›å»ºæ—¶é—´",-1)),e("span",Gt,i(new Date(p.value.createdAt).toLocaleString()),1)])]),e("div",Jt,[e("div",Qt,[e("img",{src:De(p.value.roomCode),alt:"æˆ¿é—´å›¾ç‰‡",class:"room-thumbnail"},null,8,Xt)]),e("div",Zt,[e("h4",null,i(p.value.roomCode)+"å·æˆ¿ - "+i(p.value.roomName),1),e("div",es,[e("div",ts,[t[21]||(t[21]=e("i",{class:"fas fa-calendar-check"},null,-1)),e("span",null,"å…¥ä½: "+i(ne(p.value.checkInDate)),1)]),e("div",ss,[t[22]||(t[22]=e("i",{class:"fas fa-calendar-times"},null,-1)),e("span",null,"é€€æˆ¿: "+i(ne(p.value.checkOutDate)),1)])])])]),e("div",as,[e("div",os,[t[23]||(t[23]=e("i",{class:"fas fa-user"},null,-1)),t[24]||(t[24]=e("span",{class:"label"},"å®¢äºº:",-1)),e("span",is,i(p.value.guestName||"å¾…è¡¥å……"),1)]),e("div",ns,[t[25]||(t[25]=e("i",{class:"fas fa-phone"},null,-1)),t[26]||(t[26]=e("span",{class:"label"},"ç”µè¯:",-1)),e("span",ls,i(p.value.phone||"å¾…è¡¥å……"),1)])]),e("div",rs,[e("div",cs,[t[27]||(t[27]=e("span",{class:"label"},"æˆ¿è´¹",-1)),e("span",ds,"Â¥"+i(p.value.totalAmount),1)]),t[29]||(t[29]=e("div",{class:"summary-item"},[e("span",{class:"label"},"æœåŠ¡è´¹"),e("span",{class:"value"},"Â¥0")],-1)),e("div",us,[t[28]||(t[28]=e("span",{class:"label"},"æ€»è®¡",-1)),e("span",ps,"Â¥"+i(p.value.totalAmount),1)])]),e("div",{class:"order-actions"},[e("button",{class:"btn btn-outline",onClick:$e},t[30]||(t[30]=[e("i",{class:"fas fa-times"},null,-1),_(" å–æ¶ˆè®¢å• ")])),e("button",{class:"btn btn-primary",onClick:Re},t[31]||(t[31]=[e("i",{class:"fas fa-edit"},null,-1),_(" ä¿®æ”¹è®¢å• ")]))])])):(l(),n("div",hs,t[32]||(t[32]=[e("i",{class:"fas fa-clipboard-list"},null,-1),e("p",null,"æš‚æ— è®¢å•ä¿¡æ¯",-1),e("p",{class:"empty-hint"},"ä¸AIåŠ©æ‰‹å¯¹è¯ï¼Œåˆ›å»ºè®¢å•åå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ",-1),e("p",{class:"empty-hint"},"ä¾‹å¦‚ï¼šæˆ‘æƒ³é¢„è®¢101å·æˆ¿é—´",-1)])))])])]),e("div",fs,[e("div",ms,[e("div",vs,[t[33]||(t[33]=e("h3",null,[e("i",{class:"fas fa-comments"}),_(" ä¸AIåŠ©æ‰‹å¯¹è¯ ")],-1)),e("div",gs,[e("span",{class:k(["status-dot",{online:x.value}])},null,2),e("span",null,i(x.value?"åœ¨çº¿":"ç¦»çº¿"),1)])]),e("div",bs,[le(nt,{ref_key:"difyChatWidget",ref:U,"container-id":"ai-room-dify-container","auto-load":!0,onLoaded:P,onError:F,onMessage:ye},null,512)])])])]),e("div",ws,[e("div",ys,[t[37]||(t[37]=e("h2",null,[e("i",{class:"fas fa-home"}),_(" å…¨éƒ¨æˆ¿é—´ ")],-1)),e("div",_s,[de(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>E.value=a),onChange:L,class:"filter-select"},t[34]||(t[34]=[X('<option value="all" data-v-d3dd870c>å…¨éƒ¨æˆ¿å‹</option><option value="single" data-v-d3dd870c>å•äººæˆ¿</option><option value="double" data-v-d3dd870c>åŒäººæˆ¿</option><option value="family" data-v-d3dd870c>å®¶åº­æˆ¿</option><option value="suite" data-v-d3dd870c>å¥—æˆ¿</option>',5)]),544),[[Ue,E.value]]),e("div",ks,[e("button",{class:k(["toggle-btn",{active:O.value==="grid"}]),onClick:t[1]||(t[1]=a=>O.value="grid")},t[35]||(t[35]=[e("i",{class:"fas fa-th"},null,-1)]),2),e("button",{class:k(["toggle-btn",{active:O.value==="list"}]),onClick:t[2]||(t[2]=a=>O.value="list")},t[36]||(t[36]=[e("i",{class:"fas fa-list"},null,-1)]),2)])])]),e("div",Ds,[q.value?(l(),n("div",$s,t[38]||(t[38]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½æˆ¿é—´ä¿¡æ¯...",-1)]))):W.value.length===0?(l(),n("div",Rs,t[39]||(t[39]=[e("i",{class:"fas fa-home"},null,-1),e("p",null,"æš‚æ— ç¬¦åˆæ¡ä»¶çš„æˆ¿é—´",-1)]))):(l(),n("div",{key:2,class:k(["rooms-grid",O.value])},[(l(!0),n(Z,null,ee(W.value,a=>(l(),n("div",{key:a.id,class:"room-item",onClick:I=>J(a)},[e("div",Ts,[e("img",{src:a.image,alt:a.name,class:"room-image"},null,8,xs),e("div",{class:k(["room-status-badge",a.status])},i(a.status==="available"?"å¯é¢„è®¢":"å·²é¢„è®¢"),3),e("div",Ss,i(a.price>0?`Â¥${a.price}/æ™š`:"ä»·æ ¼å¾…å®š"),1)]),e("div",Cs,[e("div",As,[e("h4",Us,i(a.code)+"å·æˆ¿ - "+i(a.roomType),1),a.rating>0?(l(),n("div",Ws,[t[40]||(t[40]=e("i",{class:"fas fa-star"},null,-1)),e("span",null,i(a.rating),1)])):$("",!0)]),e("p",Ms,i(a.name)+" ("+i(a.floor)+")",1),e("div",Vs,[a.seat>0?(l(),n("span",qs,[t[41]||(t[41]=e("i",{class:"fas fa-users"},null,-1)),_(" "+i(a.seat)+"äºº ",1)])):$("",!0),e("span",Os,[t[42]||(t[42]=e("i",{class:"fas fa-window-maximize"},null,-1)),_(" "+i(a.hasWindow?`${a.windowDirection}å‘`:"æ— çª—"),1)]),t[44]||(t[44]=e("span",{class:"feature"},[e("i",{class:"fas fa-wifi"}),_(" å…è´¹WiFi ")],-1)),t[45]||(t[45]=e("span",{class:"feature"},[e("i",{class:"fas fa-snowflake"}),_(" ç©ºè°ƒ ")],-1)),a.vrUrl?(l(),n("span",Ns,[t[43]||(t[43]=e("i",{class:"fas fa-vr-cardboard"},null,-1)),e("a",{href:a.vrUrl,target:"_blank",class:"vr-link",onClick:I=>_e(a.vrUrl)},"VRçœ‹æˆ¿",8,Es)])):$("",!0)]),e("div",Ls,[e("div",Ps,i(a.category),1),e("button",{class:k(["book-btn",{disabled:a.status!=="available"||a.price===0}]),disabled:a.status!=="available"||a.price===0,onClick:We(I=>J(a),["stop"])},i(a.price===0?"ä»·æ ¼å¾…å®š":a.status==="available"?"é€‰æ‹©æˆ¿é—´":"å·²é¢„è®¢"),11,zs)])])],8,Is))),128))],2))])])])])]))}}),Ys=ue(Bs,[["__scopeId","data-v-d3dd870c"]]);export{Ys as default};
