import{d as S,N as L,u as R,a as E,b as y,o as F,e as M,f as l,g as n,i as s,s as i,h as _,L as Q,l as k,x as d,O as p,F as f,t as a,k as b,p as x,_ as T}from"./index-DFO3eZqt.js";import{p as A}from"./ProductAIService-DSYmRkHQ.js";const z={class:"page-container"},O={class:"navbar"},U={class:"nav-container"},j={class:"nav-menu"},G={class:"nav-buttons"},H={key:0,class:"user-info"},J={class:"main-content"},K={class:"container"},W={class:"breadcrumb"},X={class:"breadcrumb-current"},Y={key:0,class:"product-detail"},Z={class:"product-main"},ss={class:"product-gallery"},ts={class:"main-image"},os=["src","alt"],es={key:0,class:"thumbnail-list"},ns=["onClick"],ls=["src","alt"],as={class:"product-info"},is={class:"product-header"},us={class:"product-title"},cs={class:"product-category"},rs={class:"category-tag"},ds={class:"origin-tag"},vs={class:"product-rating"},_s={class:"stars"},ps={class:"rating-text"},fs={class:"product-price"},gs={class:"current-price"},ms={key:0,class:"original-price"},bs={key:1,class:"discount"},ks={class:"product-description"},hs={class:"product-features"},ys={key:0,class:"product-specifications"},Cs={class:"spec-grid"},Ps={class:"spec-label"},$s={class:"spec-value"},xs={class:"purchase-section"},As={class:"quantity-selector"},Is={class:"quantity-controls"},qs=["disabled"],ws={class:"quantity"},Bs={class:"stock-status"},Ns={key:0,class:"in-stock"},Vs={key:1,class:"out-of-stock"},Ds={class:"product-details"},Ss={class:"detail-section"},Ls={class:"cultural-background"},Rs={class:"detail-section"},Es={class:"recommended-uses"},Fs={class:"related-products"},Ms={class:"products-grid"},Qs=["onClick"],Ts={class:"product-image"},zs=["src","alt"],Os={class:"product-info"},Us={class:"product-price"},js={class:"current-price"},Gs={key:1,class:"loading"},Hs=S({__name:"ProductDetailView",setup(Js){const C=L(),u=R(),g=E(),o=y(),h=y(""),v=y(1),P=y([]),I=c=>({tea:"茶叶",food:"美食",craft:"工艺品",souvenir:"纪念品",experience:"体验"})[c]||c,$=()=>{const c=C.params.id,t=A.getProductById(c);t?(o.value=t,h.value=t.images[0],q()):u.push("/products")},q=()=>{if(o.value){const c=A.getProductCatalog();P.value=c.filter(t=>t.id!==o.value.id&&t.category===o.value.category).slice(0,4)}},w=()=>{v.value++},B=()=>{v.value>1&&v.value--},N=()=>{if(!g.isAuthenticated){u.push("/login");return}console.log("添加到购物车:",o.value?.name,v.value)},V=()=>{if(!g.isAuthenticated){u.push("/login");return}u.push({path:"/orders",query:{action:"create",productId:o.value?.id,quantity:v.value.toString()}})},D=c=>{u.push(`/product/${c}`)};return F(()=>{$()}),u.afterEach(()=>{C.name==="ProductDetail"&&$()}),(c,t)=>{const r=M("router-link");return n(),l("div",z,[s("nav",O,[s("div",U,[t[10]||(t[10]=s("div",{class:"logo"},[s("i",{class:"fas fa-seedling"}),i(" 普洱蘑菇庄园 ")],-1)),s("div",j,[_(r,{to:"/",class:"nav-link"},{default:d(()=>t[4]||(t[4]=[i("首页")])),_:1,__:[4]}),_(r,{to:"/tea-culture",class:"nav-link"},{default:d(()=>t[5]||(t[5]=[i("茶文化")])),_:1,__:[5]}),_(r,{to:"/products",class:"nav-link"},{default:d(()=>t[6]||(t[6]=[i("民宿产品")])),_:1,__:[6]}),_(r,{to:"/ai-rooms",class:"nav-link"},{default:d(()=>t[7]||(t[7]=[i("AI选房")])),_:1,__:[7]}),_(r,{to:"/orders",class:"nav-link"},{default:d(()=>t[8]||(t[8]=[i("订单")])),_:1,__:[8]}),p(g).isAuthenticated?(n(),Q(r,{key:0,to:"/profile",class:"nav-link"},{default:d(()=>t[9]||(t[9]=[i("个人信息")])),_:1,__:[9]})):k("",!0)]),s("div",G,[p(g).isAuthenticated?(n(),l("div",H,[s("button",{onClick:t[0]||(t[0]=e=>p(u).push("/profile")),class:"btn btn-outline"},"个人信息"),s("button",{onClick:t[1]||(t[1]=(...e)=>p(g).logout&&p(g).logout(...e)),class:"btn btn-outline"},"退出")])):(n(),l(f,{key:1},[s("button",{onClick:t[2]||(t[2]=e=>p(u).push("/login")),class:"btn btn-outline"},"登录"),s("button",{onClick:t[3]||(t[3]=e=>p(u).push("/register")),class:"btn btn-primary"},"注册")],64))])])]),s("main",J,[s("div",K,[s("div",W,[_(r,{to:"/",class:"breadcrumb-link"},{default:d(()=>t[11]||(t[11]=[i("首页")])),_:1,__:[11]}),t[13]||(t[13]=s("span",{class:"breadcrumb-separator"},"/",-1)),_(r,{to:"/products",class:"breadcrumb-link"},{default:d(()=>t[12]||(t[12]=[i("民宿产品")])),_:1,__:[12]}),t[14]||(t[14]=s("span",{class:"breadcrumb-separator"},"/",-1)),s("span",X,a(o.value?.name),1)]),o.value?(n(),l("div",Y,[s("div",Z,[s("div",ss,[s("div",ts,[s("img",{src:h.value,alt:o.value.name},null,8,os)]),o.value.images.length>1?(n(),l("div",es,[(n(!0),l(f,null,b(o.value.images,(e,m)=>(n(),l("div",{key:m,class:x(["thumbnail",{active:h.value===e}]),onClick:Ks=>h.value=e},[s("img",{src:e,alt:`${o.value.name} ${m+1}`},null,8,ls)],10,ns))),128))])):k("",!0)]),s("div",as,[s("div",is,[s("h1",us,a(o.value.name),1),s("div",cs,[s("span",rs,a(I(o.value.category)),1),s("span",ds,a(o.value.origin),1)])]),s("div",vs,[s("div",_s,[(n(),l(f,null,b(5,e=>s("span",{key:e,class:x(["star",{filled:e<=Math.floor(o.value.rating)}])},"⭐",2)),64))]),s("span",ps,a(o.value.rating)+" ("+a(o.value.reviews)+"条评价)",1)]),s("div",fs,[s("span",gs,"￥"+a(o.value.price),1),o.value.originalPrice?(n(),l("span",ms,"￥"+a(o.value.originalPrice),1)):k("",!0),o.value.originalPrice?(n(),l("span",bs," 省￥"+a(o.value.originalPrice-o.value.price),1)):k("",!0)]),s("div",ks,[s("p",null,a(o.value.description),1)]),s("div",hs,[t[16]||(t[16]=s("h3",null,"产品特色",-1)),s("ul",null,[(n(!0),l(f,null,b(o.value.features,e=>(n(),l("li",{key:e},[t[15]||(t[15]=s("i",{class:"fas fa-check"},null,-1)),i(" "+a(e),1)]))),128))])]),o.value.specifications?(n(),l("div",ys,[t[17]||(t[17]=s("h3",null,"产品规格",-1)),s("div",Cs,[(n(!0),l(f,null,b(o.value.specifications,(e,m)=>(n(),l("div",{key:m,class:"spec-item"},[s("span",Ps,a(m)+":",1),s("span",$s,a(e),1)]))),128))])])):k("",!0),s("div",xs,[s("div",As,[t[18]||(t[18]=s("label",null,"数量:",-1)),s("div",Is,[s("button",{onClick:B,disabled:v.value<=1},"-",8,qs),s("span",ws,a(v.value),1),s("button",{onClick:w},"+")])]),s("div",{class:"action-buttons"},[s("button",{onClick:N,class:"btn btn-outline btn-large"},t[19]||(t[19]=[s("i",{class:"fas fa-shopping-cart"},null,-1),i(" 加入购物车 ")])),s("button",{onClick:V,class:"btn btn-primary btn-large"},t[20]||(t[20]=[s("i",{class:"fas fa-credit-card"},null,-1),i(" 立即购买 ")]))]),s("div",Bs,[o.value.inStock?(n(),l("span",Ns,t[21]||(t[21]=[s("i",{class:"fas fa-check-circle"},null,-1),i(" 现货供应 ")]))):(n(),l("span",Vs,t[22]||(t[22]=[s("i",{class:"fas fa-times-circle"},null,-1),i(" 暂时缺货 ")])))])])])]),s("div",Ds,[s("div",Ss,[t[23]||(t[23]=s("h2",null,"文化背景",-1)),s("div",Ls,[s("p",null,a(o.value.culturalBackground),1)])]),s("div",Rs,[t[24]||(t[24]=s("h2",null,"推荐用途",-1)),s("div",Es,[(n(!0),l(f,null,b(o.value.recommendedUse,e=>(n(),l("div",{key:e,class:"use-tag"},a(e),1))),128))])])]),s("div",Fs,[t[25]||(t[25]=s("h2",null,"相关推荐",-1)),s("div",Ms,[(n(!0),l(f,null,b(P.value,e=>(n(),l("div",{key:e.id,class:"product-card",onClick:m=>D(e.id)},[s("div",Ts,[s("img",{src:e.images[0],alt:e.name},null,8,zs)]),s("div",Os,[s("h4",null,a(e.name),1),s("div",Us,[s("span",js,"￥"+a(e.price),1)])])],8,Qs))),128))])])])):(n(),l("div",Gs,t[26]||(t[26]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1),s("p",null,"加载中...",-1)])))])])])}}}),Ys=T(Hs,[["__scopeId","data-v-08a9cb81"]]);export{Ys as default};
