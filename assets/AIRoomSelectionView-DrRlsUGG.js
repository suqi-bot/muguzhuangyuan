import{d as ee,b as p,o as se,f as l,g as r,i as e,p as T,l as R,t as n,F as z,k as K,m as te,v as we,G as ye,H as _e,_ as ae,u as ke,a as De,h as Z,j as H,A as Ie,s as I,K as Te,w as Re}from"./index-DFO3eZqt.js";import"./request-DzKJqaQU.js";import{useChatHistoryStore as $e}from"./chatHistory-wuOurKui.js";const Ce={class:"dify-chat-widget"},Se={class:"chat-container"},xe={class:"chat-header"},Ae={class:"ai-avatar-section"},Ue={class:"ai-avatar-circle"},Oe={class:"ai-info-section"},We={class:"connection-status"},Me={class:"status-text"},Ne={key:0,class:"message-avatar"},qe={class:"message-content"},Pe=["innerHTML"],Ee={class:"message-time"},je={key:0,class:"message assistant typing-indicator"},Ve={class:"chat-input"},Be={class:"input-container"},Le=["disabled"],ze=["disabled"],Ke=ee({__name:"DifyChatWidgetNew",props:{containerId:{default:"dify-chat-container"},autoLoad:{type:Boolean,default:!0}},emits:["loaded","error","message"],setup(J,{expose:S,emit:F}){const Y=J,q=F,g=p([]),U=p(""),x=p(!1),f=p(!1),h=p(""),y=p(null),c={apiKey:"app-oaUwvb7k2zbC8Bi03EO977nN",baseUrl:"http://4295a4ce.r28.cpolar.top/v1",chatUrl:"http://4295a4ce.r28.cpolar.top/v1/chat-messages"},k=async()=>{try{console.log("正在连接Dify服务..."),console.log("使用API Key:",c.apiKey),console.log("Base URL:",c.baseUrl);const d=await fetch(`${c.baseUrl}/parameters`,{method:"GET",headers:{Authorization:`Bearer ${c.apiKey}`,"Content-Type":"application/json"}});if(console.log("基础连接测试状态:",d.status),d.ok){const i=await fetch(c.chatUrl,{method:"POST",headers:{Authorization:`Bearer ${c.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:{},query:"hello",response_mode:"blocking",user:"test-user"})});if(console.log("聊天API测试状态:",i.status),i.ok)f.value=!0,console.log("🎉 Dify服务连接成功！聊天API正常工作"),j(),q("loaded");else{console.error("聊天API测试失败:",i.status);const m=await i.text();throw console.error("聊天API错误详情:",m),new Error(`聊天API错误: ${i.status}`)}}else throw console.error("基础连接失败:",d.status),new Error(`基础连接失败: ${d.status}`)}catch(d){console.error("Dify连接失败:",d),f.value=!1,q("error",`无法连接到Dify服务: ${d instanceof Error?d.message:String(d)}`),console.log("Dify连接失败，但仍可使用基本功能"),j()}},j=()=>{const d={id:Date.now(),type:"assistant",content:"您好！我是普普AI助手，您的专属选房顾问。我可以根据您的需求为您推荐最适合的房间。请告诉我您的需求，比如预算、房型偏好等。",timestamp:new Date().toISOString()};g.value.push(d),O()},M=()=>{console.log("重置会话，清空聊天历史和会话ID"),h.value="",g.value=[],j()},N=async()=>{if(!U.value.trim()||!f.value||x.value)return;const d=U.value.trim(),i={id:Date.now(),type:"user",content:d,timestamp:new Date().toISOString()};g.value.push(i),U.value="",O(),x.value=!0;try{if(console.log("发送消息到Dify:",d),!f.value)throw new Error("Dify服务未连接");const m={inputs:{},query:d,response_mode:"blocking",user:"user-"+Date.now()};h.value&&h.value.trim()?(m.conversation_id=h.value,console.log("使用现有会话ID:",h.value)):console.log("开始新会话（无会话ID）"),console.log("发送请求体:",JSON.stringify(m,null,2));const w=await fetch(c.chatUrl,{method:"POST",headers:{Authorization:`Bearer ${c.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(m)});if(console.log("Dify API响应状态:",w.status),w.ok){const $=await w.json();console.log("Dify响应数据:",$),$.conversation_id&&(h.value=$.conversation_id);const C={id:Date.now()+1,type:"assistant",content:$.answer||"抱歉，我没有理解您的问题，请重新描述。",timestamp:new Date().toISOString()};g.value.push(C),q("message",{type:"ai",content:C.content,timestamp:C.timestamp})}else{const $=await w.text();if(console.error(`Dify API调用失败 (${w.status}):`,$),w.status===404&&$.includes("Conversation Not Exists")){console.log("会话不存在，重置会话ID并重试"),h.value="";try{const E=await fetch(c.chatUrl,{method:"POST",headers:{Authorization:`Bearer ${c.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:{},query:d,response_mode:"blocking",user:"user-"+Date.now()})});if(E.ok){const W=await E.json();console.log("重试成功，Dify响应数据:",W),W.conversation_id&&(h.value=W.conversation_id,console.log("新会话ID:",h.value));const B={id:Date.now()+1,type:"assistant",content:W.answer||"抱歉，我没有理解您的问题，请重新描述。",timestamp:new Date().toISOString()};g.value.push(B),q("message",{type:"ai",content:B.content,timestamp:B.timestamp});return}}catch(E){console.error("重试失败:",E)}}const C={id:Date.now()+1,type:"assistant",content:`抱歉，AI服务暂时不可用（错误代码：${w.status}）。请稍后再试或联系管理员。`,timestamp:new Date().toISOString()};g.value.push(C)}}catch(m){console.error("发送消息失败:",m);const w={id:Date.now()+1,type:"assistant",content:`抱歉，发送消息时出现错误：${m instanceof Error?m.message:String(m)}。请检查网络连接或稍后再试。`,timestamp:new Date().toISOString()};g.value.push(w)}finally{x.value=!1,O()}},O=()=>{_e(()=>{y.value&&(y.value.scrollTop=y.value.scrollHeight)})},V=d=>new Date(d).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),P=d=>{if(!d)return"";console.log("原始消息内容:",d);let i=d.replace(/🏠 查看房型"[^>]*>🏠 查看房型/g,"").replace(/- 🏠 查看房型"[^>]*>🏠 查看房型/g,"").replace(/查看房型"[^>]*>🏠 查看房型/g,"").replace(/查看房型"[^>]*>查看房型/g,"").replace(/查看房间"[^>]*>查看房间/g,"").replace(/查看详情"[^>]*>查看详情/g,"").replace(/[^<]*" target="_blank"[^>]*>[^<]*/g,"").replace(/[^<]*rel="noopener noreferrer"[^>]*>[^<]*/g,"").replace(/[^<]*class="message-link"[^>]*>[^<]*/g,"");return console.log("清理后内容:",i),i=i.replace(/(💰\d+元\/晚)/g,`$1
<a href="https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00" target="_blank" rel="noopener noreferrer" class="message-link">🏠 查看房型</a>`),i=i.replace(/查看房间[：:]\s*\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="message-link">🏠 查看房型</a>'),i=i.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(m,w,$)=>{let C="🏠 查看房型";return(w==="book now"||w==="Book Now"||w==="立即预订")&&(C="📝 立即预订"),console.log(`链接转换: "${w}" → "${C}"`),`<a href="${$}" target="_blank" rel="noopener noreferrer" class="message-link">${C}</a>`}),i=i.replace(/(https?:\/\/[^\s<>"']+)/g,'<a href="$1" target="_blank" rel="noopener noreferrer" class="message-link">🏠 查看房型</a>'),i=i.replace(/\n\s*\n/g,`
`),i=i.replace(/\n/g,"<br>"),console.log("最终格式化内容:",i),i};return se(()=>{Y.autoLoad&&setTimeout(()=>{k()},1e3)}),S({initializeDify:k,isDifyConnected:()=>f.value,sendMessage:N}),(d,i)=>(r(),l("div",Ce,[e("div",Se,[e("div",xe,[e("div",Ae,[e("div",Ue,[i[1]||(i[1]=e("video",{src:"/src/assets/images/IP形象/37b48b40dbc80e2a44dce0f626120357_raw.mp4",alt:"普普AI助手",class:"ai-character-video",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)),e("div",{class:T(["status-indicator",{online:f.value}])},null,2)]),e("div",Oe,[i[2]||(i[2]=e("h3",{class:"ai-name"},"普普 AI助手",-1)),i[3]||(i[3]=e("p",{class:"ai-title"},"专属选房顾问",-1)),e("div",We,[e("span",{class:T(["status-dot",{online:f.value}])},null,2),e("span",Me,n(f.value?"在线":"连接中..."),1),f.value?R("",!0):(r(),l("button",{key:0,onClick:k,class:"reconnect-btn"}," 重新连接 ")),f.value&&h.value?(r(),l("button",{key:1,onClick:M,class:"reset-btn"}," 新对话 ")):R("",!0)])])])]),e("div",{class:"chat-messages",ref_key:"chatMessages",ref:y},[(r(!0),l(z,null,K(g.value,m=>(r(),l("div",{key:m.id,class:T(["message",m.type])},[m.type==="assistant"?(r(),l("div",Ne,i[4]||(i[4]=[e("video",{src:"/src/assets/images/IP形象/37b48b40dbc80e2a44dce0f626120357_raw.mp4",class:"avatar-video",autoplay:"",loop:"",muted:"",playsinline:""},null,-1)]))):R("",!0),e("div",qe,[e("div",{class:"message-text",innerHTML:P(m.content)},null,8,Pe),e("div",Ee,n(V(m.timestamp)),1)])],2))),128)),x.value?(r(),l("div",je,i[5]||(i[5]=[e("div",{class:"message-avatar"},[e("video",{src:"/src/assets/images/IP形象/37b48b40dbc80e2a44dce0f626120357_raw.mp4",class:"avatar-video",autoplay:"",loop:"",muted:"",playsinline:""})],-1),e("div",{class:"message-content"},[e("div",{class:"typing-dots"},[e("span"),e("span"),e("span")])],-1)]))):R("",!0)],512),e("div",Ve,[e("div",Be,[te(e("input",{"onUpdate:modelValue":i[0]||(i[0]=m=>U.value=m),onKeypress:ye(N,["enter"]),placeholder:"请输入您的需求，比如：推荐便宜的房间...",class:"message-input",disabled:!f.value||x.value},null,40,Le),[[we,U.value]]),e("button",{onClick:N,class:"send-button",disabled:!U.value.trim()||!f.value||x.value},i[6]||(i[6]=[e("i",{class:"fas fa-paper-plane"},null,-1)]),8,ze)])])])]))}}),Fe=ae(Ke,[["__scopeId","data-v-6e22ad4c"]]),Ye={class:"ai-room-selection"},He={class:"main-content"},Je={class:"container"},Ge={class:"content-grid"},Qe={class:"left-panel"},Xe={class:"ai-assistant"},Ze={class:"ai-header"},es={class:"ai-avatar"},ss=["src"],ts={key:0,class:"speaking-indicator"},as={class:"ai-info"},os={class:"ai-status"},is={class:"ai-controls"},ns={class:"control-buttons"},ls=["disabled"],rs={key:0,class:"fas fa-microphone"},cs={key:1,class:"fas fa-stop"},ds=["disabled"],us={key:0,class:"voice-indicator"},ps={key:1,class:"voice-result"},fs={class:"voice-content"},ms={class:"recommended-rooms"},hs={key:0,class:"count"},vs={class:"rooms-list"},gs={key:0,class:"empty-state"},bs={key:1,class:"rooms-container"},ws=["onClick"],ys=["src","alt"],_s={class:"room-info"},ks={key:0,class:"recommend-reason"},Ds={class:"room-meta"},Is={class:"price"},Ts={class:"rating"},Rs={key:0,class:"scroll-indicators"},$s=["onClick"],Cs={class:"order-details"},Ss={key:0,class:"order-status"},xs={class:"order-content"},As={key:0,class:"order-info"},Us={class:"order-header"},Os={class:"order-number"},Ws={class:"value"},Ms={class:"order-date"},Ns={class:"value"},qs={class:"order-room-info"},Ps={class:"room-image-container"},Es=["src"],js={class:"room-details"},Vs={class:"stay-dates"},Bs={class:"date-item"},Ls={class:"date-item"},zs={class:"guest-info"},Ks={class:"guest-item"},Fs={class:"value"},Ys={class:"guest-item"},Hs={class:"value"},Js={class:"order-summary"},Gs={class:"summary-item"},Qs={class:"value"},Xs={class:"summary-item total"},Zs={class:"value price"},et={key:1,class:"empty-state"},st={class:"right-panel"},tt={class:"chat-container"},at={class:"chat-header"},ot={class:"chat-status"},it={class:"dify-chat-wrapper"},nt={class:"all-rooms-section"},lt={class:"section-header"},rt={class:"room-filters"},ct={class:"view-toggle"},dt={class:"rooms-content"},ut={key:0,class:"loading-state"},pt={key:1,class:"empty-state"},ft=["onClick"],mt={class:"room-image-container"},ht=["src","alt"],vt={class:"room-price-badge"},gt={class:"room-details"},bt={class:"room-header"},wt={class:"room-name"},yt={key:0,class:"room-rating"},_t={class:"room-type"},kt={class:"room-features"},Dt={key:0,class:"feature"},It={class:"feature"},Tt={key:1,class:"feature"},Rt=["href"],$t={class:"room-footer"},Ct={class:"room-category"},St=["disabled","onClick"],xt=ee({__name:"AIRoomSelectionView",setup(J){ke(),De(),$e();const S=p(!1),F=p(!1),Y=p("idle"),q=p("/src/assets/images/IP形象/37b48b40dbc80e2a44dce0f626120357_raw.mp4"),g=p([]),U=p(0),x=p(),f=p(!1),h=p(""),y=p(null),c=p(null);p([]);const k=[{id:"107",code:"107",name:"雨林景观豪华蘑菇屋（单人间）",price:456,rating:4.8,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研1.jpg",floor:"1楼",direction:"南向带阳台",type:"单人间",features:["南向阳台","茶园景观"]},{id:"108",code:"108",name:"1楼茶园房",price:156,rating:4.6,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研1.jpg",floor:"1楼",direction:"南向阳光",type:"单人间",features:["性价比之选","茶园景观"]},{id:"201",code:"201",name:"雨林景观豪华蘑菇屋（单人间）",price:268,rating:4.7,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研2.jpg",floor:"2楼",direction:"南向带阳台",type:"单人间",features:["南向阳台","雨林景观"]},{id:"202",code:"202",name:"雨林景观豪华蘑菇屋",price:486,rating:4.9,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研2.jpg",floor:"2楼",direction:"南向采光",type:"双人间",features:["含双早","茶园景观"]},{id:"204",code:"204",name:"山景阳台南向房",price:999,rating:4.9,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研2.jpg",floor:"2楼",direction:"南向阳台",type:"双人间",features:["含双早","特色山景阳台","雨林景观"]},{id:"206",code:"206",name:"雨林景观豪华蘑菇屋",price:654,rating:4.8,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研2.jpg",floor:"2楼",direction:"西向观景",type:"双人间",features:["含双早","配茶具套装"]},{id:"207",code:"207",name:"雨林景观豪华蘑菇屋（双人间）",price:186,rating:4.7,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研2.jpg",floor:"2楼",direction:"东向带阳台",type:"双人间",features:["东向阳台","雨林景观"]},{id:"208",code:"208",name:"茶园景观北向房",price:198,rating:4.6,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研2.jpg",floor:"2楼",direction:"北向",type:"单人间",features:["山景阳台","早餐","茶园景观"]},{id:"301",code:"301",name:"雨林景观豪华蘑菇屋（双人间）",price:486,rating:4.8,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研3.jpg",floor:"3楼",direction:"南向",type:"双人间",features:["茶具套装","含早餐","茶园景观"]},{id:"302",code:"302",name:"雨林景观豪华蘑菇屋（双人间）",price:688,rating:4.8,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研3.jpg",floor:"3楼",direction:"南向",type:"双人间",features:["茶园景观","雨林景观"]},{id:"303",code:"303",name:"雨林景观豪华蘑菇屋（亲子房）",price:1088,rating:4.9,status:"available",image:"/src/assets/images/实地调研/房间调研/房间调研3.jpg",floor:"3楼",direction:"南向",type:"亲子房",features:["山景阳台","含早餐","适合家庭"]}],j=p(),M=p(),N=p([]),O=p([]),V=p(!1),P=p("all"),d=p("grid");se(()=>{i(),m(),G()});const i=()=>{console.log("AI助手初始化完成，使用Dify组件")},m=async()=>{await w()},w=async()=>{V.value=!0;try{const a=[{id:1,code:"展览厅",name:"展览厅",category:"展览厅",floor:"1楼",height:"2438",hasWindow:!1,windowDirection:"无",roomType:"展览厅",price:0,seat:0,rating:0,status:"unavailable",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",vrUrl:"",recommendReason:"展览厅暂不开放预订"},{id:2,code:"105",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"1楼",height:"2438",hasWindow:!1,windowDirection:"无",roomType:"单人间",price:256,seat:1,rating:4.5,status:"available",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"雨林景观，环境优美，适合独自旅行"},{id:3,code:"104",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"1楼",height:"2438",hasWindow:!1,windowDirection:"无",roomType:"单人间",price:255,seat:1,rating:4.5,status:"available",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"性价比高，环境舒适"},{id:4,code:"103",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"1楼",height:"2438",hasWindow:!1,windowDirection:"无",roomType:"单人间",price:333,seat:1,rating:4.6,status:"available",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"高评分房间，服务优质"},{id:5,code:"102",name:"雨林景观豪华蘑菇屋",category:"大床房",floor:"1楼",height:"2438",hasWindow:!0,windowDirection:"东",roomType:"大床房",price:888,seat:2,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1566665797739-1674de7a421a?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"豪华大床房，带窗户，视野开阔"},{id:6,code:"106",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"1楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"单人间",price:666,seat:1,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"南向房间，采光充足，环境优雅"},{id:7,code:"107",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"1楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"单人间",price:456,seat:1,rating:4.6,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"中等价位，性价比不错"},{id:8,code:"108",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"1楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"单人间",price:156,seat:1,rating:4.4,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"经济实惠，适合预算有限的客人"},{id:9,code:"101",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"1楼",height:"2438",hasWindow:!0,windowDirection:"东",roomType:"单人间",price:18,seat:1,rating:4.2,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"超值特价房，性价比极高"},{id:10,code:"211",name:"雨林景观豪华蘑菇屋",category:"亲子房",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"西",roomType:"亲子房",price:419,seat:3,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00",recommendReason:"亲子房，适合家庭出行，空间宽敞"},{id:11,code:"212",name:"雨林景观豪华蘑菇屋",category:"亲子房",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"西",roomType:"亲子房",price:418,seat:3,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:12,code:"210",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"北",roomType:"单人间",price:189,seat:1,rating:4.4,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:13,code:"209",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"北",roomType:"单人间",price:418,seat:1,rating:4.6,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:14,code:"208",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"北",roomType:"单人间",price:18,seat:1,rating:4.2,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:15,code:"207",name:"雨林景观豪华蘑菇屋",category:"大床房",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"东",roomType:"大床房",price:186,seat:2,rating:4.5,status:"available",image:"https://images.unsplash.com/photo-1566665797739-1674de7a421a?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:16,code:"206",name:"雨林景观豪华蘑菇屋",category:"双人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"西",roomType:"双人间",price:654,seat:2,rating:4.7,status:"available",image:"https://images.unsplash.com/photo-1618773928121-c32242e63f39?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:17,code:"205",name:"雨林景观豪华蘑菇屋",category:"双人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"东",roomType:"双人间",price:789,seat:2,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1618773928121-c32242e63f39?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:18,code:"204",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"单人间",price:999,seat:1,rating:4.9,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:19,code:"203",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"单人间",price:889,seat:1,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:20,code:"202",name:"雨林景观豪华蘑菇屋",category:"单人间",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"单人间",price:48,seat:1,rating:4.3,status:"available",image:"https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:21,code:"201",name:"雨林景观豪华蘑菇屋",category:"大床房",floor:"2楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"大床房",price:19,seat:2,rating:4.1,status:"available",image:"https://images.unsplash.com/photo-1566665797739-1674de7a421a?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:22,code:"301",name:"雨林景观豪华蘑菇屋",category:"亲子房",floor:"3楼",height:"2438",hasWindow:!1,windowDirection:"无",roomType:"亲子房",price:486,seat:4,rating:4.8,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:23,code:"302",name:"雨林景观豪华蘑菇屋",category:"亲子房",floor:"3楼",height:"2438",hasWindow:!1,windowDirection:"无",roomType:"亲子房",price:1088,seat:4,rating:4.9,status:"available",image:"https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"},{id:24,code:"303",name:"雨林景观豪华蘑菇屋",category:"双人间",floor:"3楼",height:"2438",hasWindow:!0,windowDirection:"南",roomType:"双人间",price:0,seat:2,rating:4.6,status:"unavailable",image:"https://images.unsplash.com/photo-1618773928121-c32242e63f39?w=400&h=300&fit=crop",vrUrl:"https://share-xt.hwbim.com/qlh/ffd333620ebb4e83b50899653b516f00"}];N.value=a,O.value=a}catch(a){console.error("加载房间数据失败:",a)}finally{V.value=!1}},$=()=>{P.value==="all"?O.value=N.value.filter(a=>a.code!=="展览厅"):O.value=N.value.filter(a=>{if(a.code==="展览厅")return!1;switch(P.value){case"single":return a.roomType==="单人间";case"double":return a.roomType==="双人间"||a.roomType==="大床房";case"family":return a.roomType==="亲子房";case"suite":return a.category.includes("套房")||a.category.includes("豪华");default:return!0}})},C=()=>{S.value=!0,console.log("Dify AI助手加载成功")},E=a=>{S.value=!1,console.error("Dify AI助手加载失败:",a)},W=a=>{console.log("选择房间:",a)};p("我会根据您的需求为您推荐最适合的房间");const B=a=>{if(U.value=a,x.value){const t=x.value.children[a];t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},G=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const a=window.webkitSpeechRecognition||window.SpeechRecognition;y.value=new a,y.value.continuous=!1,y.value.interimResults=!1,y.value.lang="zh-CN",y.value.onresult=s=>{const t=s.results[0][0].transcript;h.value=t,f.value=!1},y.value.onerror=s=>{console.error("语音识别错误:",s.error),f.value=!1},y.value.onend=()=>{f.value=!1}}},oe=()=>{y.value||G(),f.value?(y.value.stop(),f.value=!1):(h.value="",y.value.start(),f.value=!0)},ie=()=>{h.value&&M.value&&(M.value.sendMessage(h.value),h.value="")},ne=()=>{h.value=""},le=()=>{M.value&&M.value.resetConversation(),g.value=[],c.value=null},re=a=>{const s=[];if(console.log("解析房间推荐，消息内容:",a),[/【(\d{3})[^】]*】/g,/(\d{3})号?房/g,/房间号[：:]\s*(\d{3})/g,/房间\s*(\d{3})/g,/(\d{3})\s*房间/g,/推荐.*?(\d{3})/g,/建议.*?(\d{3})/g,/适合.*?(\d{3})/g,/(\d{3}).*?元/g].forEach(v=>{const o=a.match(v);o&&o.forEach(_=>{const D=_.match(/\d{3}/)?.[0];if(D){const L=k.find(b=>b.code===D);L&&!s.find(b=>b.code===D)&&(console.log("找到推荐房间:",D,L.name),s.push({...L,recommendReason:ce(a,D)}))}})}),s.length===0){const v=de(a);s.push(...v)}return console.log("解析结果:",s),s},ce=(a,s)=>{const t=[new RegExp(`${s}.*?因为(.{10,50})`,"i"),new RegExp(`推荐${s}.*?(.{10,50})`,"i"),new RegExp(`${s}.*?适合(.{10,50})`,"i")];for(const v of t){const o=a.match(v);if(o&&o[1])return o[1].trim()}return"根据您的需求推荐"},de=a=>{const s=[],t=a.toLowerCase();return(t.includes("推荐")||t.includes("房间")||t.includes("选择"))&&[k.find(o=>o.code==="208"),k.find(o=>o.code==="202"),k.find(o=>o.code==="204"),k.find(o=>o.code==="108")].filter(Boolean).forEach((o,_)=>{if(o){let D="";switch(_){case 0:D="性价比高，茶园景观";break;case 1:D="中档舒适，南向采光";break;case 2:D="豪华山景，设施完善";break;case 3:D="经济实惠，1楼便利";break;default:D="根据您的需求推荐"}s.push({...o,recommendReason:D})}}),(t.includes("便宜")||t.includes("经济")||t.includes("实惠"))&&k.filter(o=>o.price<=200).slice(0,2).forEach(o=>{s.find(_=>_.code===o.code)||s.push({...o,recommendReason:"价格实惠，性价比高"})}),(t.includes("豪华")||t.includes("高档")||t.includes("奢华"))&&k.filter(o=>o.price>=400).slice(0,2).forEach(o=>{s.find(_=>_.code===o.code)||s.push({...o,recommendReason:"豪华舒适，设施完善"})}),(t.includes("家庭")||t.includes("亲子")||t.includes("孩子"))&&k.filter(o=>o.type.includes("双人")||o.type.includes("亲子")).slice(0,2).forEach(o=>{s.find(_=>_.code===o.code)||s.push({...o,recommendReason:"适合家庭入住，空间宽敞"})}),s},ue=a=>{const s={};console.log("解析订单信息，消息内容:",a);const t=[/(\d{3})号?房/,/房间号[：:]\s*(\d{3})/,/房间\s*(\d{3})/,/(\d{3})\s*房间/,/预订.*?(\d{3})/,/选择.*?(\d{3})/];for(const b of t){const u=a.match(b);if(u){s.roomCode=u[1];const A=k.find(be=>be.code===u[1]);A&&(s.roomName=A.name,s.price=A.price);break}}const v=[/(\d{4})年(\d{1,2})月(\d{1,2})日/,/(\d{4})-(\d{1,2})-(\d{1,2})/,/(\d{1,2})月(\d{1,2})日/,/入住.*?(\d{4})年(\d{1,2})月(\d{1,2})日/,/入住.*?(\d{4})-(\d{1,2})-(\d{1,2})/,/入住时间.*?(\d{1,2})月(\d{1,2})日/,/(\d{1,2})\/(\d{1,2})\/(\d{4})/,/7月(\d{1,2})日/,/(\d{1,2})月(\d{1,2})号/];for(const b of v){const u=a.match(b);if(u){if(u.length===4)s.checkInDate=`${u[1]}-${u[2].padStart(2,"0")}-${u[3].padStart(2,"0")}`;else if(u.length===3){const A=new Date().getFullYear();s.checkInDate=`${A}-${u[1].padStart(2,"0")}-${u[2].padStart(2,"0")}`}else if(b.source.includes("7月")){const A=new Date().getFullYear();s.checkInDate=`${A}-07-${u[1].padStart(2,"0")}`}break}}const o=[/退房.*?(\d{1,2})月(\d{1,2})日/,/退房时间.*?(\d{1,2})月(\d{1,2})日/,/7月(\d{1,2})日.*?退房/,/退房.*?7月(\d{1,2})日/];for(const b of o){const u=a.match(b);if(u){const A=new Date().getFullYear();b.source.includes("7月")?s.checkOutDate=`${A}-07-${u[1].padStart(2,"0")}`:s.checkOutDate=`${A}-${u[1].padStart(2,"0")}-${u[2].padStart(2,"0")}`;break}}const _=[/1[3-9]\d{9}/,/手机[：:]\s*(1[3-9]\d{9})/,/电话[：:]\s*(1[3-9]\d{9})/,/联系方式[：:]\s*(1[3-9]\d{9})/];for(const b of _){const u=a.match(b);if(u){s.phone=u[1]||u[0];break}}const D=[/(\d+)元/,/总计[：:]\s*(\d+)/,/费用[：:]\s*(\d+)/,/价格[：:]\s*(\d+)/,/¥(\d+)/];for(const b of D){const u=a.match(b);if(u){s.totalAmount=parseInt(u[1]);break}}const L=[/姓名[：:]\s*([^\s\d]{2,4})/,/客人[：:]\s*([^\s\d]{2,4})/,/预订人[：:]\s*([^\s\d]{2,4})/];for(const b of L){const u=a.match(b);if(u){s.guestName=u[1];break}}return console.log("解析订单结果:",s),s},pe=a=>{if(console.log("收到Dify消息:",a),a.type==="ai"&&a.content){const s=re(a.content);if(s.length>0&&(g.value=s,console.log("更新AI推荐房间:",s)),["预订成功","订单详情","预订确认","订单确认","预订完成","已预订","预订信息","订单生成","确认预订","预订单","订单创建","预订记录"].some(o=>a.content.includes(o))){const o=ue(a.content);if(o.roomCode){const _={orderNumber:"ORD"+Date.now(),roomCode:o.roomCode,roomName:o.roomName||"雨林景观豪华蘑菇屋",checkInDate:o.checkInDate||Q(),checkOutDate:fe(o.checkInDate||Q()),totalAmount:o.totalAmount||o.price||48,phone:o.phone||"待补充",guestName:o.guestName||"待补充",status:"confirmed",createdAt:new Date().toISOString()};c.value=_,console.log("创建订单:",_),me(_)}}}},Q=()=>{const a=new Date;return a.setDate(a.getDate()+1),a.toISOString().split("T")[0]},fe=a=>{const s=new Date(a);return s.setDate(s.getDate()+1),s.toISOString().split("T")[0]},me=a=>{console.log("订单创建成功通知:",a)},he=a=>k.find(t=>t.code===a)?.image||"/src/assets/images/实地调研/房间调研/房间调研1.jpg",X=a=>new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),ve=()=>{c.value&&(c.value=null,console.log("订单已取消"))},ge=()=>{c.value&&console.log("订单修改请求")};return(a,s)=>(r(),l("div",Ye,[Z(Ie),s[45]||(s[45]=H('<div class="page-header" data-v-f7505592><div class="container" data-v-f7505592><h1 class="page-title" data-v-f7505592><span class="ai-icon" data-v-f7505592>🌳</span> AI智能选房 </h1><p class="page-subtitle" data-v-f7505592>与普普AI助手对话，找到最适合您的房间</p></div></div>',1)),e("div",He,[e("div",Je,[e("div",Ge,[e("div",Qe,[e("div",Xe,[e("div",Ze,[e("div",es,[e("video",{ref_key:"aiVideo",ref:j,src:q.value,alt:"普普AI助手",class:T(["ai-character",Y.value]),autoplay:"",loop:"",muted:"",playsinline:""},null,10,ss),F.value?(r(),l("div",ts,s[3]||(s[3]=[e("div",{class:"wave"},null,-1),e("div",{class:"wave"},null,-1),e("div",{class:"wave"},null,-1)]))):R("",!0)]),e("div",as,[s[4]||(s[4]=e("h3",null,"普普 AI助手",-1)),s[5]||(s[5]=e("p",null,"专属选房顾问",-1)),e("div",os,[e("span",{class:T(["status-dot",{online:S.value}])},null,2),e("span",null,n(S.value?"在线":"离线"),1)])])]),e("div",is,[e("div",ns,[e("button",{class:T(["control-btn voice-btn",{active:f.value}]),onClick:oe,disabled:!S.value},[f.value?(r(),l("i",cs)):(r(),l("i",rs)),e("span",null,n(f.value?"停止录音":"语音输入"),1)],10,ls),e("button",{class:"control-btn reset-btn",onClick:le,disabled:!S.value},s[6]||(s[6]=[e("i",{class:"fas fa-redo-alt"},null,-1),e("span",null,"重置对话",-1)]),8,ds)]),f.value?(r(),l("div",us,s[7]||(s[7]=[H('<div class="voice-wave" data-v-f7505592><div class="wave-bar" data-v-f7505592></div><div class="wave-bar" data-v-f7505592></div><div class="wave-bar" data-v-f7505592></div><div class="wave-bar" data-v-f7505592></div><div class="wave-bar" data-v-f7505592></div></div><p class="voice-text" data-v-f7505592>正在聆听您的语音...</p>',2)]))):R("",!0),h.value?(r(),l("div",ps,[s[10]||(s[10]=e("p",{class:"voice-label"},"识别结果：",-1)),e("p",fs,n(h.value),1),e("div",{class:"voice-actions"},[e("button",{class:"send-voice-btn",onClick:ie},s[8]||(s[8]=[e("i",{class:"fas fa-paper-plane"},null,-1),I(" 发送 ")])),e("button",{class:"clear-voice-btn",onClick:ne},s[9]||(s[9]=[e("i",{class:"fas fa-times"},null,-1),I(" 清除 ")]))])])):R("",!0)])]),e("div",ms,[e("h3",null,[s[11]||(s[11]=e("i",{class:"fas fa-star"},null,-1)),s[12]||(s[12]=I(" AI推荐房间 ")),g.value.length>0?(r(),l("span",hs,"("+n(g.value.length)+")",1)):R("",!0)]),e("div",vs,[g.value.length===0?(r(),l("div",gs,s[13]||(s[13]=[e("i",{class:"fas fa-robot"},null,-1),e("p",null,"请与AI助手对话，我会为您推荐最适合的房间",-1),e("p",{class:"empty-hint"},"例如：我想要一个便宜的房间、推荐豪华房间、适合家庭的房间",-1)]))):(r(),l("div",bs,[e("div",{class:"rooms-scroll",ref_key:"roomsScrollContainer",ref:x},[(r(!0),l(z,null,K(g.value,t=>(r(),l("div",{key:t.id,class:"room-card recommended",onClick:v=>W(t)},[s[15]||(s[15]=e("div",{class:"recommend-badge"},[e("i",{class:"fas fa-robot"}),I(" AI推荐 ")],-1)),e("img",{src:t.image,alt:t.name,class:"room-image"},null,8,ys),e("div",_s,[e("h4",null,n(t.code)+"号房",1),e("p",null,n(t.name),1),t.recommendReason?(r(),l("div",ks,[s[14]||(s[14]=e("i",{class:"fas fa-lightbulb"},null,-1)),I(" "+n(t.recommendReason),1)])):R("",!0),e("div",Ds,[e("span",Is,"¥"+n(t.price)+"/晚",1),e("span",Ts,"⭐"+n(t.rating),1),e("span",{class:T(["status",t.status])},n(t.status==="available"?"可预订":"已预订"),3)])])],8,ws))),128))],512),g.value.length>1?(r(),l("div",Rs,[(r(!0),l(z,null,K(g.value,(t,v)=>(r(),l("div",{key:v,class:T(["indicator",{active:U.value===v}]),onClick:o=>B(v)},null,10,$s))),128))])):R("",!0)]))])]),e("div",Cs,[e("h3",null,[s[16]||(s[16]=e("i",{class:"fas fa-receipt"},null,-1)),s[17]||(s[17]=I(" 订单详情 ")),c.value?(r(),l("span",Ss,"已确认")):R("",!0)]),e("div",xs,[c.value?(r(),l("div",As,[e("div",Us,[e("div",Os,[s[18]||(s[18]=e("span",{class:"label"},"订单号",-1)),e("span",Ws,n(c.value.orderNumber),1)]),e("div",Ms,[s[19]||(s[19]=e("span",{class:"label"},"创建时间",-1)),e("span",Ns,n(new Date(c.value.createdAt).toLocaleString()),1)])]),e("div",qs,[e("div",Ps,[e("img",{src:he(c.value.roomCode),alt:"房间图片",class:"room-thumbnail"},null,8,Es)]),e("div",js,[e("h4",null,n(c.value.roomCode)+"号房 - "+n(c.value.roomName),1),e("div",Vs,[e("div",Bs,[s[20]||(s[20]=e("i",{class:"fas fa-calendar-check"},null,-1)),e("span",null,"入住: "+n(X(c.value.checkInDate)),1)]),e("div",Ls,[s[21]||(s[21]=e("i",{class:"fas fa-calendar-times"},null,-1)),e("span",null,"退房: "+n(X(c.value.checkOutDate)),1)])])])]),e("div",zs,[e("div",Ks,[s[22]||(s[22]=e("i",{class:"fas fa-user"},null,-1)),s[23]||(s[23]=e("span",{class:"label"},"客人:",-1)),e("span",Fs,n(c.value.guestName||"待补充"),1)]),e("div",Ys,[s[24]||(s[24]=e("i",{class:"fas fa-phone"},null,-1)),s[25]||(s[25]=e("span",{class:"label"},"电话:",-1)),e("span",Hs,n(c.value.phone||"待补充"),1)])]),e("div",Js,[e("div",Gs,[s[26]||(s[26]=e("span",{class:"label"},"房费",-1)),e("span",Qs,"¥"+n(c.value.totalAmount),1)]),s[28]||(s[28]=e("div",{class:"summary-item"},[e("span",{class:"label"},"服务费"),e("span",{class:"value"},"¥0")],-1)),e("div",Xs,[s[27]||(s[27]=e("span",{class:"label"},"总计",-1)),e("span",Zs,"¥"+n(c.value.totalAmount),1)])]),e("div",{class:"order-actions"},[e("button",{class:"btn btn-outline",onClick:ve},s[29]||(s[29]=[e("i",{class:"fas fa-times"},null,-1),I(" 取消订单 ")])),e("button",{class:"btn btn-primary",onClick:ge},s[30]||(s[30]=[e("i",{class:"fas fa-edit"},null,-1),I(" 修改订单 ")]))])])):(r(),l("div",et,s[31]||(s[31]=[e("i",{class:"fas fa-clipboard-list"},null,-1),e("p",null,"暂无订单信息",-1),e("p",{class:"empty-hint"},"与AI助手对话，创建订单后将显示在这里",-1),e("p",{class:"empty-hint"},"例如：我想预订101号房间",-1)])))])])]),e("div",st,[e("div",tt,[e("div",at,[s[32]||(s[32]=e("h3",null,[e("i",{class:"fas fa-comments"}),I(" 与AI助手对话 ")],-1)),e("div",ot,[e("span",{class:T(["status-dot",{online:S.value}])},null,2),e("span",null,n(S.value?"在线":"离线"),1)])]),e("div",it,[Z(Fe,{ref_key:"difyChatWidget",ref:M,"container-id":"ai-room-dify-container","auto-load":!0,onLoaded:C,onError:E,onMessage:pe},null,512)])])])]),e("div",nt,[e("div",lt,[s[36]||(s[36]=e("h2",null,[e("i",{class:"fas fa-home"}),I(" 全部房间 ")],-1)),e("div",rt,[te(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>P.value=t),onChange:$,class:"filter-select"},s[33]||(s[33]=[H('<option value="all" data-v-f7505592>全部房型</option><option value="single" data-v-f7505592>单人房</option><option value="double" data-v-f7505592>双人房</option><option value="family" data-v-f7505592>家庭房</option><option value="suite" data-v-f7505592>套房</option>',5)]),544),[[Te,P.value]]),e("div",ct,[e("button",{class:T(["toggle-btn",{active:d.value==="grid"}]),onClick:s[1]||(s[1]=t=>d.value="grid")},s[34]||(s[34]=[e("i",{class:"fas fa-th"},null,-1)]),2),e("button",{class:T(["toggle-btn",{active:d.value==="list"}]),onClick:s[2]||(s[2]=t=>d.value="list")},s[35]||(s[35]=[e("i",{class:"fas fa-list"},null,-1)]),2)])])]),e("div",dt,[V.value?(r(),l("div",ut,s[37]||(s[37]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"正在加载房间信息...",-1)]))):O.value.length===0?(r(),l("div",pt,s[38]||(s[38]=[e("i",{class:"fas fa-home"},null,-1),e("p",null,"暂无符合条件的房间",-1)]))):(r(),l("div",{key:2,class:T(["rooms-grid",d.value])},[(r(!0),l(z,null,K(O.value,t=>(r(),l("div",{key:t.id,class:"room-item",onClick:v=>W(t)},[e("div",mt,[e("img",{src:t.image,alt:t.name,class:"room-image"},null,8,ht),e("div",{class:T(["room-status-badge",t.status])},n(t.status==="available"?"可预订":"已预订"),3),e("div",vt,n(t.price>0?`¥${t.price}/晚`:"价格待定"),1)]),e("div",gt,[e("div",bt,[e("h4",wt,n(t.code)+"号房 - "+n(t.roomType),1),t.rating>0?(r(),l("div",yt,[s[39]||(s[39]=e("i",{class:"fas fa-star"},null,-1)),e("span",null,n(t.rating),1)])):R("",!0)]),e("p",_t,n(t.name)+" ("+n(t.floor)+")",1),e("div",kt,[t.seat>0?(r(),l("span",Dt,[s[40]||(s[40]=e("i",{class:"fas fa-users"},null,-1)),I(" "+n(t.seat)+"人 ",1)])):R("",!0),e("span",It,[s[41]||(s[41]=e("i",{class:"fas fa-window-maximize"},null,-1)),I(" "+n(t.hasWindow?`${t.windowDirection}向`:"无窗"),1)]),s[43]||(s[43]=e("span",{class:"feature"},[e("i",{class:"fas fa-wifi"}),I(" 免费WiFi ")],-1)),s[44]||(s[44]=e("span",{class:"feature"},[e("i",{class:"fas fa-snowflake"}),I(" 空调 ")],-1)),t.vrUrl?(r(),l("span",Tt,[s[42]||(s[42]=e("i",{class:"fas fa-vr-cardboard"},null,-1)),e("a",{href:t.vrUrl,target:"_blank",class:"vr-link"},"VR看房",8,Rt)])):R("",!0)]),e("div",$t,[e("div",Ct,n(t.category),1),e("button",{class:T(["book-btn",{disabled:t.status!=="available"||t.price===0}]),disabled:t.status!=="available"||t.price===0,onClick:Re(v=>W(t),["stop"])},n(t.price===0?"价格待定":t.status==="available"?"选择房间":"已预订"),11,St)])])],8,ft))),128))],2))])])])])]))}}),Wt=ae(xt,[["__scopeId","data-v-f7505592"]]);export{Wt as default};
