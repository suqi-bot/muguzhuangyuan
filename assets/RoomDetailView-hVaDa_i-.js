import{d as E,u as G,Q as L,a as S,b,c as T,o as q,e as z,f as o,g as l,i as e,h as c,x as v,s as u,t as i,L as N,l as j,F as h,k,p,_ as Q}from"./index-vYzfv9NW.js";import{r as w}from"./request-DzKJqaQU.js";const U={class:"room-detail-page"},H={class:"navbar"},J={class:"nav-container"},K={class:"nav-menu"},O={class:"nav-buttons"},P={class:"user-welcome"},X={class:"main-content"},Y={key:0,class:"loading-container"},Z={key:1,class:"room-detail-container"},ss={class:"room-gallery"},es={class:"main-image"},as=["src","alt"],ts={class:"image-nav"},is=["disabled"],os=["disabled"],ls={key:0,class:"thumbnail-list"},ns=["src","alt","onClick"],rs={class:"room-info-section"},ds={class:"room-header"},us={class:"room-title"},cs={key:0,class:"room-rating"},vs={class:"stars"},ms={class:"rating-text"},gs={class:"room-price"},ps={class:"price"},_s={class:"room-description"},fs={class:"room-amenities"},bs={class:"amenities-grid"},hs={class:"room-details"},ks={class:"details-grid"},ys={class:"detail-item"},Cs={class:"value"},xs={class:"detail-item"},Is={class:"value"},js={class:"detail-item"},ws={class:"value"},Fs={class:"detail-item"},Rs={class:"value"},Ws={class:"booking-section"},Ds=["disabled"],$s={key:2,class:"error-container"},Ms=E({__name:"RoomDetailView",setup(Vs){const _=G(),y=L(),C=S(),f=b(!0),a=b(null),n=b(0),F=T(()=>!a.value?.images||a.value.images.length===0?"/src/assets/images/card/card01.jpg":a.value.images[n.value]),R=async()=>{f.value=!0;try{const t=y.params.id;let s;try{s=await w.get(`/h/room/detail?id=${t}`)}catch{s=await w.get(`/h/room/${t}`)}if(s.code===200||s.code==="200")s.data.room?a.value={...s.data.room,status:s.data.room.status===0?"available":"booked",images:s.data.img?.map(r=>W(r.url))||m(t),amenities:s.data.room.device?.split(",")||x()}:a.value={...s.data,status:s.data.status===0?"available":"booked",images:m(t),amenities:s.data.device?.split(",")||x()};else throw new Error("获取房间详情失败")}catch(t){console.error("获取房间详情失败:",t),a.value=$(y.params.id)}finally{f.value=!1}},W=t=>t?t.startsWith("http")?t:`http://localhost:8091/files/${t}`:D(),m=t=>({1:["@/assets/images/field-research/room-visits/room-visit1.jpg","@/assets/images/field-research/indoor-research/indoor1.jpg"],2:["@/assets/images/field-research/room-visits/room-visit2.jpg","@/assets/images/field-research/indoor-research/indoor2.jpg"],3:["@/assets/images/field-research/indoor-research/indoor3.jpg","@/assets/images/field-research/indoor-research/indoor4.jpg"]})[t]||["@/assets/images/field-research/room-visits/room-visit1.jpg","@/assets/images/field-research/indoor-research/indoor1.jpg"],x=()=>["免费WiFi","空调","24小时热水","独立卫浴","电视","冰箱"],D=()=>"@/assets/images/field-research/room-visits/room-visit1.jpg",$=t=>{const s={1:{id:1,name:"蘑菇森林小屋",code:"MG-001",category:"豪华间",price:388,state:"空闲",status:"available",describe:"隐藏在蘑菇森林深处的温馨小屋，四周环绕着各种珍稀蘑菇。房间采用天然木材装修，配备现代化设施。",device:"WiFi,空调,电视,独立卫浴,迷你吧,阳台",address:"普洱蘑菇庄园森林区A栋",city:"普洱市",seat:2,images:m("1"),amenities:["WiFi","空调","电视","独立卫浴","迷你吧","阳台"]},2:{id:2,name:"普洱茶香木屋",code:"MG-002",category:"标准间",price:288,state:"空闲",status:"available",describe:"充满茶香的精致木屋，房间内陈设着各种普洱茶具和茶叶。您可以在房间内品茶赏景。",device:"WiFi,空调,电视,独立卫浴,茶具套装,观景窗",address:"普洱蘑菇庄园茶园区B栋",city:"普洱市",seat:2,images:m("2"),amenities:["WiFi","空调","电视","独立卫浴","茶具套装","观景窗"]},3:{id:3,name:"庄园豪华套房",code:"MG-003",category:"套房",price:588,state:"空闲",status:"available",describe:"庄园内最豪华的套房，拥有独立客厅、卧室和观景阳台。房间装修典雅，设施齐全。",device:"WiFi,空调,电视,独立卫浴,客厅,阳台,迷你吧,保险箱",address:"普洱蘑菇庄园主楼C栋",city:"普洱市",seat:4,images:m("3"),amenities:["WiFi","空调","电视","独立卫浴","客厅","阳台","迷你吧","保险箱"]}};return s[t]||s[1]},M=()=>{a.value?.images&&a.value.images.length>1&&(n.value=n.value===0?a.value.images.length-1:n.value-1)},V=()=>{a.value?.images&&a.value.images.length>1&&(n.value=n.value===a.value.images.length-1?0:n.value+1)},I=()=>{_.push("/ai-rooms")},B=()=>{a.value&&a.value.status==="available"&&_.push(`/book/${a.value.id}`)},A=()=>{C.logout(),_.push("/login")};return q(()=>{R()}),(t,s)=>{const r=z("router-link");return l(),o("div",U,[e("nav",H,[e("div",J,[s[6]||(s[6]=e("div",{class:"logo"},"🍄 普洱蘑菇庄园",-1)),e("div",K,[c(r,{to:"/",class:"nav-link"},{default:v(()=>s[0]||(s[0]=[u("首页")])),_:1,__:[0]}),c(r,{to:"/tea-culture",class:"nav-link"},{default:v(()=>s[1]||(s[1]=[u("茶文化")])),_:1,__:[1]}),c(r,{to:"/products",class:"nav-link"},{default:v(()=>s[2]||(s[2]=[u("民宿产品")])),_:1,__:[2]}),c(r,{to:"/ai-rooms",class:"nav-link"},{default:v(()=>s[3]||(s[3]=[u("AI选房")])),_:1,__:[3]}),c(r,{to:"/orders",class:"nav-link"},{default:v(()=>s[4]||(s[4]=[u("订单")])),_:1,__:[4]}),c(r,{to:"/profile",class:"nav-link"},{default:v(()=>s[5]||(s[5]=[u("个人信息")])),_:1,__:[5]})]),e("div",O,[e("span",P,"欢迎，"+i(N(C).user?.username),1),e("button",{onClick:A,class:"btn btn-outline"},"退出")])])]),e("main",X,[f.value?(l(),o("div",Y,s[7]||(s[7]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"加载中...",-1)]))):a.value?(l(),o("div",Z,[e("div",{class:"back-section"},[e("button",{onClick:I,class:"back-btn"},s[8]||(s[8]=[e("i",{class:"fas fa-arrow-left"},null,-1),u(" 返回房间列表 ")]))]),e("div",ss,[e("div",es,[e("img",{src:F.value,alt:a.value.name},null,8,as),e("div",ts,[e("button",{onClick:M,class:"nav-btn prev-btn",disabled:a.value.images.length<=1},s[9]||(s[9]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,is),e("button",{onClick:V,class:"nav-btn next-btn",disabled:a.value.images.length<=1},s[10]||(s[10]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,os)])]),a.value.images.length>1?(l(),o("div",ls,[(l(!0),o(h,null,k(a.value.images,(d,g)=>(l(),o("img",{key:g,src:d,alt:`${a.value.name} ${g+1}`,class:p({active:n.value===g}),onClick:Bs=>n.value=g},null,10,ns))),128))])):j("",!0)]),e("div",rs,[e("div",ds,[e("h1",us,i(a.value.name),1),a.value.rating?(l(),o("div",cs,[e("div",vs,[(l(),o(h,null,k(5,d=>e("i",{key:d,class:p(d<=a.value.rating?"fas fa-star":"fa-regular fa-star")},null,2)),64))]),e("span",ms,i(a.value.rating)+" 分",1)])):j("",!0)]),e("div",gs,[e("span",ps,"¥"+i(a.value.price),1),s[11]||(s[11]=e("span",{class:"unit"},"/晚",-1))]),e("div",_s,[s[12]||(s[12]=e("h3",null,"房间介绍",-1)),e("p",null,i(a.value.description),1)]),e("div",fs,[s[14]||(s[14]=e("h3",null,"房间设施",-1)),e("div",bs,[(l(!0),o(h,null,k(a.value.amenities,d=>(l(),o("div",{key:d,class:"amenity-item"},[s[13]||(s[13]=e("i",{class:"fas fa-check"},null,-1)),e("span",null,i(d),1)]))),128))])]),e("div",hs,[s[19]||(s[19]=e("h3",null,"详细信息",-1)),e("div",ks,[e("div",ys,[s[15]||(s[15]=e("span",{class:"label"},"房间类型：",-1)),e("span",Cs,i(a.value.type),1)]),e("div",xs,[s[16]||(s[16]=e("span",{class:"label"},"房间面积：",-1)),e("span",Is,i(a.value.area||"25")+"㎡",1)]),e("div",js,[s[17]||(s[17]=e("span",{class:"label"},"最大入住：",-1)),e("span",ws,i(a.value.maxGuests||"2")+"人",1)]),e("div",Fs,[s[18]||(s[18]=e("span",{class:"label"},"床型：",-1)),e("span",Rs,i(a.value.bedType||"大床"),1)])])]),e("div",Ws,[e("div",{class:p(["availability-status",a.value.status])},[e("i",{class:p(a.value.status==="available"?"fas fa-check-circle":"fas fa-times-circle")},null,2),e("span",null,i(a.value.status==="available"?"可预订":"已被预订"),1)],2),e("button",{class:"book-btn",disabled:a.value.status!=="available",onClick:B},i(a.value.status==="available"?"立即预订":"暂不可预订"),9,Ds)])])])):(l(),o("div",$s,[s[20]||(s[20]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),s[21]||(s[21]=e("h3",null,"房间不存在",-1)),s[22]||(s[22]=e("p",null,"抱歉，您查看的房间不存在或已被删除",-1)),e("button",{onClick:I,class:"btn btn-primary"},"返回房间列表")]))])])}}}),Gs=Q(Ms,[["__scopeId","data-v-d7d9fd40"]]);export{Gs as default};
